<!DOCTYPE html><html><head><title>Open Street Map</title><style>html, body { height: 100%; background: #000; }
html, body, ul, ol, li, form, fieldset, legend { margin: 0; padding: 0; }
div { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; -ms-box-sizing: border-box; }
h1, h2, h3, h4, h5, h6, p { margin-top: 0; }
fieldset, img { border: 0; }
legend { color: #000; }
li { list-style: none; }
sup { vertical-align: text-top; }
sub { vertical-align: text-bottom; }
table { border-collapse: collapse; border-spacing: 0; }
caption, th, td { text-align: left; vertical-align: top; font-weight: normal; }
input, textarea, select { font-size: 110%; line-height: 1.1; }
abbr, acronym { border-bottom: .1em dotted; cursor: help; }
body { font-family: Helvetica, Tahoma; }
body, div, span {
	-webkit-tap-highlight-color: rgba(0,0,0,0);
	-webkit-user-select: none;
}
</style></head><body></body><script>IMG_CACHE={"resources/images/map-marker.png":"data:image/png;base64,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","spritesheets/map.json":"{\"resources/images/map-marker.png\":{\"group\":\"resources-images-map\",\"marginTop\":0,\"y\":2,\"marginBottom\":0,\"x\":2,\"sheet\":\"spritesheets/resources-images-map0.png\",\"marginRight\":3,\"sheetSize\":[256,256],\"h\":128,\"marginLeft\":23,\"scale\":1,\"w\":102},\"resources/fonts/metadata.json\":{},\"resources/fonts/fontsheetSizeMap.json\":{}}"};function bootstrap(e,t){var s,u,a,f,c,h,p,n=window,r=document,i=n.location;if(t&&("desktop"==t||"facebook"==t)&&/MSIE/i.test(navigator.userAgent)&&!r.createElement("canvas").getContext){s="chromeframe.html"+(i.search?i.search+"&":"?")+"target="+t;bootstrap=function(){};try{if(!(new ActiveXObject("ChromeTab.ChromeFrame")))throw"bad object";i.replace(s)}catch(o){n.onload=function(){var e=r.createElement("script");e.async=!0,e.src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js",e.onreadystatechange=function(){"loaded"==this.readyState&&CFInstall.check({mode:"overlay",oninstall:function(){i.replace(s)},url:"http://www.google.com/chromeframe/eula.html?user=true"})},r.getElementsByTagName("head")[0].appendChild(e)}}}else{n.__initialTime=+(new Date);try{if(n.CONFIG_OVERRIDES)for(u in n.CONFIG_OVERRIDES)n.CONFIG[u]=n.CONFIG_OVERRIDES[u];a=decodeURIComponent((n.location.search||"?").substr(1));if("{"==a[0]){f=JSON.parse(a);if(f)for(u in f)n.CONFIG[u]=f[u]}}catch(l){}n.CONFIG.CDNURL&&r.write('<base href="'+n.CONFIG.CDNURL+'">'),u=!1===n.CONFIG.scaleDPR?1:1/(n.devicePixelRatio||1);a=navigator.userAgent,c=/(iPod|iPhone|iPad)/i.test(a)?"ios":/BlackBerry/.test(a)?"blackberry":/Mobile Safari/.test(a)?"android":"";if(i.search.match(/exportSettings=true/))exportSettings();else if("blackberry"!=c&&!n.CONFIG.noRedirect){if(c&&"browser-mobile"!=t)return i.replace("//"+i.host+"/browser-mobile/"+i.hash);if(!c&&"browser-mobile"==t)return i.replace("//"+i.host+"/browser-desktop/"+i.hash)}"ios"==c&&r.write('<meta name="viewport" content="user-scalable=no,initial-scale='+u+",maximum-scale="+u+",minimum-scale="+u+',width=device-width" />'),Image.get||(Image.set=function(e,t){CACHE[e]=t},Image.get=function(e){return CACHE[e]}),n.hideAddressBar=function(){c&&(r.body.style.height=2*screen.height+"px",c=="ios"?(n.scrollTo(0,1),n.scrollTo(0,0)):n.scrollTo(0,1),r.body.offsetHeight)},hideAddressBar();h=n.innerHeight,p=!1;n._continueLoad=function(){var e;if(!p){p=!0;e=r.createElement("script");e.src=t+".js",r.getElementsByTagName("head")[0].appendChild(e)}},n.onload=function(){var e=+(new Date),t=!1,r=setInterval(function(){hideAddressBar();var i=n.innerHeight;if(i==h&&t||+(new Date)-e>1e3)c=="android"&&n.scrollTo(0,-1),clearInterval(r),setTimeout(function(){jsio("import gc.browser.bootstrap.launchBrowser")},0);i>h&&(t=!0),h=i},50);}}}(function(){window.BUILD_TARGET="browser-desktop",window.BUILD_ENV="browser",window.DEBUG=!0,window.DEV_MODE=!0,window.ADDON_NATIVE_ANDROID=!0,window.CONFIG={appID:"4574d752a6c64541ad01208245f03429",shortName:"openstreetmap",title:"Open Street Map",disableNativeViews:!1,target:"browser-desktop",version:1370890103401,servicesURL:"http://api.gameclosure.com",inviteURLTemplate:"http://openstreetmap.studio.example.com/?i={code}",splash:{},sdkVersion:"unknown"},window.CONFIG.baseURL=window.location.toString().match(/(.*\/).*$/)[1]})(),bootstrap("gc.browser.launchClient","browser-desktop");(function(){var D;function E(x){var S,M,e,N,h,d,K,s,R,L;function I(e){return e+=".js",d.__modules[e]||new z(e)}function z(e){this.friendlyPath=this.path=e,h.splitPath(e,this)}function D(){var n,e=require("fs"),t=require("path");this.name="node",this.global=GLOBAL,this.getCwd=process.cwd,this.pathSep=t.sep,this.log=function(){var e;try{e=Array.prototype.map.call(arguments,function(e){return e instanceof Error&&e.message?"Error:"+e.message+"\nStack:"+e.stack+"\nArguments:"+e.arguments:"string"==typeof e?e:JSON.stringify(e)}).join(" ")+"\n"}catch(t){e=Array.prototype.join.call(arguments," ")+"\n"}return process.stderr.write(e),e},this.getPath=function(){return t.relative(this.getCwd(),t.dirname(__filename)||".")};if(process.compile)this.eval=process.compile;else{n=require("vm");this.eval=function(e,t){try{return n.runInThisContext(e,t)}catch(r){throw this.log("In "+t+":\n"+r.message),r}}}this.fetch=function(n){var r,i,s,o,f;n=t.resolve(this.getCwd(),n);try{r=t.dirname(n),i=t.basename(n),s=i.toLowerCase(),o=e.readdirSync(r)}catch(u){return!1}for(r=0;f=o[r];++r)if(f.toLowerCase()==s&&f!=i)throw"Invalid case when importing ["+n+"].  You probably meant"+f;try{return e.readFileSync(n,"utf8")}catch(l){return!1}},this.require=require}function J(){var f,a=window.XMLHttpRequest||function(){return new ActiveXObject("Msxml2.XMLHTTP")},b=null,c=null,i=Array.prototype.join;this.name="browser",this.global=window,this.pathSep="/",this.global.jsio||(this.global.jsio=d),this.log=window.console&&console.log?!console.log.apply||/Android|iPhone|iPad|iPod/.test(navigator.userAgent)?function(){var e=i.call(arguments," ");return console.log(e),e}:function(){return console.log.apply(console,arguments),i.call(arguments," ")}:function(){return i.call(arguments," ")},this.getCwd=function(){var e,t;if(!b){e=window.location,t=e.pathname;b=e.protocol+"//"+e.host+t.substring(0,t.lastIndexOf("/")+1)}return b},this.getPath=function(){var e,t,n,r,i;if(!c){try{for(e=RegExp("(.*?)"+d.__filename+"(\\?.*)?$"),t=document.getElementsByTagName("script"),n=0;r=t[n];++n){i=r.src.match(e);if(i){c=i[1],/^[A-Za-z]*:\/\//.test(c)&&(c=h.makeRelativePath(c,this.getCwd()));break}}}catch(s){}c||(c=".")}return c},this.debugPath=function(e){return e};f="undefined"==typeof eval("(function(){})")?function(e){return(new Function("return "+e))()}:function(e,t){return window.eval(e+"\n//@ sourceURL="+t)};this.eval=function(t,n,r){try{return f(t,this.debugPath(n))}catch(i){throw i instanceof SyntaxError&&(e.log("a syntax error is preventing execution of "+n),S&&this.checkSyntax&&this.checkSyntax(r,n)),i}},this.checkSyntax=function(e,t){var n,r;try{n=d("import util.syntax",{suppressErrors:!0,dontExport:!0}),r=n(e);n.display(r,t)}catch(i){}},this.fetch=function(t){var n=new a;try{n.open("GET",t,!1),n.send(null)}catch(r){return e.log("e:",r),!1}return n.status==404||n.status==-1100?!1:n.responseText}}function O(e,t,n,r){var i,s,o,u;for(i=0,s=n.length;i<s;++i){o=n[i],u=d.__modules["preprocessors."+o];(p="function"==typeof o?o:u&&u.exports||d("import preprocessors."+o,{dontExport:!0,dontPreprocess:!0}))&&"function"==typeof p&&p(e,t,r)}}function Q(t,n){var r=n.src,i="(function(_){with(_){delete _;return function $$"+n.friendlyPath.replace(/[\:\\\/.-]/g,"_")+"(){"+r+"\n}}})";delete n.src;r=e.eval(i,n.path,r),r=r(t);r.call(t.exports)}function T(t,n,r,i){return t||(t={}),t.exports||(t.exports={}),t.jsio=h.bind(this,F,t,r.directory,r.filename),t.require=function(n,r){var i;r||(r={}),r.dontExport=!0;try{i=t.jsio(n,r);if(i===!1)throw"module failed to load";return i}catch(s){e.log("Error loading request "+n+":"),e.log(s)}},t.module={id:n,exports:t.exports},!i&&"base"!=n&&(t.jsio("from base import *",{dontPreprocess:!0}),t.logging.__create(n,t)),t.jsio.__jsio=d,t.jsio.__env=d.__env,t.jsio.__dir=r.directory,t.jsio.__filename=r.filename,t.jsio.path=s,t}function F(t,n,r,i,o){var t,n,r,o,u,a,f,l,c,p,v,m,g,y,b,w,E,S,x,N,C,k,A,M,_,D,P,H,B,I,q;for(o=o||{},n=n||"./",r=r||"<initial file>",t=o.exportInto||t||e.global,u=o,a=d.__cmds,f=[],l=!1,c=0;(p=a[c])&&!(l=p(t,i,u,f));++c);if(!0!==l)throw new("undefined"!=typeof SyntaxError?SyntaxError:Error)(""+(l||"invalid jsio command: jsio('"+i+"')"));u=f.length,a=1<u?{}:null;for(l=0;l<u;++l){c=f[l],v=c.from;p=d.__modules;try{e:{for(b=n,w=v,E=o,S=h.resolveModulePath(w,b),x=0,N=void 0;S[x];++x){C=S[x].path;if(!E.reload&&C in d.__modules){g=S[x];break e}C in R&&S.splice(x--,1)}if(!S.length){if(E.suppressErrors){g=!1;break e}k=Error("Module failed to load (again)");throw k.jsioLogged=!0,k}t:{for(M=S,_=void 0,D=0,P=void 0;P=M[D];++D){H=P.path,B=K[H];if(B){P.src=B.src,P.pre=!0,A=P;break t}_=e.fetch(H);if(!1!==_){P.src=_,A=P;break t}R[H]=!0}A=!1}if(!A){if(E.suppressErrors){g=!1;break e}y=[];for(x=0;N=S[x];++x)y.push(N.path);throw Error("requested import ("+w+") not found\n	looked in:\n		"+y.join("\n		")+"\n	Import Stack:\n		"+L.join("\n		"))}A.friendlyPath=w,A.baseMod&&!(A.baseMod in s.cache)&&(s.cache[A.baseMod]=A.basePath),"base"!=w&&(E.reload||!E.dontPreprocess&&!A.pre)&&(A.pre=!0,O(b,A,["import","cls"],E)),E.preprocessors&&O(b,A,E.preprocessors,E),g=A}}catch(j){y=j}if(g)m=g.path;else if(d.__env.require){m=v;try{p[m]={exports:d.__env.require(v)},y=null}catch(F){y||(y=F)}}else if(0==g)return!1;if(y){if(o.suppressErrors)return!1;throw y.jsioLogged||(e.log("\nError loading module:\n","	[[",i,"]]\n","	requested by:",n+r,"\n","	current directory:",d.__env.getCwd(),"\n","	"+y,"\n","	"+y.stack),y.jsioLogged=!0),y}g&&L.push(L.length+" : "+g.friendlyPath+" ("+g.path+")");if(!(m in p)){v=T(o.context,v,g,c.dontAddBase),p[m]=g,g.exports=v.exports;if(c.dontUseExports){w=[";(function(){"],I=1;for(q in c["import"])v.exports[q]=void 0,w[I++]="if(typeof "+q+'!="undefined"&&exports.'+q+"==undefined)exports."+q+"="+q+";";w[I]="})();",g.src+=w.join("")}Q(v,g),g.exports=v.exports}L.pop(),v=p[m].exports,1==u&&(a=v);if(!o.dontExport)if(c.as){c=c.as.match(/^\.*(.*?)\.*$/)[1],p=c.split("."),w=p.length-1,x=t;for(I=0;I<w;++I)if(N=p[I])x[N]||(x[N]={}),x=x[N];x[p[w]]=v,1<u&&(a[c]=v)}else if(c["import"])if(c["import"]["*"])for(I in p[m].exports)t[I]=v[I];else for(I in c["import"])t[c["import"][I]]=v[I]}return a}S=!0,M=Array.prototype.slice,N=/\/|\\$/;z.prototype.setBase=function(e,t){this.baseMod=e,this.basePath=t};h={bind:function(e,t){var n=M.call(arguments,2);return function(){return t="string"==typeof t?e[t]:t,t.apply(e,n.concat(M.call(arguments,0)))}},addEndSlash:function(e){return N.test(e)?e:e+"/"},removeEndSlash:function(e){return e.replace(N,"")},makeRelativePath:function(t,n){var r=n.length;if(t.substring(0,r)==n)return t.slice((t.charAt(r)==e.pathSep)+r);for(var r=h.removeEndSlash(t).split(e.pathSep),i=h.removeEndSlash(n).split(e.pathSep),s=0;r[s]==i[s];)++s;if(s){t=r.slice(s).join(e.pathSep);for(r=i.length-s;0<r;--r)t="../"+t}return t},buildPath:function(){var e=Array.prototype.filter.call(arguments,function(e){return e});return h.resolveRelativePath(e.join("/"))},resolveRelativePath:function(e){var t=e.match(/^(\w+:\/\/)(.*)$/);t&&(e=t[2]);for(e=e.replace(/\/+/g,"/").replace(/\/\.\//g,"/");e!=(e=e.replace(/(^|\/)(?!\.?\.\/)([^\/]+)\/\.\.\//g,"$1")););return t?t[1]+e:e},resolveRelativeModule:function(e,t){for(var n=[],r=e.split("."),i=r.length,s=1<i&&!r[0],o=s?0:-1;++o<i;)n.push(r[o]?r[o]:"..");return h.buildPath(s?t:"",n.join("/"))},resolveModulePath:function(e,t){if("."==e.charAt(0))return[I(h.resolveRelativeModule(e,t))];var n=e.split("."),r=n[0],n=n.join("/");if(s.cache.hasOwnProperty(r))return[I(h.buildPath(s.cache[r],n))];for(var i=[],o=s.get(),u=o.length,a=0;a<u;++a){var f=I(h.buildPath(o[a],n));f.setBase(r,o[a]),i.push(f)}return i},splitPath:function(e,t){t||(t={});var n=e.lastIndexOf("/")+1;return t.directory=e.substring(0,n),t.filename=e.substring(n),t}},d=h.bind(this,F,null,null,null);d.__util=h,d.__init__=E;d.setCache=function(e){K=d.__srcCache=e},d.setCache(x&&x.__srcCache||{}),d.setCachedSrc=function(e,t){K[e]={path:e,src:t}},d.getCachedSrc=function(e){return K[e]},d.__filename="jsio.js",d.__cmds=[],d.__jsio=d,d.__importer=F,d.__modules={preprocessors:{}};s={set:function(e){s.value="string"==typeof e?[e]:e},get:function(){return s.value.slice(0)},add:function(e){for(var t=s.value,n=t.length,r=0;r<n;++r)if(t[r]==e)return;t.push(e)},remove:function(e){for(var t=s.value,n=t.length,r=0;r<n;++r)t[r]==e&&t.splice(r,1)},value:[],cache:{}};d.path=s,d.addPath=h.bind(s,"add"),d.addCmd=h.bind(d.__cmds,"push"),d.setEnv=function(t){!t&&x?e=new x.__env.constructor(h):("string"==typeof t&&(t={node:D,browser:J}[t]||J),e=new t(h)),this.__env=e,this.__dir=e.getCwd(),this.path.set(e.getPath())},x?d.setEnv():"undefined"!=typeof process&&process.version?d.setEnv("node"):("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof ActiveXObject)&&d.setEnv("browser");R={},L=[];return d.addCmd(function(e,t,n,r){if(e=t.match(/^\s*(from|external)\s+([\w.$]+)\s+(import|grab)\s+(.*)$/))return r.push({from:e[2],dontAddBase:"external"==e[1],dontUseExports:"grab"==e[3]||"external"==e[1],"import":{}}),e[4].replace(/\s*([\w.$*]+)(?:\s+as\s+([\w.$]+))?/g,function(e,t,n){r[0]["import"][t]=n||t}),!0}),d.addCmd(function(e,t,n,r){if(e=t.match(/^\s*import\s+(.*)$/))return e[1].replace(/\s*([\w.$]+)(?:\s+as\s+([\w.$]+))?,?/g,function(e,t,n){r.push(n?{from:t,as:n}:{from:t,as:t})}),!0}),d.addCmd(function(e,t,n,r){if(e=t.match(/^\s*[\w.0-9$\/\-]+\s*$/))return e=h.resolveRelativePath(e[0]),t="."==e.charAt(0),e=e.replace(/\.\.\//g,".").replace(/\.\//g,"").replace(/\//g,"."),r[0]={from:(t?".":"")+e},!0}),d.install=function(){d("from base import *"),GLOBAL.logger=logging.get("jsiocore")},d.eval=function(t,n){var n=e.getCwd()||"/",r=new z(n);r.src=t,O(n,r,["import","cls"],{}),Q(e.global,r)},d.clone=h.bind(null,E,d),d}D=E(null,{});"undefined"!=typeof exports?module.exports=D:jsio=D})(),jsio.path.set(["sdk/jsio",".","sdk/gc/api/","sdk/","sdk/timestep/"]),jsio.path.cache={preprocessors:"sdk/jsio",base:"sdk/jsio",util:"sdk/jsio",gc:"sdk/",lib:"sdk/jsio",device:"sdk/timestep/",event:"sdk/timestep/",ui:"sdk/timestep/",platforms:"sdk/timestep/",std:"sdk/jsio",math:"sdk/jsio",timer:"sdk/timestep/",animate:"sdk/timestep/",AudioManager:"sdk/timestep/",src:"."},jsio.setCache({"sdk/jsio/base.js":{path:"sdk/jsio/base.js",friendlyPath:"base",directory:"sdk/jsio/",filename:"base.js",baseMod:"base",basePath:"sdk/jsio",src:'var SLICE,ErrorParentClass,logger;exports.log=jsio.__env.log,exports.GLOBAL=jsio.__env.global,Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Function.prototype.bind||(Function.prototype.bind=function(e){var t,n,r,i;if(typeof this!="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");t=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r?this:e,t.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i});SLICE=Array.prototype.slice;exports.isArray="function"==typeof Array.isArray?Array.isArray:function(e){return Object.prototype.toString.call(e)==="[object Array]"},exports.bind=function(e,t){var n;if(arguments.length>2){n=SLICE.call(arguments,2);return typeof t=="string"?function(){if(e[t])return e[t].apply(e,n.concat(SLICE.call(arguments,0)));throw logger.error("No method:",t,"for context",e)}:function(){return t.apply(e,n.concat(SLICE.call(arguments,0)))}}return typeof t=="string"?function(){if(e[t])return e[t].apply(e,arguments);throw logger.error("No method:",t,"for context",e)}:function(){return t.apply(e,arguments)}},exports.Class=function(e,t,n){return exports.__class__(function(){return this.init&&this.init.apply(this,arguments)},e,t,n)},exports.__class__=function(e,t,n,r){var s,o,u,a,i=function(){};typeof t!="string"&&(r=n,n=t,t=null),t&&(s=exports.logging.get(t));if(!n)throw Error("parent or prototype not provided");r||(r=n,n=null);if(n)if(exports.isArray(n)){i.prototype={};for(o=0;u=n[o];++o){u==Error&&ErrorParentClass&&(u=ErrorParentClass);for(a in u.prototype)a in i.prototype||(i.prototype[a]=u.prototype[a])}n=n[0]}else n==Error&&ErrorParentClass&&(n=ErrorParentClass),i.prototype=n.prototype;return o=n?function(e,t,r){var i=n.prototype[t];if(!i)throw Error("method "+t+" does not exist");return i.apply(e,r||[])}:null,u=e.prototype=new i,u.constructor=e,u.__parentClass__=n,t&&(u.__class__=t),r.call(u,s||o,s&&o),e};ErrorParentClass=exports.__class__(function(){var e=Error.prototype.constructor.apply(this,arguments),t;for(t in e)e.hasOwnProperty(t)&&(this[t]=e[t])},function(){});exports.Class.defaults=exports.merge=function(e){var e,n,r,i,s;for(e=e||{},n=1,r=arguments.length;n<r;++n){i=arguments[n];for(s in i)i.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(e[s]=i[s])}return e},exports.delay=function(e,t){var r,i,n=null,s=function(){e.apply(r,i)};return function(){r=this,i=arguments,n&&clearTimeout(n),n=setTimeout(s,t||0)}},exports.logging=function(){var i,e={DEBUG:1,LOG:2,INFO:3,WARN:4,ERROR:5,NONE:10},t={},n=!1,r="";e.setPrefix=function(e){r=e+" "},e.setProduction=function(e){n=!!e},e.get=function(e){return t.hasOwnProperty(e)?t[e]:t[e]=new i(e)},e.set=function(e,n){t[e]=n},e.getAll=function(){return t},e.__create=function(t,n){n.logger=e.get(t)};i=exports.__class__(function(t,n){this._name=t,this._level=n||e.LOG},function(){function t(e,t){return function(){if(!n&&e>=this._level){var i=t+" "+r+this._name,s=this._listener||exports.log;return s&&s.apply(this._listener,[i].concat(SLICE.call(arguments)))}return arguments[0]}}this.setLevel=function(e){this._level=e},this.setListener=function(e){this._listener=e},this.debug=t(e.DEBUG,"DEBUG"),this.log=t(e.LOG,"LOG"),this.info=t(e.INFO,"INFO"),this.warn=t(e.WARN,"WARN"),this.error=t(e.ERROR,"ERROR")});return e}();logger=exports.logging.get("jsiocore")'},"sdk/gc/browser/bootstrap/launchBrowser.js":{path:"sdk/gc/browser/bootstrap/launchBrowser.js",friendlyPath:"gc.browser.bootstrap.launchBrowser",directory:"sdk/gc/browser/bootstrap/",filename:"launchBrowser.js",baseMod:"gc",basePath:"sdk/",src:'var MAX_FPS,PAUSE_DURATION,FADE_DURATION,TEST_INVITE,delegate,callDelegate,controller,d,el,ctx,onResize,onHide;jsio("import .renderer"),jsio("import lib.Callback");MAX_FPS=15,PAUSE_DURATION=250,FADE_DURATION=500,TEST_INVITE=!1,callDelegate=function(e){if(delegate[e])return delegate[e].apply(delegate,Array.prototype.slice.call(arguments,1))},controller=CONFIG.splash||{},d=document,el=d.body.appendChild(d.createElement("canvas")),ctx=el.getContext&&el.getContext("2d");el.style.cssText="position:absolute; background:"+(controller.color||"black"),el.style.opacity=1,el.style.webkitTransition="opacity "+FADE_DURATION+"ms linear",el.style.zIndex=65534,el.onmousedown=el.ontouchstart=function(e){callDelegate("onTap",e),e.stopPropagation(),e.preventDefault()};onResize=function(){var e=window.innerWidth,t=window.innerHeight;if(el.width!=e||el.height!=t)el.width=e,el.height=t,el.style.width=e+"px",el.style.height=t+"px",renderer.setOpts(callDelegate,ctx,e,t),callDelegate("onResize"),renderer.render()};controller.render=function(){renderer.render()},controller.startTick=function(){this._interval=setInterval(bind(controller,"onTick"),1e3/MAX_FPS)},controller.onTick=function(){callDelegate("onTick"),this.render()},controller.show=function(){callDelegate("onBeforeShow"),onResize(),window.addEventListener("resize",onResize,!1),window.addEventListener("orientationchange",onResize,!1),d.body.appendChild(el),el.style.opacity?callDelegate("onShow"):(el.style.opacity=1,setTimeout(bind(this,callDelegate,"onShow"),FADE_DURATION))};onHide=new lib.Callback;controller.hide=function(e){onHide.run(e),callDelegate("onBeforeHide")||(onHide.fire(),onHide.reset(),setTimeout(bind(this,function(){el.style.opacity=0,setTimeout(bind(this,function(){window.removeEventListener("resize",onResize,!1),window.removeEventListener("orientationchange",onResize,!1),d.body.removeChild(el),this._interval&&clearInterval(this._interval),callDelegate("onHide")},FADE_DURATION))}),PAUSE_DURATION))},controller.onAppLoadError=function(e){callDelegate("onAppLoadError",e)},delegate={onLoad:function(){console.log("Init"),jsio("import device"),window.CACHE=IMG_CACHE,controller.show()},onShow:function(){jsio("import gc.API as GC"),GLOBAL.GC.buildApp("launchUI")}},window._continueLoad(),callDelegate("onLoad",controller),onResize()',pre:!0},"sdk/gc/browser/bootstrap/renderer.js":{path:"sdk/gc/browser/bootstrap/renderer.js",friendlyPath:".renderer",directory:"sdk/gc/browser/bootstrap/",filename:"renderer.js",src:'var Renderer=__class__;Renderer=Renderer(function(){return this.init&&this.init.apply(this,arguments)},function(){this.init=function(){this._views=[]},this.add=function(e){this._views.push(e),this.render()},this.setOpts=function(e,t,n,r){this._delegate=e,this._ctx=t,this.width=n,this.height=r,e=t.canvas,e.width=this.width,e.height=this.height},this.render=function(){var e=this._ctx;if(e){var t=e.canvas;e.clearRect(0,0,t.width,t.height),e.save();for(var t=0,n;n=this._views[t];++t)n.render(e);this._delegate("onRender",e),e.restore()}}});exports=new Renderer',pre:!0},"sdk/jsio/lib/Callback.js":{path:"sdk/jsio/lib/Callback.js",friendlyPath:"lib.Callback",directory:"sdk/jsio/lib/",filename:"Callback.js",baseMod:"lib",basePath:"sdk/jsio",src:'var sdk_jsio_lib_Callback=__class__;exports=sdk_jsio_lib_Callback(function(){return this.init&&this.init.apply(this,arguments)},function(){this._fired=!1,this._id=0,this._pending=null,this.init=function(){this._run=[]},this.hasFired=this.fired=function(){return this._fired},this.reset=function(){this._args=[],this._fired=!1},this.clear=function(){this.reset(),this._run=[],this._stat=this._pending=null},this.forward=function(e){this.run.apply(this,e)},this.run=function(e,t){var n=t?bind.apply(this,arguments):e;return n&&(this._fired?n.apply(this,this._args):this._run.push(n)),this},this.runOrTimeout=function(e,t,n){var r,i;if(e||t)if(this._fired)e.apply(this,this._args);else{r=bind(this,function(){clearTimeout(i),e.apply(this,this._args)});this.run(r);i=setTimeout(bind(this,function(){for(var e=0,n=this._run.length;e<n;++e)if(this._run[e]==r){this._run.splice(e,1);break}t()}),n)}},this.fire=function(){var e,t,n;if(!this._fired){this._fired=!0;e=this._run;this._args=arguments;for(t=0,n=e.length;t<n;++t)e[t]&&e[t].apply(this,arguments)}},this.chain=function(e){return this._pending||(this._pending={}),void 0===e&&(e=this._id++),this._pending[e]=!0,this.reset(),bind(this,"_deferred",e)},this._deferred=function(e){var t;this._stat||(this._stat={});if(!this._stat.hasOwnProperty(e)){this._stat[e]=Array.prototype.slice.call(arguments,1);t=this._pending;delete t[e];for(e in t)if(t.hasOwnProperty(e))return;this.fire(this._stat)}}})',pre:!0},"sdk/timestep/device.js":{path:"sdk/timestep/device.js",friendlyPath:"device",directory:"sdk/timestep/",filename:"device.js",baseMod:"device",basePath:"sdk/timestep/",src:'var ua,_devices,devicePixelRatio;jsio("import event.Emitter as Emitter");if("undefined"==typeof navigator||!navigator.userAgent)logger.warn("> Timestep was unable to determine your device! Please check that navigator.userAgent is defined."),exports={isUnknown:!0};ua=navigator.userAgent,_devices={};exports.registerDevice=function(e,t){_devices[e]=t},exports.get=function(e){return jsio("import "+(_devices[exports.name]||"platforms.browser")+"."+e,{dontExport:!0,suppressErrors:!0})},exports.importUI=function(e){return jsio("import ui.backend."+(exports.useDOM?"dom":"canvas")+"."+e,{dontExport:!0,suppressErrors:!0})},exports.isMobileNative=exports.isMobile=/TeaLeaf/.test(ua),logger.log(exports.isMobile?"on mobile device":"in web browser"),exports.screen=new Emitter;devicePixelRatio=window.devicePixelRatio||1;exports.devicePixelRatio=devicePixelRatio,exports.screen.devicePixelRatio=devicePixelRatio,exports.screen.width=window.screen.width*devicePixelRatio,exports.screen.height=window.screen.height*devicePixelRatio,exports.hideAddressBar=function(){},exports.defaultFontFamily="Helvetica",exports.events="ontouchstart"in window&&!/BlackBerry/.test(ua)?{start:"touchstart",move:"touchmove",end:"touchend"}:{start:"mousedown",move:"mousemove",end:"mouseup"},exports.isMobileBrowser=!1,exports.isUIWebView=!1,exports.isSafari=/Safari/.test(ua),exports.isMobile?(exports.name="tealeaf",exports.width=navigator.width,exports.height=navigator.height,exports.isAndroid=/Android/.test(ua),exports.isAndroid||(exports.isIPad=/iPad/.test(ua),exports.isIPhone=/iPhone/.test(ua),exports.isIOS=!0)):/(iPod|iPhone|iPad)/i.test(ua)?(exports.name="browser",exports.isMobileBrowser=!0,exports.isIOS=!0,exports.isUIWebView=!exports.isSafari,exports.screen.defaultOrientation="portrait",exports.screen.browserChrome={portrait:{top:20*devicePixelRatio,bottom:44*devicePixelRatio},landscape:{top:20*devicePixelRatio,bottom:32*devicePixelRatio}}):/Mobile Safari/.test(ua)||/Android/.test(ua)||/BlackBerry/.test(ua)?(exports.name="browser",exports.isMobileBrowser=!0,exports.isAndroid=!0,exports.screen.width=window.outerWidth,exports.screen.height=window.outerHeight-1,exports.screen.defaultOrientation="portrait",exports.screen.browserChrome={portrait:{top:0,bottom:0},landscape:{top:0,bottom:0}}):(exports.width=window.innerWidth,exports.height=window.innerHeight,exports.screen.width=window.innerWidth,exports.screen.height=window.innerHeight,exports.name="browser",exports.canResize=!1),exports.useDOM=!1,exports.setUseDOM=function(e){exports.useDOM!=e&&(exports.useDOM=e,jsio("import ui.View as View"),e=exports.importUI("ViewBacking"),View.setDefaultViewBacking(e))},exports.getDimensions=function(e){var t=Math.min(exports.width,exports.height),n=Math.max(exports.width,exports.height);return e?{height:t,width:n}:{height:n,width:t}},exports.init=function(){jsio("import ui.init"),exports.get("initialize").init(),exports.screen.width=exports.width,exports.screen.height=exports.height},exports.setBackButtonHandler=function(e){NATIVE.onBackButton=e},exports.setRotationHandler=function(e){NATIVE.onRotation=e},exports.collectGarbage=function(){logger.log("collecting garbage"),NATIVE.gc&&NATIVE.gc.runGC()},GLOBAL.ACCESSIBILITY=new(Class(Emitter,function(){this.muted=!1,this.mute=function(e){this.muted=e,this.publish("MuteChange")}})),GLOBAL.ONACCESSIBLE&&GLOBAL.ONACCESSIBLE()',pre:!0},"sdk/timestep/event/Emitter.js":{path:"sdk/timestep/event/Emitter.js",friendlyPath:"event.Emitter",directory:"sdk/timestep/event/",filename:"Emitter.js",baseMod:"event",basePath:"sdk/timestep/",src:'jsio("import lib.PubSub as exports")',pre:!0},"sdk/jsio/lib/PubSub.js":{path:"sdk/jsio/lib/PubSub.js",friendlyPath:"lib.PubSub",directory:"sdk/jsio/lib/",filename:"PubSub.js",src:'var ctx=jsio.__env.global,SLICE=Array.prototype.slice,sdk_jsio_lib_PubSub=__class__;exports=sdk_jsio_lib_PubSub(function(){return this.init&&this.init.apply(this,arguments)},function(){this.init=function(){},this.publish=function(e){var t,n,r,i,s;if(this._subscribers){t=SLICE.call(arguments,1);if(this._subscribers.__any)for(n=[e].concat(t),r=this._subscribers.__any.slice(0),i=0;s=r[i];++i)s.apply(ctx,n);if(!this._subscribers[e])return this;r=this._subscribers[e].slice(0);for(i=0;s=r[i];++i)s.apply(ctx,t)}return this},this.subscribe=function(e,t,n){var r,i;2==arguments.length?r=t:(r=bind.apply(GLOBAL,SLICE.call(arguments,1)),r._ctx=t,r._method=n);i=this._subscribers||(this._subscribers={});return(i[e]||(i[e]=[])).push(r),this},this.subscribeOnce=function(e,t,n){var r=arguments,i=bind(this,function(){this.unsubscribe(e,i),2==r.length?t.apply(GLOBAL,arguments):bind.apply(GLOBAL,SLICE.call(r,1)).apply(GLOBAL,arguments)});return 3===r.length&&(i._ctx=t,i._method=n),this.subscribe(e,i)},this.unsubscribe=function(e,t,n){var e,r,i;if(!this._subscribers||!this._subscribers[e])return this;for(e=this._subscribers[e],r=0;i=e[r];++r)(i==t||i._ctx==t&&(!n||i._method==n))&&e.splice(r--,1);return this},this.listeners=function(e){return this._subscribers=this._subscribers?this._subscribers:{},this.hasOwnProperty.call(this._subscribers,e)?this._subscribers[e]:this._subscribers[e]=[]},this.addListener=this.on=function(e,t){return this.listeners(e).length+1>this._maxListeners&&0!==this._maxListeners&&"undefined"!=typeof console&&console.warn("Possible EventEmitter memory leak detected. "+this._subscribers[e].length+" listeners added. Use emitter.setMaxListeners() to increase limit."),this.emit("newListener",e,t),this.subscribe(e,this,t)},this.once=function(e,t){return this.subscribeOnce(e,this,t)},this.removeListener=function(e,t){return this.unsubscribe(e,this,t),this},this.removeAllListeners=function(e){var t;if(this._subscribers)for(t in this._subscribers)(null==e||e==t)&&delete this._subscribers[t];return this},this.emit=function(e){return this.publish.apply(this,arguments),0<this.listeners(e).length},this._maxListeners=10,this.setMaxListeners=function(e){this._maxListeners=e},this.hasListeners=function(e){return this._subscribers&&this._subscribers[e]&&this._subscribers[e].length}})',pre:!0},"sdk/timestep/platforms/browser/doc.js":{path:"sdk/timestep/platforms/browser/doc.js",friendlyPath:".doc",directory:"sdk/timestep/platforms/browser/",filename:"doc.js",src:'var SCALING,defaultScalingMode,Document;jsio("import lib.PubSub"),jsio("import lib.Enum as Enum"),jsio("import std.js as JS"),jsio("from util.browser import $"),jsio("import device");SCALING=Enum("FIXED","RESIZE","MANUAL"),defaultScalingMode=device.isMobileBrowser||device.simulating?SCALING.RESIZE:SCALING.FIXED,Document=__class__,Document=Document(function(){return this.init&&this.init.apply(this,arguments)},lib.PubSub,function(){this.init=function(){if($){var e=GLOBAL.document;this._el=$({parent:e&&e.body,style:{position:"absolute",overflow:"hidden",width:"100%",height:"100%"}}),device.screen.subscribe("Resize",this,"onResize"),exports.postCreateHook&&exports.postCreateHook(this),this.setScalingMode(defaultScalingMode)}},this.unsubscribeResize=function(){device.screen.unsubscribe("Resize",this,"onResize")},this.setEngine=function(e){e!=this._engine&&(this._engine=e,this._canvas=this._engine.getCanvas(),this.appendChild(this._canvas),this._canvas.getContext&&(e=this._canvas.getContext(window.WebGLRenderingContext?"webgl":"2d"),e.setParentNode&&e.setParentNode(this._el)))},this.getElement=function(){return this._el},this.setScalingMode=function(e,t){this._scalingMode=e;var n=this._el.style;switch(e){case SCALING.FIXED:t=merge(t,{width:device.width,height:device.height}),n.width=t.width+"px",n.height=t.height+"px";break;case SCALING.RESIZE:t=merge(t,{resizeCanvas:!0});case SCALING.MANUAL:n.margin="0px",n.width="100%",n.height="100%"}this._scalingOpts=t,this.onResize(),setTimeout(bind(this,"onResize"),1e3)},this.onResize=function(){var e=this._el,t=this._el.style;e.className=device.screen.orientation,logger.log("resize",device.width,device.height);var n=device.width,r=device.height,i=this._scalingMode,s=this._scalingOpts;i==SCALING.FIXED&&(n=s.width,r=s.height),s.maxWidth&&n>s.maxWidth&&(n=s.maxWidth,i==SCALING.RESIZE&&(i=SCALING.FIXED)),s.maxHeight&&r>s.maxHeight&&(r=s.maxHeight,i==SCALING.RESIZE&&(i=SCALING.FIXED));switch(i){case SCALING.FIXED:e.style.top=Math.round(Math.max(0,(window.innerHeight-r)/2))+"px",e.style.left=Math.round(Math.max(0,(window.innerWidth-n)/2))+"px",t.width=n+"px",t.height=r+"px";break;case SCALING.RESIZE:s.resizeCanvas&&this._canvas&&(this._canvas.width!=n||this._canvas.height!=r)&&(this._canvas.width=n,this._canvas.height=r),t.width=n+"px",t.height=r+"px"}this._setDim(n,r),this._engine&&this._engine.render()},this._setDim=function(e,t){if(this.width!=e||this.height!=t)this.width=e,this.height=t,this.publish("Resize",e,t)},this.setColors=function(e,t){this._el&&(this._el.style.background=t,document.documentElement.style.background=document.body.style.background=e)},this.appendChild=function(e){this._el.appendChild(e)},this.getOffset=function(){return{x:this._el.offsetLeft,y:this._el.offsetTop}}});exports=new Document,exports.SCALING=SCALING,exports.setDocStyle=function(){var e=GLOBAL.document;e&&e.body&&(e={height:"100%",margin:"0px",padding:"0px"},$.style(document.documentElement,e),$.style(document.body,e))},exports.defaultParent=null,exports.postCreateHook=null',pre:!0},"sdk/jsio/lib/Enum.js":{path:"sdk/jsio/lib/Enum.js",friendlyPath:"lib.Enum",directory:"sdk/jsio/lib/",filename:"Enum.js",src:'exports=function(){var e,t,n,r;if(1==arguments.length){if("object"==typeof arguments[0]){e=arguments[0];for(t in e)e[t]in e||(e[e[t]]=t);return e}"string"!=typeof arguments[0]&&(n=arguments[0])}if(!n)n=arguments;e={},t=0;for(r=n.length;t<r;++t)n[t]&&(e[n[t]]=t+1),e[t+1]=n[t];return e}',pre:!0},"sdk/jsio/std/js.js":{path:"sdk/jsio/std/js.js",friendlyPath:"std.js",directory:"sdk/jsio/std/",filename:"js.js",baseMod:"std",basePath:"sdk/jsio",src:'var SLICE=Array.prototype.slice;exports.vargs=function(e,t){return SLICE.call(e,t||0)},exports.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},exports.shallowCopy=function(e){var t,n;if(exports.isArray(e))return e.slice(0);t={};for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},exports.merge=function(e){var e,n,r,i,s;for(e=e||{},n=1,r=arguments.length;n<r;++n){i=arguments[n];for(s in i)i.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(e[s]=i[s])}return e},exports.curry=function(e){var t=SLICE.call(arguments,1),n="string"==typeof e?function(){this[e].apply(ctx,t.concat(SLICE.call(arguments)))}:function(){e.apply(this,t.concat(SLICE.call(arguments)))};return n.curried=!0,n},exports.unbind=function(e){var t=SLICE.call(arguments,1),n="string"==typeof e?function(n){n[e].apply(n,t.concat(SLICE.call(arguments,1)))}:function(n){e.apply(n,t.concat(SLICE.call(arguments,1)))};return n.unbound=!0,n}',pre:!0},"sdk/jsio/util/browser.js":{path:"sdk/jsio/util/browser.js",friendlyPath:"util.browser",directory:"sdk/jsio/util/",filename:"browser.js",src:'var isWindow,singleId,$,DOM2,ieGetAlpha;if("browser"==jsio.__env.name){jsio("external .sizzle import Sizzle"),jsio("import math.geom.Rect");isWindow=function(e){return e&&!$.isElement(e)&&$.isElement(e.document)},singleId=/^#([\\w-]+)$/,$=exports.$=function(e,t){switch(typeof e){case"object":return $.isElement(e)?$.remove(e):$.isElement(e.document&&e.document.body)?$.size(e):$.create(e);case"string":return singleId.test(e)?$.id(e.substring(1),t):Sizzle.apply(GLOBAL,arguments)}},DOM2="object"==typeof HTMLElement;$.isElement=DOM2?function(e){return e&&e instanceof HTMLElement}:function(e){return e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},$.id=function(e,t){return"string"==typeof e?(t||window).document.getElementById(e):e},$.apply=function(e,t){var n,r,i;if(t.attrs)for(attr in t.attrs)e.setAttribute(attr,t.attrs[attr]);t.id&&(e.id=t.id),t.style&&$.style(e,t.style),t.src&&(e.src=t.src);if(t["class"]||t.className)e.className=t["class"]||t.className;n=t.parent||t.parentNode;n&&t.first?$.insertBefore(n,e,n.firstChild):t.before?$.insertBefore(t.before.parentNode||n,e,t.before):t.after?$.insertAfter(t.after.parentNode||n,e,t.after):n&&n.appendChild(e),"html"in t&&(e.innerHTML=t.html),"text"in t&&$.setText(e,t.text);if(t.children)for(n=t.children,r=0,i=n.length;r<i;++r)e.appendChild($.isElement(n[r])?n[r]:$(n[r]));return e},$.insertBefore=function(e,t,n){e&&t&&(n&&n.parentNode==e?e.insertBefore(t,n):e.appendChild(t))},$.insertAfter=function(e,t,n){e&&t&&(!n||n.parentNode!=e?$.insertBefore(e,t,e.firstChild):n.nextSibling?e.insertBefore(t,n.nextSibling):e.appendChild(t))},$.create=function(e){var t=(e&&e.win||window).document;return!e||"string"==typeof e?t.createElement(e||"div"):$.apply(e.el||t.createElement(e.tag||e.tagName||"div"),e)},$.show=function(e,t){$.id(e).style.display=t||"block"},$.hide=function(e){$.id(e).style.display="none"},$.addClass=function(e,t){var n,r,i,s;if(e){e=$.id(e),"string"==typeof t&&(t=t.split(" "));for(n=" "+e.className+" ",r=0,i=t.length;r<i;++r){s=t[r];-1==n.indexOf(" "+s+" ")&&(n+=s+" ")}return e.className=n.replace(/^\\s+|\\s+$/g,""),$}},$.getTag=function(e,t){return e.getElementsByTagName(t)},$.removeClass=function(e,t){e&&(e=$.id(e),e.className=(" "+e.className+" ").replace(" ","  ").replace(RegExp("( "+t.replace("s+"," | ").replace("-","-")+" )","g")," ").replace(/\\s+/," ").replace(/^\\s+|\\s+$/g,""))};ieGetAlpha=function(e){try{return e.filters.item("alpha")}catch(t){}try{return e.filters.item("progid:DXImageTransform.Microsoft.Alpha")}catch(n){}return null};$.style=function(e,t){var n,r,i;if(e instanceof Array)for(n=0;r=e[n];++n)$.style(r,t);else for(prop in e=$.id(e),n=e.style,t)switch(prop){case"styleFloat":case"cssFloat":case"float":n.styleFloat=n.cssFloat=t[prop];break;case"opacity":n.opacity=t[prop];if(e.filters)try{r=ieGetAlpha();i=1==t[prop]?99.99:100*t[prop];r?r.Opacity=i:n.filter="alpha(opacity="+i+")"}catch(s){}break;case"borderRadius":n.borderRadius=n.MozBorderRadius=t[prop];break;case"boxSizing":n.MsBoxSizing=n.MozBoxSizing=n.WebkitBoxSizing=t[prop];default:n[prop]=t[prop]}},$.onEvent=function(e,t,n){var e,r;"function"!=typeof n&&(n=bind.apply(GLOBAL,Array.prototype.slice.call(arguments,2)));r=n,e=$.id(e);return e.addEventListener?e.addEventListener(t,r,!1):(r=function(e){n(e||window.event)},e.attachEvent("on"+t,r)),bind($,"removeEvent",e,t,r)},$.removeEvent=function(e,t,n){e=$.id(e),e.addEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},$.stopEvent=function(e){e&&(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault())},$.setText=function(e,t){e=$.id(e),t=""+t,"textContent"in e?e.textContent=t:"innerText"in e?e.innerText=t.replace(/\\n/g," "):(e.innerHTML="",e.appendChild(document.createTextNode(t)))},$.setValue=function(e,t){e=$.id(e),"value"in e?e.value=t:"value"in e.firstChild&&(e.firstChild.value=t)},$.remove=function(e){(e=$.id(e))&&e.parentNode&&e.parentNode.removeChild(e)},$.cursorPos=function(e,t){var n=$.pos(t);return n.top=e.clientY-n.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop),n.left=e.clientX-n.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft),n},$.pos=function(e){var t;for(t={top:0,left:0};e&&e!=document.body;){t.left+=e.offsetLeft;for(t.top+=e.offsetTop;e.offsetParent!=e.parentNode;)t.top-=e.scrollTop,t.left-=e.scrollLeft,e=e.parentNode;e=e.offsetParent}return t},$.size=function(e){var t;if($.isElement(e))return{width:e.offsetWidth,height:e.offsetHeight};if(e.document){t=e.document.documentElement||e.document.body;return new math.geom.Rect(t.offsetTop,t.offsetLeft,e.innerWidth||t.clientWidth||t.clientWidth,e.innerHeight||t.clientHeight||t.clientHeight)}},$.insertCSSFile=function(e){document.getElementsByTagName("head")[0].appendChild($({tag:"link",attrs:{rel:"stylesheet",type:"text/css",href:e}}))}}',pre:!0},"sdk/jsio/util/sizzle.js":{path:"sdk/jsio/util/sizzle.js",friendlyPath:".sizzle",directory:"sdk/jsio/util/",filename:"sizzle.js",src:'Sizzle=function(){var n,r,i,s,o,u,a,f,l,h,p,d,v;function e(e,t,n,r,i,s){var i,o,u,a,f;for(i="previousSibling"==e&&!s,o=0,u=r.length;o<u;o++){a=r[o];if(a){i&&1===a.nodeType&&(a.sizcache=n,a.sizset=o);for(a=a[e],f=!1;a;){if(a.sizcache===n){f=r[a.sizset];break}1===a.nodeType&&!s&&(a.sizcache=n,a.sizset=o);if(a.nodeName===t){f=a;break}a=a[e]}r[o]=f}}}function t(e,t,n,r,i,s){var i,u,a,f,l;for(i="previousSibling"==e&&!s,u=0,a=r.length;u<a;u++){f=r[u];if(f){i&&1===f.nodeType&&(f.sizcache=n,f.sizset=u);for(f=f[e],l=!1;f;){if(f.sizcache===n){l=r[f.sizset];break}if(1===f.nodeType)if(s||(f.sizcache=n,f.sizset=u),"string"!=typeof t){if(f===t){l=!0;break}}else if(0<o.filter(t,[f]).length){l=f;break}f=f[e]}r[u]=l}}}n=/((?:\\((?:\\([^()]+\\)|[^()]+)+\\)|\\[(?:\\[[^[\\]]*\\]|[\'"][^\'"]*[\'"]|[^[\\]\'"]+)+\\]|\\\\.|[^ >+~,(\\[\\\\]+)+|[>+~])(\\s*,\\s*)?/g,r=0,i=Object.prototype.toString,s=!1,o=function(e,t,r,s){var r=r||[],f=t=t||document;if(1!==t.nodeType&&9!==t.nodeType)return[];if(!e||"string"!=typeof e)return r;var c=[],h,m,g,b,w=!0,E=d(t);for(n.lastIndex=0;null!==(h=n.exec(e));)if(c.push(h[1]),h[2]){b=RegExp.rightContext;break}if(1<c.length&&a.exec(e))if(2===c.length&&u.relative[c[0]])m=v(c[0]+c[1],t);else for(m=u.relative[c[0]]?[t]:o(c.shift(),t);c.length;)e=c.shift(),u.relative[e]&&(e+=c.shift()),m=v(e,m);else if(!s&&1<c.length&&9===t.nodeType&&!E&&u.match.ID.test(c[0])&&!u.match.ID.test(c[c.length-1])&&(h=o.find(c.shift(),t,E),t=h.expr?o.filter(h.expr,h.set)[0]:h.set[0]),t){h=s?{expr:c.pop(),set:l(s)}:o.find(c.pop(),1!==c.length||"~"!==c[0]&&"+"!==c[0]||!t.parentNode?t:t.parentNode,E),m=h.expr?o.filter(h.expr,h.set):h.set;for(0<c.length?g=l(m):w=!1;c.length;){var S=c.pop();h=S,u.relative[S]?h=c.pop():S="",null==h&&(h=t),u.relative[S](g,h,E)}}else g=[];g||(g=m);if(!g)throw"Syntax error, unrecognized expression: "+(S||e);if("[object Array]"===i.call(g))if(w)if(t&&1===t.nodeType)for(e=0;null!=g[e];e++)g[e]&&(!0===g[e]||1===g[e].nodeType&&p(t,g[e]))&&r.push(m[e]);else for(e=0;null!=g[e];e++)g[e]&&1===g[e].nodeType&&r.push(m[e]);else r.push.apply(r,g);else l(g,r);return b&&(o(b,f,r,s),o.uniqueSort(r)),r};o.uniqueSort=function(e){var t;if(h&&(s=!1,e.sort(h),s))for(t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1)},o.matches=function(e,t){return o(e,null,null,t)},o.find=function(e,t,n){var r,i,s,o,a,f;if(!e)return[];for(s=0,o=u.order.length;s<o;s++){a=u.order[s];if(i=u.match[a].exec(e)){f=RegExp.leftContext;if("\\\\"!==f.substr(f.length-1)&&(i[1]=(i[1]||"").replace(/\\\\/g,""),r=u.find[a](i,t,n),null!=r)){e=e.replace(u.match[a],"");break}}}return r||(r=t.getElementsByTagName("*")),{set:r,expr:e}},o.filter=function(e,t,n,r){var i,s,o,a,f,l,c,h,p,v,m,g;for(i=e,s=[],o=t,l=t&&t[0]&&d(t[0]);e&&t.length;){for(c in u.filter)if(null!=(a=u.match[c].exec(e))){h=u.filter[c];f=!1,o==s&&(s=[]);if(u.preFilter[c])if(a=u.preFilter[c](a,o,n,s,r,l)){if(!0===a)continue}else f=p=!0;if(a)for(m=0;null!=(v=o[m]);m++)if(v){p=h(v,a,m,o);g=r^!!p;n&&null!=p?g?f=!0:o[m]=!1:g&&(s.push(v),f=!0)}if(void 0!==p){n||(o=s),e=e.replace(u.match[c],"");if(!f)return[];break}}if(e==i){if(null==f)throw"Syntax error, unrecognized expression: "+e;break}i=e}return o};u=o.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\\w\\u00c0-\\uFFFF_-]|\\\\.)+)/,CLASS:/\\.((?:[\\w\\u00c0-\\uFFFF_-]|\\\\.)+)/,NAME:/\\[name=[\'"]*((?:[\\w\\u00c0-\\uFFFF_-]|\\\\.)+)[\'"]*\\]/,ATTR:/\\[\\s*((?:[\\w\\u00c0-\\uFFFF_-]|\\\\.)+)\\s*(?:(\\S?=)\\s*([\'"]*)(.*?)\\3|)\\s*\\]/,TAG:/^((?:[\\w\\u00c0-\\uFFFF\\*_-]|\\\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\\((even|odd|[\\dn+-]*)\\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\\((\\d*)\\))?(?=[^-]|$)/,PSEUDO:/:((?:[\\w\\u00c0-\\uFFFF_-]|\\\\.)+)(?:\\(([\'"]*)((?:\\([^\\)]+\\)|[^\\2\\(\\)]*)+)\\2\\))?/},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")}},relative:{"+":function(e,t,n){var r="string"==typeof t,i=r&&!/\\W/.test(t),r=r&&!i;i&&!n&&(t=t.toUpperCase());for(var n=0,i=e.length,s;n<i;n++)if(s=e[n]){for(;(s=s.previousSibling)&&1!==s.nodeType;);e[n]=r||s&&s.nodeName===t?s||!1:s===t}r&&o.filter(t,e,!0)},">":function(e,t,n){var r="string"==typeof t;if(r&&!/\\W/.test(t))for(var t=n?t:t.toUpperCase(),n=0,i=e.length;n<i;n++){var s=e[n];s&&(r=s.parentNode,e[n]=r.nodeName===t?r:!1)}else{n=0;for(i=e.length;n<i;n++)(s=e[n])&&(e[n]=r?s.parentNode:s.parentNode===t);r&&o.filter(t,e,!0)}},"":function(n,i,s){var o=r++,u=t;if(!/\\W/.test(i))var a=i=s?i:i.toUpperCase(),u=e;u("parentNode",i,o,n,a,s)},"~":function(n,i,s){var o=r++,u=t;if("string"==typeof i&&!/\\W/.test(i))var a=i=s?i:i.toUpperCase(),u=e;u("previousSibling",i,o,n,a,s)}},find:{ID:function(e,t,n){if("undefined"!=typeof t.getElementById&&!n)return(e=t.getElementById(e[1]))?[e]:[]},NAME:function(e,t){if("undefined"!=typeof t.getElementsByName){for(var n=[],r=t.getElementsByName(e[1]),i=0,s=r.length;i<s;i++)r[i].getAttribute("name")===e[1]&&n.push(r[i]);return 0===n.length?null:n}},TAG:function(e,t){return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(e,t,n,r,i,s){e=" "+e[1].replace(/\\\\/g,"")+" ";if(s)return e;for(var s=0,o;null!=(o=t[s]);s++)o&&(i^(o.className&&0<=(" "+o.className+" ").indexOf(e))?n||r.push(o):n&&(t[s]=!1));return!1},ID:function(e){return e[1].replace(/\\\\/g,"")},TAG:function(e,t){for(var n=0;!1===t[n];n++);return t[n]&&d(t[n])?e[1]:e[1].toUpperCase()},CHILD:function(e){if("nth"==e[1]){var t=/(-?)(\\d*)n((?:\\+|-)?\\d*)/.exec("even"==e[2]&&"2n"||"odd"==e[2]&&"2n+1"||!/\\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}return e[0]=r++,e},ATTR:function(e,t,n,r,i,s){return t=e[1].replace(/\\\\/g,""),!s&&u.attrMap[t]&&(e[1]=u.attrMap[t]),"~="===e[2]&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(e,t,r,i,s){if("not"===e[1]){if(!(1<n.exec(e[3]).length||/^\\w/.test(e[3])))return e=o.filter(e[3],t,r,1^s),r||i.push.apply(i,e),!1;e[3]=o(e[3],null,null,t)}else if(u.match.POS.test(e[0])||u.match.CHILD.test(e[0]))return!0;return e},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return!1===e.disabled&&"hidden"!==e.type},disabled:function(e){return!0===e.disabled},checked:function(e){return!0===e.checked},selected:function(e){return e.parentNode.selectedIndex,!0===e.selected},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!o(n[3],e).length},header:function(e){return/h\\d/i.test(e.nodeName)},text:function(e){return"text"===e.type},radio:function(e){return"radio"===e.type},checkbox:function(e){return"checkbox"===e.type},file:function(e){return"file"===e.type},password:function(e){return"password"===e.type},submit:function(e){return"submit"===e.type},image:function(e){return"image"===e.type},reset:function(e){return"reset"===e.type},button:function(e){return"button"===e.type||"BUTTON"===e.nodeName.toUpperCase()},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)}},setFilters:{first:function(e,t){return 0===t},last:function(e,t,n,r){return t===r.length-1},even:function(e,t){return 0===t%2},odd:function(e,t){return 1===t%2},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0==t},eq:function(e,t,n){return n[3]-0==t}},filter:{PSEUDO:function(e,t,n,r){var i=t[1],s=u.filters[i];if(s)return s(e,n,t,r);if("contains"===i)return 0<=(e.textContent||e.innerText||"").indexOf(t[3]);if("not"===i){t=t[3],n=0;for(r=t.length;n<r;n++)if(t[n]===e)return!1;return!0}},CHILD:function(e,t){var n=t[1],r=e;switch(n){case"only":case"first":for(;r=r.previousSibling;)if(1===r.nodeType)return!1;if("first"==n)return!0;r=e;case"last":for(;r=r.nextSibling;)if(1===r.nodeType)return!1;return!0;case"nth":var n=t[2],i=t[3];if(1==n&&0==i)return!0;var s=t[0],o=e.parentNode;if(o&&(o.sizcache!==s||!e.nodeIndex)){for(var u=0,r=o.firstChild;r;r=r.nextSibling)1===r.nodeType&&(r.nodeIndex=++u);o.sizcache=s}return r=e.nodeIndex-i,0==n?0==r:0==r%n&&0<=r/n}},ID:function(e,t){return 1===e.nodeType&&e.getAttribute("id")===t},TAG:function(e,t){return"*"===t&&1===e.nodeType||e.nodeName===t},CLASS:function(e,t){return-1<(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)},ATTR:function(e,t){var n=t[1],n=u.attrHandle[n]?u.attrHandle[n](e):null!=e[n]?e[n]:e.getAttribute(n),r=n+"",i=t[2],s=t[4];return null==n?"!="===i:"="===i?r===s:"*="===i?0<=r.indexOf(s):"~="===i?0<=(" "+r+" ").indexOf(s):s?"!="===i?r!=s:"^="===i?0===r.indexOf(s):"$="===i?r.substr(r.length-s.length)===s:"|="===i?r===s||r.substr(0,s.length+1)===s+"-":!1:r&&!1!==n},POS:function(e,t,n,r){var i=u.setFilters[t[2]];if(i)return i(e,n,t,r)}}},a=u.match.POS;for(f in u.match)u.match[f]=RegExp(u.match[f].source+/(?![^\\[]*\\])(?![^\\(]*\\))/.source);l=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(document.documentElement.childNodes,0)}catch(c){l=function(e,t){var r,s,n=t||[];if("[object Array]"===i.call(e))Array.prototype.push.apply(n,e);else if("number"==typeof e.length)for(r=0,s=e.length;r<s;r++)n.push(e[r]);else for(r=0;e[r];r++)n.push(e[r]);return n}}document.documentElement.compareDocumentPosition?h=function(e,t){var n=e.compareDocumentPosition(t)&4?-1:e===t?0:1;return 0===n&&(s=!0),n}:"sourceIndex"in document.documentElement?h=function(e,t){var n=e.sourceIndex-t.sourceIndex;return 0===n&&(s=!0),n}:document.createRange&&(h=function(e,t){var n=e.ownerDocument.createRange(),r=t.ownerDocument.createRange();return n.selectNode(e),n.collapse(!0),r.selectNode(t),r.collapse(!0),n=n.compareBoundaryPoints(Range.START_TO_END,r),0===n&&(s=!0),n}),function(){var n,e=document.createElement("div"),t="script"+(new Date).getTime();e.innerHTML="<a name=\'"+t+"\'/>";n=document.documentElement;n.insertBefore(e,n.firstChild),document.getElementById(t)&&(u.find.ID=function(e,t,n){if("undefined"!=typeof t.getElementById&&!n)return(t=t.getElementById(e[1]))?t.id===e[1]||"undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id").nodeValue===e[1]?[t]:void 0:[]},u.filter.ID=function(e,t){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return 1===e.nodeType&&n&&n.nodeValue===t}),n.removeChild(e),n=e=null}(),function(){var e=document.createElement("div");e.appendChild(document.createComment("")),0<e.getElementsByTagName("*").length&&(u.find.TAG=function(e,t){var r,i,n=t.getElementsByTagName(e[1]);if("*"===e[1]){for(r=[],i=0;n[i];i++)1===n[i].nodeType&&r.push(n[i]);n=r}return n}),e.innerHTML="<a href=\'#\'></a>",e.firstChild&&"undefined"!=typeof e.firstChild.getAttribute&&"#"!==e.firstChild.getAttribute("href")&&(u.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),document.querySelectorAll&&function(){var n,e=o,t=document.createElement("div");t.innerHTML="<p class=\'TEST\'></p>";if(!t.querySelectorAll||0!==t.querySelectorAll(".TEST").length){o=function(t,n,r,i){n=n||document;if(!i&&9===n.nodeType&&!d(n))try{return l(n.querySelectorAll(t),r)}catch(s){}return e(t,n,r,i)};for(n in e)o[n]=e[n];t=null}}(),document.getElementsByClassName&&document.documentElement.getElementsByClassName&&function(){var e=document.createElement("div");e.innerHTML="<div class=\'test e\'></div><div class=\'test\'></div>",0!==e.getElementsByClassName("e").length&&(e.lastChild.className="e",1!==e.getElementsByClassName("e").length&&(u.order.splice(1,0,"CLASS"),u.find.CLASS=function(e,t,n){if("undefined"!=typeof t.getElementsByClassName&&!n)return t.getElementsByClassName(e[1])},e=null))}();p=document.compareDocumentPosition?function(e,t){return e.compareDocumentPosition(t)&16}:function(e,t){return e!==t&&(e.contains?e.contains(t):!0)},d=function(e){return 9===e.nodeType&&"HTML"!==e.documentElement.nodeName||!!e.ownerDocument&&"HTML"!==e.ownerDocument.documentElement.nodeName},v=function(e,t){for(var n=[],r="",i,s=t.nodeType?[t]:t;i=u.match.PSEUDO.exec(e);)r+=i[0],e=e.replace(u.match.PSEUDO,"");e=u.relative[e]?e+"*":e,i=0;for(var a=s.length;i<a;i++)o(e,s[i],n);return o.filter(r,n)};return o}()',pre:!0},"sdk/jsio/math/geom/Rect.js":{path:"sdk/jsio/math/geom/Rect.js",friendlyPath:"math.geom.Rect",directory:"sdk/jsio/math/geom/",filename:"Rect.js",baseMod:"math",basePath:"sdk/jsio",src:'var sdk_jsio_math_geom_Rect,Rect,SIDES,CORNERS;jsio("import lib.Enum"),jsio("import .Point"),jsio("import .Line"),jsio("import .intersect");sdk_jsio_math_geom_Rect=__class__,Rect=exports=sdk_jsio_math_geom_Rect(function(){return this.init&&this.init.apply(this,arguments)},function(){this.init=function(e,t,n,r){switch(arguments.length){case 0:this.width=this.height=this.x=this.y=0;break;case 1:this.width=e.width,this.height=e.height,this.x=e.x,this.y=e.y;break;case 2:this.x=e.x,this.y=e.y,this.width=t.x,this.height=t.y;break;case 3:this.x=e.x,this.y=e.y,this.width=t,this.height=n;break;case 4:this.x=e,this.y=t,this.width=n,this.height=r}},this.normalize=function(){return 0>this.width&&(this.x-=this.width,this.width=-this.width),0>this.height&&(this.y-=this.height,this.height=-this.height),this},this.intersectRect=function(e){if(intersect.isRectAndRect(this,e)){var t=this.y,n=this.x+this.width,r=this.y+this.height;this.x=Math.max(this.x,e.x),this.y=Math.max(t,e.y),this.width=Math.min(n,e.x+e.width)-this.x,this.height=Math.min(r,e.y+e.height)-this.y}else this.height=this.width=0},this.unionRect=function(e){this.normalize(),e.normalize&&e.normalize();var t=this.x+this.width,n=this.y+this.height,r=e.x+e.width,i=e.y+e.height;this.x=this.x<e.x?this.x:e.x,this.y=this.y<e.y?this.y:e.y,this.width=(t>r?t:r)-this.x,this.height=(n>i?n:i)-this.y},this.getCorner=function(e){switch(e){case CORNERS.TOP_LEFT:return new Point(this.x,this.y);case CORNERS.TOP_RIGHT:return new Point(this.x+this.width,this.y);case CORNERS.BOTTOM_LEFT:return new Point(this.x,this.y+this.height);case CORNERS.BOTTOM_RIGHT:return new Point(this.x+this.width,this.y+this.height)}},this.getSide=function(e){switch(e){case SIDES.TOP:return new Line(this.getCorner(CORNERS.TOP_LEFT),this.getCorner(CORNERS.TOP_RIGHT));case SIDES.RIGHT:return new Line(this.getCorner(CORNERS.TOP_RIGHT),this.getCorner(CORNERS.BOTTOM_RIGHT));case SIDES.BOTTOM:return new Line(this.getCorner(CORNERS.BOTTOM_RIGHT),this.getCorner(CORNERS.BOTTOM_LEFT));case SIDES.LEFT:return new Line(this.getCorner(CORNERS.BOTTOM_LEFT),this.getCorner(CORNERS.TOP_LEFT))}},this.getCenter=function(){return new Point(this.x+this.width/2,this.y+this.height/2)}}),SIDES=Rect.SIDES=lib.Enum("TOP","BOTTOM","LEFT","RIGHT"),CORNERS=Rect.CORNERS=lib.Enum("TOP_LEFT","TOP_RIGHT","BOTTOM_RIGHT","BOTTOM_LEFT")',pre:!0},"sdk/jsio/math/geom/Point.js":{path:"sdk/jsio/math/geom/Point.js",friendlyPath:".Point",directory:"sdk/jsio/math/geom/",filename:"Point.js",src:'var sdk_jsio_math_geom_Point=__class__,Point=exports=sdk_jsio_math_geom_Point(function(){return this.init&&this.init.apply(this,arguments)},function(){this.init=function(e,t){switch(arguments.length){case 0:this.y=this.x=0;break;case 1:this.x=e.x||0,this.y=e.y||0;break;case 2:this.x=e||0,this.y=t||0}},this.rotate=function(e){var t=this.x,n=this.y,r=Math.cos(e),e=Math.sin(e);return this.x=t*r-n*e,this.y=t*e+n*r,this},this.translate=this.add=function(e,t){return"number"==typeof e?(this.x+=e,this.y+=t):(this.x+=e.x,this.y+=e.y),this},this.subtract=function(e,t){return"number"==typeof e?(this.x-=e,this.y-=t):(this.x-=e.x,this.y-=e.y),this},this.scale=function(e,t){return void 0===t&&(t=e),this.x*=e,this.y*=t,this},this.setMagnitude=function(e){var t=this.getAngle();return this.x=e*Math.cos(t),this.y=e*Math.sin(t),this},this.normalize=function(){var e=this.getMagnitude();return this.x/=e,this.y/=e,this},this.addMagnitude=function(e){return this.setMagnitude(this.getMagnitude()+e)},this.getMagnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},this.getSquaredMagnitude=function(){return this.x*this.x+this.y*this.y},this.getDirection=this.getAngle=function(){return Math.atan2(this.y,this.x)}});Point.getPolarR=function(){throw"notImplemented"},Point.getPolarTheta=function(e,t){var n=Math.atan2(t,e)+2*Math.PI;return n>2*Math.PI?n%(2*Math.PI):n},Point.add=Point.translate=function(e,t,n,r){switch(arguments.length){case 2:return(new Point(e)).add(t);case 3:return(new Point(e)).add(t,n);case 4:return(new Point(e,t)).add(n,r)}},Point.subtract=function(e,t,n,r){switch(arguments.length){case 2:return(new Point(e)).subtract(t);case 3:return(new Point(e)).subtract(t,n);case 4:return(new Point(e,t)).subtract(n,r)}},Point.scale=function(e,t,n){switch(arguments.length){case 2:return(new Point(e)).scale(t);case 3:return(new Point(e,t)).scale(n)}},Point.setMagnitude=function(e,t,n){switch(arguments.length){case 2:return(new Point(e)).setMagnitude(n);case 3:return(new Point(e,t)).setMagnitude(n)}},Point.addMagnitude=function(e,t,n){switch(arguments.length){case 2:pt=new Point(e);break;case 3:pt=new Point(e,t),t=n}return pt.addMagnitude(t)},Point.getMagnitude=function(e,t){return(new Point(e,t)).getMagnitude()},Point.rotate=function(e,t,n){switch(arguments.length){case 2:return(new Point(e)).rotate(t);case 3:return(new Point(e,t)).rotate(n)}}',pre:!0},"sdk/jsio/math/geom/Line.js":{path:"sdk/jsio/math/geom/Line.js",friendlyPath:".Line",directory:"sdk/jsio/math/geom/",filename:"Line.js",src:'var sdk_jsio_math_geom_Line;jsio("import .Point");sdk_jsio_math_geom_Line=__class__;exports=sdk_jsio_math_geom_Line(function(){return this.init&&this.init.apply(this,arguments)},function(){this.init=function(e,t,n,r){switch(arguments.length){case 0:this.start=new Point,this.end=new Point;break;case 1:this.start=new Point(e.start),this.end=new Point(e.end);break;case 2:this.start=new Point(e),this.end=new Point(t);break;case 3:this.start=new Point(e),this.end=new Point(t,n);break;default:this.start=new Point(e,t),this.end=new Point(n,r)}},this.getMagnitude=this.getLength=function(){var e=this.end.x-this.start.x,t=this.end.y-this.start.y;return Math.sqrt(e*e+t*t)}})',pre:!0},"sdk/jsio/math/geom/intersect.js":{path:"sdk/jsio/math/geom/intersect.js",friendlyPath:".intersect",directory:"sdk/jsio/math/geom/",filename:"intersect.js",src:'var intersect;jsio("import .Point"),jsio("import .Line"),jsio("import .Rect");intersect=exports;intersect.pointAndRect=intersect.ptAndRect=function(e,t){var n=e.x,r=e.y;return n>=t.x&&n<=t.x+t.width&&r>=t.y&&r<=t.y+t.height},intersect.rectAndPoint=intersect.rectAndPt=function(e,t){return intersect.pointAndRect(t,e)},intersect.pointAndCircle=intersect.ptAndCirc=function(e,t){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r<t.radius*t.radius},intersect.circleAndPoint=intersect.circAndPt=function(e,t){return intersect.pointAndCircle(t,e)},intersect.isRectAndRect=function(e,t){return!(e.y+e.height<t.y||t.y+t.height<e.y||e.x+e.width<t.x||t.x+t.width<e.x)},intersect.circleAndRect=function(e,t){return intersect.pointAndRect(e,t)?!0:intersect.lineAndCircle(t.getSide(1),e)||intersect.lineAndCircle(t.getSide(2),e)||intersect.lineAndCircle(t.getSide(3),e)||intersect.lineAndCircle(t.getSide(4),e)},intersect.rectAndCircle=function(e,t){return intersect.circleAndRect(t,e)},intersect.lineAndCircle=function(e,t){return intersect.pointToLine(t,e).getMagnitude()<t.radius},intersect.circleAndLine=function(e,t){return intersect.lineAndCircle(t,e)},intersect.pointToLine=intersect.ptToLine=function(e,t){var n=t.end.x-t.start.x,r=t.end.y-t.start.y,i=((e.x-t.start.x)*n+(e.y-t.start.y)*r)/(n*n+r*r);n=0>i?new Point(t.start):1<i?new Point(t.end):new Point(t.start.x+i*n,t.start.y+i*r);return new Line(n,e)},intersect.rectAndRect=function(e,t){return jsio("import .Rect"),(intersect.rectAndRect=function(e,t){var n,r,i,s;if(!0===e||!0===t)return new Rect(t);if(intersect.isRectAndRect(e,t)){n=Math.max(e.x,t.x),r=Math.max(e.y,t.y),i=Math.min(e.x+e.width,t.x+t.width),s=Math.min(e.y+e.height,t.y+t.height);return new Rect(n,r,i-n,s-r)}return null})(e,t)}',pre:!0},"sdk/timestep/platforms/browser/Audio.js":{path:"sdk/timestep/platforms/browser/Audio.js",friendlyPath:".Audio",directory:"sdk/timestep/platforms/browser/",filename:"Audio.js",src:'exports=function(e){var e=merge(e,{autoplay:!1,preload:"auto",volume:1,loop:0,src:""}),t=document.createElement("Audio");return t.autoplay=e.autoplay,t.preload=e.preload,t.volume=e.volume,t.loop=e.loop,t.src=e.src,t}',pre:!0},"sdk/timestep/platforms/browser/Canvas.js":{path:"sdk/timestep/platforms/browser/Canvas.js",friendlyPath:".Canvas",directory:"sdk/timestep/platforms/browser/",filename:"Canvas.js",src:'var sdk_timestep_platforms_browser_Canvas;"use import";jsio("import .Context2D");sdk_timestep_platforms_browser_Canvas=__class__;exports=sdk_timestep_platforms_browser_Canvas(function(){return this.init&&this.init.apply(this,arguments)},function(){this.init=function(e){var e=merge(e,{width:300,height:200}),t=new Context2D(e);e=this._el=t.getElement();return e.getContext=function(){return t},e.complete=!0,e}})',pre:!0},"sdk/timestep/platforms/browser/Context2D.js":{path:"sdk/timestep/platforms/browser/Context2D.js",friendlyPath:".Context2D",directory:"sdk/timestep/platforms/browser/",filename:"Context2D.js",src:'function setter(e){return function(t){return this[e]=t}}function getter(e){return function(){return this[e]}}jsio("import device"),jsio("import .FontRenderer"),exports=function(e){var n,r,i,s,t=e&&e.el||document.createElement("canvas");t.width=e.width,t.height=e.height;n=t.getContext("2d");n.font="11px "+device.defaultFontFamily,n.getElement=function(){return t},n.reset=function(){},n.clear=function(){this.clearRect(0,0,t.width,t.height)},n.clipRect=function(e,t,r,i){n.beginPath(),n.rect(e,t,r,i),n.clip()},n.swap=function(){},n.execSwap=function(){},n.circle=function(e,t,n){this.beginPath(),this.arc(e,t,n,0,2*Math.PI,!0)};r=null,i=null,s=null;return n.drawPointSprites=function(e,t,n,o){var a,f,c,h,p,u=this.pointSprite;if(u&&u.complete){a=u.width,f=u.height,c=s||(s=document.createElement("canvas"));if(u!=r||this.strokeStyle!=i){r=u,i=this.strokeStyle,c.width=a,c.height=f;h=c.getContext("2d");h.fillStyle=this.strokeStyle,h.fillRect(0,0,a,f),h.globalCompositeOperation="destination-in",h.drawImage(u,0,0)}n-=e,o-=t,u=Math.ceil(Math.sqrt(n*n+o*o)/this.pointSpriteStep),1>u&&(u=1);for(h=this.lineWidth,p=0;p<u;++p)this.drawImage(c,0,0,a,f,e+n*p/u-h/2,t+o*p/u-h/2,h,h)}},n.roundRect=function(e,t,n,r,i){this.beginPath(),this.moveTo(e,t+i),this.lineTo(e,t+r-i),this.quadraticCurveTo(e,t+r,e+i,t+r),this.lineTo(e+n-i,t+r),this.quadraticCurveTo(e+n,t+r,e+n,t+r-i),this.lineTo(e+n,t+i),this.quadraticCurveTo(e+n,t,e+n-i,t),this.lineTo(e+i,t),this.quadraticCurveTo(e,t,e,t+i)},n.loadIdentity=function(){this.setTransform(1,0,0,1,0,0)},n.measureText=FontRenderer.wrapMeasureText(n.measureText),n.fillText=FontRenderer.wrapFillText(n.fillText),n.strokeText=FontRenderer.wrapStrokeText(n.strokeText),n.filters={},n.setFilters=function(e){var t;this.clearFilters();for(t in e)this.filters[t]=e[t]},n.clearFilters=function(){var e;for(e in this.filters)delete this.filters[e]},n}',pre:!0},"sdk/timestep/platforms/browser/FontRenderer.js":{path:"sdk/timestep/platforms/browser/FontRenderer.js",friendlyPath:".FontRenderer",directory:"sdk/timestep/platforms/browser/",filename:"FontRenderer.js",src:'var _customFonts,_customFontInfo,_fontMap,_buffers,_fontBuffer,_origMeasureText;function loadCustomFontImage(e,t){var n=new Image;return n.onload=function(){n.onload=null,e.imagesLoaded++,e.loaded=e.imagesLoaded===e.imagesTotal},n.src="resources/fonts/"+e.filename+t+".png",n}function findVerticalInfo(e){var n,r,u,t=[{start:65,end:90},{start:97,end:122},{start:32,end:255}],i=!1,s=0,o=0;for(u=0;u<t.length;u++){n=t[u];for(j=n.start;j<=n.end;j++)if(r=e[j])s=Math.max(s,r.h),o=Math.max(o,r.h),i=!0;if(i)break}return{baseline:s,bottom:o}}function findHorizontalInfo(e){var n,r,o,u,t=[{start:97,end:122},{start:65,end:90},{start:32,end:255}],i=0,s=0;for(o=0;o<t.length;o++){n=t[o];for(u=n.start;u<=n.end;u++)if(r=e[u])i+=r.w,s++;if(0!==s)break}return{width:i/s}}function loadingCustomFont(e){var t,n,r,i;if(-1!==e.imagesLoaded)return!e.loaded;t=e.settings,n=t.filename;_customFontInfo[n]?(n=_customFontInfo[n],e.dimensions=n.dimensions,e.horizontal=n.horizontal,e.vertical=n.vertical):(r="resources/fonts/"+n,i=CACHE[r+".json"],null==i&&((i=CACHE[r+".js"])?i=i.replace(/^\\s*exports\\s*=\\s*|;\\s*$/g,""):logger.warn("Could not load font",e.name,"from cached path",r)),e.dimensions=JSON.parse(i),e.horizontal=findHorizontalInfo(e.dimensions),e.vertical=findVerticalInfo(e.dimensions),_customFontInfo[n]={dimensions:e.dimensions,horizontal:e.horizontal,vertical:e.vertical}),e.images=[],e.imagesLoaded=0,n=e.images;switch(e.type){case"color":for(r=0;r<t.count;r++)n[r]=[],n[r].push(loadCustomFontImage(e,"_0_"+r)),e.imagesTotal++;break;case"composite":for(r=1;3>r;r++){n[r-1]=[];for(i=0;i<t.count;i++)n[r-1].push(loadCustomFontImage(e,"_"+r+"_"+i)),e.imagesTotal++}}return!0}function getCanvas(){return document.createElement("canvas")}function getBuffers(e,t,n,r){var i,s,o,u,a,t=t.filename+"_"+n+"_"+r,r=[];if(!_buffers[t]){_buffers[t]={buffers:r};for(i=0;i<e.length;i++){s=getCanvas(),o=s.getContext("2d"),u=e[i].width,a=e[i].height;r[i]=s,s.width=u,s.height=a,o.save(),o.fillStyle=n,o.fillRect(0,0,u,a),o.globalCompositeOperation="destination-in",o.drawImage(e[i],0,0),o.restore()}}return _buffers[t].lastUsed=+(new Date),_buffers[t].buffers}function measure(e,t,n){var l,c,r=t.customFont,i=r.dimensions,s=t.scale,o=(r.settings.outline||0)*s,u=(r.settings.tracking||0)*s,a=0,f=!0;if(i)for(l=0,c=n.length,f=!1;l<c&&!f;){character=n.charCodeAt(l);switch(character){case 9:a+=4*r.horizontal.width*s;break;case 32:a+=r.horizontal.width*s;break;default:i[character]?(character=i[character],a+=(character.ow-2)*s):f=!0}a+=u-o,l++}return f?(r=e.font,e.font=t.size.value+t.size.unit+" "+(e.defaultFontFamily||device.defaultFontFamily),t={failed:!0,width:_origMeasureText.apply(e,[n])},e.font=r,t):{failed:!1,width:a+2*s}}function renderCustomFont(e,t,n,r,i,s,o){var s,a,f,l,c,h,u=measure(e,s,r);if(u.failed)return!1;a=s.customFont,f=a.images[o],l=a.dimensions,s=s.scale,c=u.width,u=(a.settings.outline||0)*s,h=(a.settings.tracking||0)*s;switch(e.textBaseline){case"alphabetic":n-=a.vertical.baseline*s;break;case"middle":n-=a.vertical.bottom/2*s;break;case"bottom":n-=a.vertical.bottom*s}switch(e.textAlign){case"center":t-=c/2;break;case"right":t-=c}"composite"===a.type&&(f=getBuffers(f,a,i,o)),o=0;for(c=r.length;o<c;){i=r.charCodeAt(o);switch(i){case 9:t+=4*a.horizontal.width*s+h-u;break;case 32:t+=a.horizontal.width*s+h-u;break;default:i=l[i],e.drawImage(f[i.i],i.x,i.y,i.w,i.h,t,n+(i.oh-1)*s,(i.w-2)*s,(i.h-2)*s),t+=(i.ow-2)*s+h-u}o++}return!0}jsio("import ui.resource.Font as Font"),jsio("import ui.Engine as Engine"),jsio("import .FontBuffer as FontBuffer"),jsio("import device");_customFonts={},_customFontInfo={},_fontMap={},_buffers=[],_fontBuffer=!1;(function(){var t,n,r,e=window.CONFIG;if(e&&e.fonts)for(e=e.fonts,r=e.length;r;)t=e[--r],n={filename:t.filename,settings:t,imagesLoaded:-1,imagesTotal:0,loaded:!1,type:"color"},_customFonts[t.contextName+" color"]=n,loadingCustomFont(n),n={filename:t.filename,settings:t,imagesLoaded:-1,imagesTotal:0,loaded:!1,type:"composite"},_customFonts[t.contextName+" composite"]=n,loadingCustomFont(n)})(),exports.findFontInfo=function(e){var e=Font.parse(e.font),t=e.getName();return t&&_customFonts[t]?(customFont=_customFonts[t],e.customFont=customFont,e.scale=e.getSize()/customFont.settings.size,e):!1},exports.wrapMeasureText=function(e){return _origMeasureText=e,function(t){var n=exports.findFontInfo(this);return n?(n=measure(this,n,t),n.failed?e.apply(this,arguments):n):e.apply(this,arguments)}},exports.wrapFillText=function(e){return function(t,n,r){var s,i=exports.findFontInfo(this);if(!i)return e.apply(this,arguments);if(!loadingCustomFont(i.customFont)&&(isNaN(n)&&(n=0),isNaN(r)&&(r=0),!renderCustomFont(this,n,r,t+"",this.fillStyle,i,0))){s=this.font;this.font=i.size.value+i.size.unit+" "+(this.defaultFontFamily||device.defaultFontFamily),e.apply(this,[t,n,r]),this.font=s}}},exports.wrapStrokeText=function(e){return function(t,n,r){var s,i=exports.findFontInfo(this);if(!i)return e.apply(this,arguments);if(!loadingCustomFont(i.customFont)&&(isNaN(n)&&(n=0),isNaN(r)&&(r=0),!renderCustomFont(this,n,r,t+"",this.strokeStyle,i,1))){s=this.font;this.font=i.size.value+i.size.unit+" "+(this.defaultFontFamily||device.defaultFontFamily),e.apply(this,[t,n,r]),this.font=s}}},exports.getFontBuffer=function(){return _fontBuffer}',pre:!0},"sdk/timestep/ui/resource/Font.js":{path:"sdk/timestep/ui/resource/Font.js",friendlyPath:"ui.resource.Font",directory:"sdk/timestep/ui/resource/",filename:"Font.js",src:'var _cache,weights,styles,units,name,fontParser,sizeParser,TO_PT,TO_PX,sdk_timestep_ui_resource_Font,Font;function parseSize(e){e=e.match(sizeParser);if(!e)throw"invalid font size";return{value:parseFloat(e[1]),unit:e[2]}}function toPx(e){return{value:e.value*TO_PX[e.unit],unit:"px"}}function toPt(e){return{value:e.value*TO_PT[e.unit],unit:"pt"}}function parseFont(e){var t;e=e.match(fontParser);if(!e)throw"invalid font string";t={};return t.weight=e[1]||"normal",t.style=e[2]||"normal",t.size={value:parseFloat(e[3]),unit:e[4]},t.names=e[5].split(",").map(function(e){return e.replace(/[\\-_]/g," ").replace(/\\s+/g," ").replace(/[\'"]/g,"").replace(/^\\s+|\\s+$/g,"")}),t.name=t.names[0],t}jsio("import device");_cache={},weights="normal|bold|bolder|lighter|[1-9]00",styles="normal|italic|oblique",units="px|pt|pc|in|cm|mm|%",name="([\\\\w\\"\'\\\\- ]+(?:,|$))+",fontParser=RegExp("^ *(?:("+weights+") *)?(?:("+styles+") *)?([\\\\d\\\\.]+)("+units+")("+name+")","i"),sizeParser=RegExp("([\\\\d\\\\.]+)("+units+")","i"),TO_PT={pt:1,px:.75,"in":72,mm:72/25.4,cm:72/2.54},TO_PX={pt:4/3,px:1,"in":96,mm:96/25.4,cm:96/2.54},sdk_timestep_ui_resource_Font=__class__,Font=exports=sdk_timestep_ui_resource_Font(function(){return this.init&&this.init.apply(this,arguments)},function(){var e={name:device.defaultFontFamily,size:20,unit:"px",style:"",weight:""};this.init=function(t){"string"==typeof t?(_cache[t]=this,this._string=t,t=parseFont(t)):t=merge(t,e),"string"==typeof t.size&&(t.size=parseSize(t.size)),this._name=t.name,this._style=t.style,this.size=t.size,this.sizePx=toPx(this.size).value,this.sizePt=toPt(this.size).value,this._weight=t.weight,this._isBold=/bold/i.test(this._weight)},this.getSize=function(){return this.sizePx},this.getName=function(){return this._name},this.getWeight=function(){return this._weight}});exports.parse=function(e){return e in _cache?_cache[e]:new Font(e)}',pre:!0},"sdk/timestep/ui/Engine.js":{path:"sdk/timestep/ui/Engine.js",friendlyPath:"ui.Engine",directory:"sdk/timestep/ui/",filename:"Engine.js",src:'var _timers,__instance,sdk_timestep_ui_Engine,Application;jsio("import event.Emitter as Emitter"),jsio("import event.input.dispatch as dispatch"),jsio("import timer"),jsio("import ui.backend.ReflowManager as ReflowManager"),jsio("import device");_timers=[];timer.onTick=function(e){var t;for(t=_timers.length;t--;)_timers[t](e)};__instance=null,sdk_timestep_ui_Engine=__class__,Application=exports=sdk_timestep_ui_Engine(function(){return this.init&&this.init.apply(this,arguments)},Emitter,function(){this.init=function(e){__instance||(jsio("import .StackView"),__instance=this);var t=e&&e.canvas;"string"==typeof t&&GLOBAL.document&&document.getElementById&&(t=document.getElementById(t)),this._opts=e=merge(e,{keyListenerEnabled:!0,width:t&&t.width||device.width,height:t&&t.height||device.height,view:null,dtFixed:0,dtMinimum:0,clearEachFrame:!0,alwaysRepaint:!0,repaintOnEvent:!0,mergeMoveEvents:!1,continuousInputCheck:!device.isMobileBrowser&&!device.isMobile,showFPS:!1}),_timers.push(bind(this,this._tick)),this._doubleBuffered=!0,this._countdown=null,device.useDOM||(this._rootElement=new(device.get("Canvas"))({el:t,width:e.width,height:e.height,offscreen:!1}),this._ctx=this._rootElement.getContext("2d"),this._ctx.font="11px "+device.defaultFontFamily),this._view=e.view||new StackView,this._view.style.update({width:e.width,height:e.height}),device.useDOM&&(this._rootElement=this._view.getBacking().getElement()),this._view.__root=this,this._events=[],dispatch.KeyListener&&(this._keyListener=new dispatch.KeyListener),this._inputListener=new dispatch.InputListener({el:this._rootElement,keyListener:this._keyListener}),this._reflowMgr=ReflowManager.get(),this._tickBuffer=0,this._onTick=[],"browser"==device.name&&(t?(device.width=t.width,device.height=t.height,device.screen.width=t.width,device.screen.height=t.height):(e=device.get("doc"))&&e.setEngine(this)),this.updateOpts(this._opts)},this.updateOpts=function(e){this._opts=merge(e,this._opts),this._keyListener&&this._keyListener.setEnabled(this._opts.keyListenerEnabled),this._opts.showFPS?(this._applicationFPS||(jsio("import ui.backend.debug.FPSView as FPSView"),this._applicationFPS=new FPSView({application:this})),this._renderFPS=bind(this._applicationFPS,this._applicationFPS.render),this._tickFPS=bind(this._applicationFPS,this._applicationFPS.tick)):(this._renderFPS=function(){},this._tickFPS=function(){})},this.supports=function(e){return this._opts[e]},this.getInput=function(){return this._inputListener},this.getKeyListener=function(){return this._keyListener},this.getEvents=function(){return this._events},this.getElement=this.getCanvas=function(){return this._rootElement},this.getViewCtor=function(){return View},this.getView=function(){return this._view},this.setView=function(e){return this._view=e,this},this.show=function(){return this._rootElement.style.display="block",this},this.hide=function(){return this._rootElement.style.display="none",this},this.pause=function(){this.stopLoop(),this._keyListener&&this._keyListener.setEnabled(!1)},this.resume=function(){this.startLoop(),this._keyListener&&this._keyListener.setEnabled(!0)},this.stepFrame=function(e){this.pause(),this._countdown=e||1,this.resume()},this.startLoop=function(e){if(!this._running)return this._running=!0,this.now=0,timer.start(e||this._opts.dtMinimum),this},this.stopLoop=function(){if(this._running)return this._running=!1,timer.stop(),this},this.isRunning=function(){return this._running},this.doOnTick=function(e){1<arguments.length&&(e=bind.apply(this,arguments)),this._onTick.push(e)},this._tick=function(e){null!==this._countdown&&(this._countdown--,-1===this._countdown&&(this.pause(),this._countdown=null)),this._needsRepaint=!1;if(this._ctx){var t=this._ctx.getElement(),n=this._view.style;t&&(n.width!=t.width/n.scale||n.height!=t.height/n.scale)&&(n.width=t.width/n.scale,n.height=t.height/n.scale)}for(t=0;n=this._onTick[t];++t)n(e);n=this._inputListener.getEvents(),t=n.length,this._events=n;if(this._opts._mergeMoveEvents)for(var r=!1,t=t-1;0<=t;--t)n[t].type==dispatch.eventTypes.MOVE&&(r?n.splice(t,1):r=!0);for(t=0;r=n[t];++t)r.srcApp=this,dispatch.dispatchEvent(this._view,r);device.useDOM||(0<t?this._opts.repaintOnEvent&&this.needsRepaint():this._opts.continuousInputCheck&&(t=dispatch._evtHistory["input:move"])&&dispatch.dispatchEvent(this._view,new dispatch.InputEvent(t.id,t.type,t.srcPt)));if(this._opts.dtFixed)for(this._tickBuffer+=e;this._tickBuffer>=this._opts.dtFixed;)this._tickBuffer-=this._opts.dtFixed,this.now+=this._opts.dtFixed,this.__tick(this._opts.dtFixed);else this.__tick(e);this._reflowMgr.startReflow(this._ctx),this._reflowMgr.setInRender(!0),t=this._opts.alwaysRepaint||this._needsRepaint,!t&&this._doubleBuffered&&0<this._doubleBufferedState?(--this._doubleBufferedState,this.render(e)):t&&(this._doubleBufferedState=3,this.render(e)),this._reflowMgr.setInRender(!1)},this.render=function(e){this._opts.clearEachFrame&&this._ctx&&this._ctx.clear(),this._view.__view.wrapRender(this._ctx,{}),this.publish("Render",this._ctx),this._ctx&&(this._renderFPS(this._ctx,e),this._ctx.swap())},this.needsRepaint=function(){return this._needsRepaint=!0,this},this.__tick=function(e){this._tickFPS(e),this.publish("Tick",e),this._view.__view.wrapTick(e,this)}});exports.get=function(){return __instance}',pre:!0},"sdk/timestep/event/input/dispatch.js":{path:"sdk/timestep/event/input/dispatch.js",friendlyPath:"event.input.dispatch",directory:"sdk/timestep/event/input/",filename:"dispatch.js",src:'jsio("import math.geom.Point as Point"),jsio("import device"),jsio("import lib.Enum"),exports.eventTypes=new lib.Enum("START","MOVE","SELECT","SCROLL","CLEAR"),exports.VERTICAL_AXIS=2,exports.HORIZONTAL_AXIS=1,exports.dispatchEvent=function(e,t){var n,r,i,s,o,u;t.root=e,exports.traceEvt(e,t,t.srcPt);n=t.depth;exports._evtHistory[t.type]=t;for(r=exports._evtCb[t.type]||exports.getEvtCbName(t.type),i=n-1;0<=i;--i){s=t.trace[i],o=t.pt[s.uid];s.publish(r+"Capture",t,o,0==i);if(t.cancelled||s.__input.blockEvents)return}for(u="on"+r,i=0;i<n;++i)if(s=t.trace[i],s.__input.canHandleEvents){o=t.pt[s.uid],s[u]&&s[u](t,o,0==i),s.publish(r,t,o,0==i),s._onEventPropagate(t,o,0==i);if(t.cancelled)break}},exports.traceEvt=function(e,t,n){var r,i,s;n=e.style.localizePoint(new Point(n));if(!e.getInput().containsEvent(t,n))return!1;r=e.getInput().canHandleEvents;r&&(t.depth++,t.trace.unshift(e),t.pt[e.uid]=n);for(i=e.getSubviews(),s=i.length-1;0<=s;--s)if(i[s].style.visible&&exports.traceEvt(i[s],t,n))return!0;if(r)return t.target=e,!0},exports._evtHistory={},exports._activeInputOver={},exports.clearOverState=function(e){var t,n,r;if(e){t=exports._activeInputOver[e];if(t&&(delete exports._activeInputOver[e],t=t.trace))for(n=0;r=t[n];++n)r.__input.onLeave(e)}else for(e in exports._activeInputOver)exports.clearOverState(e)},exports._isDragging=!1,exports.isDragging=function(){return exports._isDragging},exports._evtCb={},exports.getEvtCbName=function(e){var t=exports.eventTypes[e];return exports._evtCb[e]="Input"+t.charAt(0)+t.substring(1).toLowerCase()},exports.InputListener=device.get("Input"),exports.KeyListener=device.get("KeyListener"),jsio("import .InputEvent as exports.InputEvent")',pre:!0},"sdk/timestep/event/input/InputEvent.js":{path:"sdk/timestep/event/input/InputEvent.js",friendlyPath:".InputEvent",directory:"sdk/timestep/event/input/",filename:"InputEvent.js",src:'var sdk_timestep_event_input_InputEvent,InputEvent;jsio("import math.geom.Point as Point"),jsio("import timer");sdk_timestep_event_input_InputEvent=__class__,InputEvent=exports=sdk_timestep_event_input_InputEvent(function(){return this.init&&this.init.apply(this,arguments)},function(){this.cancelled=!1,this.depth=0,this.init=function(e,t,n,r,i,s){this.id=e,this.type=t,this.point=this.pt={},this.srcPoint=this.srcPt=new Point(n,r),this.trace=[],this.root=i||null,this.when=timer.now,this.target=s||null},this.cancel=function(){this.cancelled=!0},this.clone=function(){return new InputEvent(this.id,this.type,this.srcPt.x,this.srcPt.y,this.root,this.target)}})',pre:!0},"sdk/timestep/timer.js":{path:"sdk/timestep/timer.js",friendlyPath:"timer",directory:"sdk/timestep/",filename:"timer.js",baseMod:"timer",basePath:"sdk/timestep/",src:'var Timer,MAX_TICK;jsio("import device");Timer=device.get("Timer"),MAX_TICK=1e4;exports.now=0,exports.frames=0,exports.reset=function(){this._last=null},exports.tick=function(e){try{e>MAX_TICK&&(exports.onLargeTick(e,MAX_TICK),e=1),exports.now+=e,exports.frames++,exports.onTick(e),ok=!0}finally{exports.debug&&!ok&&app.stopLoop()}},exports.onLargeTick=function(e,t){logger.warn("Dropping large tick: "+e+"; Threshold is set at: "+t)},exports.onTick=function(){},exports.debug=!1,exports.start=function(e){this.reset(),this.isRunning=!0,device.get("Timer").start(exports.tick,e)},exports.stop=function(){this.reset(),this.isRunning=!1,device.get("Timer").stop()},exports.getTickProgress=function(){var e=+(new Date);return-(Timer.last||e)+e}',pre:!0},"sdk/timestep/ui/backend/ReflowManager.js":{path:"sdk/timestep/ui/backend/ReflowManager.js",friendlyPath:"ui.backend.ReflowManager",directory:"sdk/timestep/ui/backend/",filename:"ReflowManager.js",src:'var _debug,DEBUG=!1,MAX_REFLOW_THRESHOLD=6,_pool=new(Class(function(){this._pool=[],this.recycle=function(e){e.count=0,e.view=null,this._pool.push(e)},this.get=function(e){var t=this._pool.pop()||{};return t.view=e,t.iter=0,t.count=0,t}})),sdk_timestep_ui_backend_ReflowManager=__class__,ReflowManager=exports=sdk_timestep_ui_backend_ReflowManager(function(){return this.init&&this.init.apply(this,arguments)},function(){this.init=function(){this._pending={},this._iter=0},this.setInRender=function(e){this._isInRender=e},this.add=function(e){var t=e.uid,n=this._pending[t]||(this._pending[t]=_pool.get(e));n.needsReflow=!0,n.iter!=this._iter&&(n.count++,n.iter=this._iter),DEBUG&&_debug.log("adding view",t,e.style.width+"x"+e.style.height,e.getTag()),this._isInRender&&!this._isInReflow&&this.startReflow(this._lastCtx)},this._reflow=function(e,t){t.needsReflow=!1;var n=t.view,r=n.style;r.__firstRender||(r.__firstRender=!0,DEBUG&&_debug.log("calling buildView for",n.uid,"("+n.style.width+"x"+n.style.height+")")&&_debug.stepIn(),n.buildView(e),DEBUG&&_debug.stepOut());if(n.hasListeners("Resize")){var i=r.width,s=r.height;if(r.__cachedWidth!=i||r.__cachedHeight!=s)r.__cachedWidth=i,r.__cachedHeight=s,n.publish("Resize")}n.__layout&&n.__layout.reflow(),n.reflow(!1)},this.startReflow=function(e){this._lastCtx=e,this._isInReflow=!0,this._iter=0;var t;DEBUG&&_debug.stepIn();do{++this._iter,t=0;for(var n in this._pending){var r=this._pending[n];if(r.count>MAX_REFLOW_THRESHOLD){logger.warn("reflow loop detected for view",r.view.uid);break}r.needsReflow&&(DEBUG&&_debug.log("starting reflow for view",r.view.uid,"("+r.count+" times)")&&_debug.stepIn(),this._reflow(e,r),DEBUG&&_debug.stepOut(),++t)}DEBUG&&t&&_debug.log("iteration",this._iter,"reflowed",t,"views")}while(t);for(n in this._pending)_pool.recycle(this._pending[n]);this._pending={},this._isInReflow=!1,DEBUG&&_debug.stepOut()}}),_instance=null;exports.get=function(){return _instance||(_instance=new ReflowManager)}',pre:!0},"sdk/timestep/ui/StackView.js":{path:"sdk/timestep/ui/StackView.js",friendlyPath:".StackView",directory:"sdk/timestep/ui/",filename:"StackView.js",src:'var sdk_timestep_ui_StackView;jsio("import ui.View as View"),jsio("import animate");sdk_timestep_ui_StackView=__class__;exports=sdk_timestep_ui_StackView(function(){return this.init&&this.init.apply(this,arguments)},View,function(e){this.init=function(t){t=merge(t,{layout:"box"}),e(this,"init",[t]),this.stack=[]},this.getStack=function(){return this.stack},this.getCurrentView=function(){return this.stack.length?this.stack[this.stack.length-1]:null},this.push=function(e,t,n){var r;!this.stack[0]&&!1!==t&&(t=!0);r=this.getCurrentView();return r&&this._hide(r,t),e.style.width=this.style.width/e.style.scale,e.style.height=this.style.height/e.style.scale,this.stack.push(e),this._show(e,t,n),e},this._hide=function(e,t,n){e.publish("ViewWillDisappear"),t?(this.removeSubview(e),e.publish("ViewDidDisappear")):(this.getInput().blockEvents=!0,animate(e).then({x:(n?1:-1)*this.style.width}).then(bind(this,function(){this.removeSubview(e),e.publish("ViewDidDisappear"),this.getInput().blockEvents=!1})))},this._show=function(e,t,n){e.publish("ViewWillAppear"),e.style.visible=!0,t?(this.addSubview(e),e.style.x=0,e.publish("ViewDidAppear")):(e.style.x=(n?-1:1)*this.style.width,this.addSubview(e),animate(e).then({x:0}).then(bind(e,"publish","ViewDidAppear")))},this.hasView=function(e){return 0<=this.stack.indexOf(e)},this.remove=function(e){e=this.stack.indexOf(e),0<=e&&this.stack.splice(e,1)},this.pop=function(e,t){var n;if(!this.stack.length)return!1;n=this.stack.pop();return this._hide(n,e,!1===t?!1:!0),this.stack.length&&this._show(this.stack[this.stack.length-1],e,!0),n},this.popAll=function(e){for(;this.stack[1];)this.pop(e)}})',pre:!0},"sdk/timestep/ui/View.js":{path:"sdk/timestep/ui/View.js",friendlyPath:"ui.View",directory:"sdk/timestep/ui/",filename:"View.js",baseMod:"ui",basePath:"sdk/timestep/",src:'var _reflowMgr,KeyListener,EventScheduler,scheduler,FocusMgr,UID,_BackingCtor,sdk_timestep_ui_View,View,_extensions;jsio("import device"),jsio("import event.Emitter as Emitter"),jsio("import math.geom.Point as Point"),jsio("import math.geom.Rect as Rect"),jsio("import .backend.canvas.ViewBacking"),jsio("import ui.backend.ReflowManager as ReflowManager");_reflowMgr=ReflowManager.get();jsio("import event.input.dispatch as dispatch"),jsio("import event.input.InputHandler as InputHandler"),jsio("import animate"),jsio("import util.setProperty");KeyListener=device.get("KeyListener"),EventScheduler=__class__,EventScheduler=EventScheduler(function(){return this.init&&this.init.apply(this,arguments)},function(){this.init=function(){this._queue=[]},this.add=function(e){this._queue.push(e);if(!this._running){for(this._running=!0;e=this._queue.shift();)e();this._running=!1}}}),scheduler=new EventScheduler,FocusMgr=new(Class(function(){this.init=function(){this._keyListener=KeyListener&&new KeyListener,this._target=null,this._canChange=!0},this.focus=function(e){this._target!=e&&this._canChange&&(this._target&&this._target.onBlur&&this._target.onBlur(this),(this._target=e)&&e.onFocus&&this._target.onFocus(this))},this.blur=function(e){e.onBlur&&e.onBlur(this),this._target=!1},this.getKeyListener=function(){return this._keyListener},this.get=function(){return this}})),UID=0,_BackingCtor=null,sdk_timestep_ui_View=__class__,View=exports=sdk_timestep_ui_View(function(){return this.init&&this.init.apply(this,arguments)},Emitter,function(){this.init=function(e){e||(e={}),this.uid=++UID,this.__input=new InputHandler(this,e),this.__view=this.style=new(e.Backing||_BackingCtor)(this,e),this._filter=null,this.__view._view=this,this.updateOpts(e)},this.updateOpts=function(e){e=e||{};if(this._opts)for(var t in e)this._opts[t]=e[t];else this._opts=e;return e.tag&&(this.tag=e.tag),e.filter&&(this._filter=e.filter),e.infinite&&(this._infinite=e.infinite),this.style.update(e),e.superview&&e.superview.addSubview(this),e.parent&&e.parent.addSubview(this),e},this.getFilters=function(){logger.warn("View.getFilters() is deprecated! Use View.getFilter() instead.");var e={};return this._filter&&(e[this._filter._opts.type]=this._filter),e},this.getFilter=function(){return this._filter},this.addFilter=function(e){logger.warn("View.addFilter() is deprecated! Use View.setFilter() instead."),this.setFilter(e)},this.setFilter=function(e){this._filter=e},this.removeFilter=function(){this._filter=null},util.setProperty(this,"render",{value:void 0,cb:function(){this.__view&&(this.__view.hasJSRender=!0)}}),util.setProperty(this,"tick",{value:void 0,cb:function(){this.__view&&(this.__view.hasJSTick=!0)}}),this.getAnimation=function(e){return animate(this,e)},this.animate=function(e,t,n){return this.getAnimation().then(e,t,n)},this.focus=function(){return FocusMgr.get().focus(this),this},this.blur=function(){return FocusMgr.get().blur(this),this},this.onFocus=function(){this._isFocused=!0},this.onBlur=function(){this._isFocused=!1},this.isDragging=function(){return this.__input.isDragging()},this.startDrag=function(e){this.__input.startDrag(e)},this.getInput=function(){return this.__input},this.isInputOver=function(){return!!this.__input.overCount},this.getInputOverCount=function(){return this._inputOverCount},this.setHandleEvents=this.canHandleEvents=function(e,t){this.__input.canHandleEvents=e,"boolean"==typeof ignoreEvents&&(this.__input.blockEvents=t)},this.setIsHandlingEvents=function(e){this.__input.canHandleEvents=e},this.isHandlingEvents=function(){return this.__input.canHandleEvents},this.needsRepaint=function(){this._needsRepaint=!0},this.needsReflow=function(e){if(this.style.__firstRender||e)_reflowMgr.add(this),this._needsRepaint=!0},this._onEventPropagate=function(e,t,n){if(n){var t=e.id,r;switch(e.type){case dispatch.eventTypes.SELECT:case dispatch.eventTypes.CLEAR:dispatch._evtHistory[dispatch.eventTypes.MOVE]=null,(n=dispatch._activeInputOver[t])&&dispatch.clearOverState(t);break;case dispatch.eventTypes.START:case dispatch.eventTypes.MOVE:var i=e.trace[0],s=null;if((n=dispatch._activeInputOver[t])&&i!=n.trace[0]){var o=n.trace;for(r=0;s=o[r];++r)s.uid in e.pt||s.__input.onLeave(t,i==s)}if(!n||i!=n.trace[0]){o=e.trace;for(r=e.depth-1;0<=r;--r)o[r].__input.onEnter(t,i==s);dispatch._activeInputOver[t]=e}}}},this.localizePoint=function(e){var t=this.getParents(),n=0;for(t.push(this);t[++n];)e=t[n].__view.localizePoint(e);return e},this.getSubview=function(e){return this.__view.getSubviews()[e]},this.getSubviews=function(){return this.__view.getSubviews()},this.getSuperview=function(){return this.__view.getSuperview()},this.connectEvent=function(e,t){this.__subs||(this.__subs=[],this.on("ViewAdded",bind(this,"_connectEvents")),this.on("ViewRemoved",bind(this,"_disconnectEvents")),this.__root&&this._connectEvents());var n=Array.prototype.slice.call(arguments,1);this.__subs.push([e,n]),this.__root&&e.on.apply(e,n)},this.disconnectEvent=function(e,t){if(this.__subs)for(var n=Array.prototype.slice.call(arguments,1),r=0,i;i=this.__subs[r];++r){var s;if(s=i[0]==e)e:{s=0;for(var o=n.length;s<o;++s)if(n[s]!=i[1][s]){s=!1;break e}s=!0}s&&(i[0].removeListener.apply(i[0],i[1]),this.__subs.splice(r--,1))}},this._connectEvents=function(){for(var e=0,t;t=this.__subs[e];++e)t[0].on.apply(t[0],t[1])},this._disconnectEvents=function(){for(var e=0,t;t=this.__subs[e];++e)t[0].removeListener.apply(t[0],t[1])},this.addSubview=function(e){if(this.__view.addSubview(e)&&(e.needsRepaint(),e.needsReflow(),e.__input.resetOver(),this.publish("SubviewAdded",e),this.__root)){var t=this.__root;scheduler.add(bind(this,function n(r){r.__root=t,r.emit("ViewAdded",e);for(var r=r.getSubviews(),i=0,s;s=r[i];++i)n(s)},e))}return e},this.removeSubview=function(e){return this.__view.removeSubview(e)&&(this.publish("SubviewRemoved",e),e.__root&&scheduler.add(bind(this,function t(e){e.__root=null,e.emit("ViewRemoved",this);for(var e=e.getSubviews(),n=0,r;r=e[n];++n)t(r)},e))),e},this.removeFromSuperview=function(){var e=this.__view.getSuperview();e&&e.removeSubview(this)},this.removeAllSubviews=function(){for(var e=this.getSubviews(),t=e.length;t--;)this.removeSubview(e[t])},util.setProperty(this,"_superview",{get:this.getSuperview,set:function(){}}),util.setProperty(this,"_subviews",{get:this.getSubviews,set:function(){}}),this.reflow=function(){},this.getApp=function(){var e=this,t;do t=e.__view.getSuperview();while(t&&(e=t));return e.__root},this.getParents=function(){var e=[this],t;do t=e[0].__view.getSuperview();while(t&&e.unshift(t));return e.pop(),e},this.buildView=function(){},this.containsLocalPoint=function(e){if(this._infinite)return!0;var t=this.style,n=t.width,t=t.height;return 0<n&&0<t?e.x<=n&&e.y<=t&&0<=e.x&&0<=e.y:0<n?e.x<=n&&e.y>=t&&0<=e.x&&0>=e.y:0<t?e.x>=n&&e.y<=t&&0>=e.x&&0<=e.y:e.x>=n&&e.y>=t&&0>=e.x&&0>=e.y},this.getBoundingShape=function(){if(this._infinite)return!0;var e=this.style,t=e.width,n=e.height;if((!t||!n)&&e.layout){var r=this.getSuperview();r&&(r=r.getBoundingShape(),t||(t=r.width,e.layoutWidth&&(t*=parseInt(e.layoutWidth)/100)),!n)&&(n=r.height,e.layoutHeight&&(n*=parseInt(e.layoutHeight)/100))}return new Rect(e.x,e.y,t*e.scale,n*e.scale)},this.getRelativeRegion=function(e,t){var n=this.getPosition(t||e.src);return new Rect((e.x-n.x)/n.scale,(e.y-n.y)/n.scale,e.width/n.scale,e.height/n.scale)},this.getPosition=function(e){for(var t=new Point,n=this,r=0,i=this.style,s=i.width,i=i.height,o=1;n&&n!=e;){var u=n.style.scale;t.add(-n.style.anchorX,-n.style.anchorY),t.rotate(n.style.r),t.scale(u),t.add(n.style.anchorX+n.style.x+n.style.offsetX,n.style.anchorY+n.style.y+n.style.offsetY),r+=n.style.r,s*=u,i*=u,o*=u,n=n.__view.getSuperview()}return{x:t.x,y:t.y,r:r%(2*Math.PI),width:s,height:i,scale:o,anchorX:this.style.anchorX,anchorY:this.style.anchorY}},this.getBacking=function(){return this.__view},this.show=function(){this.style.visible=!0,this.needsRepaint()},this.hide=function(){this.style.visible=!1,this.needsRepaint()},this.toString=this.getTag=function(){var e="View";return this.__tagClassName?e=this.__tagClassName:((e=this.constructor.name)||(e=this.constructor.toString().match(/^function ([^(]+)/)[1]),e&&(e=e.substr(e.lastIndexOf("_")+1)),this.__tagClassName=e||"unknown"),e+this.uid+(this.tag?":"+this.tag:"")}}),_extensions=[];View.addExtension=function(e){e.extend(View.BackingCtor),_extensions.push(e)},View.setDefaultViewBacking=function(e){_BackingCtor=View.BackingCtor=e,_extensions.forEach(function(e){e.extend(_BackingCtor)})},View.setDefaultViewBacking(backend.canvas.ViewBacking)',pre:!0},"sdk/timestep/ui/backend/canvas/ViewBacking.js":{path:"sdk/timestep/ui/backend/canvas/ViewBacking.js",friendlyPath:".backend.canvas.ViewBacking",directory:"sdk/timestep/ui/backend/canvas/",filename:"ViewBacking.js",src:'var _styleKeys,sdk_timestep_ui_backend_canvas_ViewBacking,ViewBacking;jsio("import ..strPad"),jsio("import ..BaseBacking"),jsio("import util.setProperty as setProperty");_styleKeys={},sdk_timestep_ui_backend_canvas_ViewBacking=__class__,ViewBacking=exports=sdk_timestep_ui_backend_canvas_ViewBacking(function(){return this.init&&this.init.apply(this,arguments)},BaseBacking,function(){this.init=function(e){this._view=e,this._subviews=[]},this.getSuperview=function(){return this._superview},this.getSubviews=function(){this._needsSort&&(this._needsSort=!1,this._subviews.sort());for(var e=[],t=this._subviews,n=t.length,r=0;r<n;++r)e[r]=t[r]._view;return e};var e=9e5;this.addSubview=function(t){var n=t.__view,r=n._superview;return r==this._view?!1:(r&&r.__view.removeSubview(t),t=this._subviews.length,this._subviews[t]=n,n._superview=this._view,n._setAddedAt(++e),t&&n.__sortKey<this._subviews[t-1].__sortKey&&(this._needsSort=!0),!0)},this.removeSubview=function(e){var t=this._subviews.indexOf(e.__view);return-1!=t?(this._subviews.splice(t,1),e.__view._superview=null,!0):!1},this.wrapTick=function(e,t){this._view.tick&&this._view.tick(e,t);for(var n=0,r;r=this._subviews[n];++n)r.wrapTick(e,t)},this.wrapRender=function(e,t){if(this.visible){this.__firstRender||this._view.needsReflow(!0),this._needsSort&&(this._needsSort=!1,this._subviews.sort());var n=this._width,r=this._height;if(!(0>n||0>r)){e.save(),e.translate(this.x+this.anchorX+this.offsetX,this.y+this.anchorY+this.offsetY),this.r&&e.rotate(this.r),1!=this.scale&&e.scale(this.scale,this.scale),1!=this.opacity&&(e.globalAlpha*=this.opacity),e.translate(-this.anchorX,-this.anchorY),this.clip&&e.clipRect(0,0,n,r);var i={},s=this._view.getFilter();s&&(i[s._opts.type]=s),e.setFilters(i);if(this.flipX||this.flipY)e.translate(this.flipX?n/2:0,this.flipY?r/2:0),e.scale(this.flipX?-1:1,this.flipY?-1:1),e.translate(this.flipX?-n/2:0,this.flipY?-r/2:0);try{this.backgroundColor&&(e.fillStyle=this.backgroundColor,e.fillRect(0,0,n,r));var o=t.viewport;this._view.render&&this._view.render(e,t),this._renderSubviews(e,t),t.viewport=o}finally{e.clearFilters(),e.restore()}}}},this._renderSubviews=function(e,t){for(var n=0,r,i=this._subviews;r=i[n++];)r.wrapRender(e,t)},this._onResize=function(){this._view.needsReflow()},this._sortIndex=strPad.initialValue,this._onZIndex=function(e,t){this._sortIndex=strPad.pad(t),this._setSortKey(),this._view.needsRepaint();var n=this._view.getSuperview();n&&(n.__view._needsSort=!0)},this._setAddedAt=function(e){this._addedAt=e,this._setSortKey()},this._setSortKey=function(){this.__sortKey=this._sortIndex+this._addedAt},this._onOffsetX=function(e){this.offsetX=e*this.width/100},this._onOffsetY=function(e){this.offsetY=e*this.height/100},this.toString=function(){return this.__sortKey}})',pre:!0},"sdk/timestep/ui/backend/strPad.js":{path:"sdk/timestep/ui/backend/strPad.js",friendlyPath:"..strPad",directory:"sdk/timestep/ui/backend/",filename:"strPad.js",src:'var LEN=8,MAX=99999999,MIN=-99999999,PAD="00000000";exports.initialValue=PAD,exports.pad=function(e){return e=~~e,e<MIN&&(e=MIN),e>MAX&&(e=MAX),0>e?(e*=-1,"-"+PAD.substring(0,LEN-(""+e).length)+e):PAD.substring(0,LEN-(""+e).length)+e}',pre:!0},"sdk/timestep/ui/backend/BaseBacking.js":{path:"sdk/timestep/ui/backend/BaseBacking.js",friendlyPath:"..BaseBacking",directory:"sdk/timestep/ui/backend/",filename:"BaseBacking.js",src:'var sdk_timestep_ui_backend_BaseBacking,BaseBacking;jsio("import util.setProperty as setProperty");sdk_timestep_ui_backend_BaseBacking=__class__,BaseBacking=exports=sdk_timestep_ui_backend_BaseBacking(function(){return this.init&&this.init.apply(this,arguments)},function(){var e=this.constructor.styleKeys={},t={x:{value:0},y:{value:0},offsetX:{value:0},offsetY:{value:0},offsetXPercent:{value:void 0,cb:"_onOffsetX"},offsetYPercent:{value:void 0,cb:"_onOffsetY"},anchorX:{value:0},anchorY:{value:0},centerAnchor:{value:!1},width:{cb:"_onResize"},height:{cb:"_onResize"},r:{value:0},opacity:{value:1},zIndex:{value:0,cb:"_onZIndex"},scale:{value:1},flipX:{value:!1},flipY:{value:!1},visible:{value:!0},shadowColor:{value:"black"},clip:{value:!1},backgroundColor:{value:void 0}};this.constructor.addProperty=function(t,n){e[t]=!0,setProperty(this.prototype,t,n)};for(var n in t)this.constructor.addProperty(n,t[n]);this.localizePoint=function(e){return e.x-=this.x+this.anchorX+this.offsetX,e.y-=this.y+this.anchorY+this.offsetY,this.r&&e.rotate(-this.r),e.scale(1/this.scale),e.x+=this.anchorX,e.y+=this.anchorY,e},this.copy=function(){var t={},n;for(n in e)t[n]=this[n];return t},this.update=function(t){for(var n in t)t.hasOwnProperty(n)&&e.hasOwnProperty(n)&&(this[n]=t[n]);return this}})',pre:!0},"sdk/jsio/util/setProperty.js":{path:"sdk/jsio/util/setProperty.js",friendlyPath:"util.setProperty",directory:"sdk/jsio/util/",filename:"setProperty.js",src:'function createGetter(e,t){return function(){return this[t]}}function createSetter(e,t,n,r){return void 0!==r&&(e[t]=r),"function"==typeof n?function(e){var r;if(this[t]!==e){r=this[t];this[t]=e,n.call(this,t,e,r)}}:"string"==typeof n?function(e){var r;if(this[t]!==e){r=this[t];this[t]=e,this[n](t,e,r)}}:function(e){this[t]=e}}exports=function(e,t,n){!n.get&&!n.set&&!n.cb&&"value"in n?e[t]=n.value:(n.get||(n.get=createGetter(e,"_"+t)),n.set||(n.set=createSetter(e,"_"+t,n.cb,n.value)),"value"in n&&(e["_"+t]=n.value),delete n.value,Object.defineProperty)?Object.defineProperty(e,t,n):e.__defineSetter__?(e.__defineSetter__(t,n.set),e.__defineGetter__(t,n.get)):e[t]=n.value}',pre:!0},"sdk/timestep/event/input/InputHandler.js":{path:"sdk/timestep/event/input/InputHandler.js",friendlyPath:"event.input.InputHandler",directory:"sdk/timestep/event/input/",filename:"InputHandler.js",src:'var sdk_timestep_event_input_InputHandler,InputHandler;jsio("import math.geom.Point as Point"),jsio("import event.input.dispatch as dispatch");sdk_timestep_event_input_InputHandler=__class__,InputHandler=exports=sdk_timestep_event_input_InputHandler(function(){return this.init&&this.init.apply(this,arguments)},function(){this.overCount=this.dragCount=0,this.canHandleEvents=!0,this.blockEvents=!1,this.init=function(e,t){this.view=e,"canHandleEvents"in t&&(this.canHandleEvents=t.canHandleEvents),"blockEvents"in t&&(this.blockEvents=t.blockEvents)},this.containsEvent=function(e,t){return!this.blockEvents&&(!this.view._superview||this.view.containsLocalPoint(t))},this.onEnter=function(e,t){var n=this.view,r=this._over||(this._over={});e in r||(r[e]=!0,this.overCount++,n.onInputOver&&n.onInputOver(r,this.overCount,t),n.publish("InputOver",r,this.overCount,t))},this.onLeave=function(e,t){var n=this.view,r=this._over||(this._over={});e in r&&(delete r[e],--this.overCount,n.onInputOut&&n.onInputOut(r,this.overCount,t),n.publish("InputOut",r,this.overCount,t))},this.resetOver=function(){delete this._over,this.overCount=0},this.startDrag=function(e){var e=e||{},t=this.view,n=e.inputStartEvt||e.inputStartEvent||dispatch._evtHistory[dispatch.eventTypes.START],r=n.id,i=this._isDragging||(this._isDragging={});i[r]||(i[r]=!0,++this.dragCount,r=n.root,t=new dispatch.InputEvent(n.id,"input:drag",n.srcPt.x,n.srcPt.y,r,t),t.didDrag=!1,t.radius=e.radius*e.radius||0,r.subscribe("InputMoveCapture",this,"onDragStart",t),r.subscribe("InputSelectCapture",this,"onDragStop",t))},this.isDragging=function(){return this.dragCount&&dispatch._isDragging},this.onDragStart=function(e,t){var n=t.srcPt.x-e.srcPt.x,r=t.srcPt.y-e.srcPt.y;n*n+r*r<=e.radius||(n=this.view,e.root.unsubscribe("InputMoveCapture",this,"onDragStart"),e.currPt=e.srcPt,e.localPt=n.localizePoint(new Point(e.currPt)),n.onDragStart&&n.onDragStart(e),n.publish("DragStart",e),e.root.subscribe("InputMoveCapture",this,"onDrag",e),this.onDrag(e,t))},this.onDrag=function(e,t){if(e.id==t.id&&(t.srcPt.x!=e.currPt.x||t.srcPt.y!=e.currPt.y)){var n=this.view;e.prevPt=e.currPt,e.currPt=t.srcPt,e.prevLocalPt=e.localPt,e.localPt=n.localizePoint(new Point(e.currPt)),e.didDrag=!0;var r=Point.subtract(e.localPt,e.prevLocalPt);dispatch._isDragging=!0,n.onDrag&&n.onDrag(e,t,r),n.publish("Drag",e,t,r)}},this.onDragStop=function(e,t){var n=e.id,r=this._isDragging||(this._isDragging={});r[n]&&e.id==t.id&&(delete r[n],--this.dragCount,this.dragCount||(e.root.unsubscribe("InputMoveCapture",this,"onDragStart"),e.root.unsubscribe("InputMoveCapture",this,"onDrag"),e.root.unsubscribe("InputSelectCapture",this,"onDragStop"),dispatch._isDragging=!1),e.didDrag)&&(n=this.view,t.cancel(),n.onDragStop&&n.onDragStop(e,t),n.publish("DragStop",e,t))}})',pre:!0},"sdk/timestep/animate.js":{path:"sdk/timestep/animate.js",friendlyPath:"animate",directory:"sdk/timestep/",filename:"animate.js",baseMod:"animate",basePath:"sdk/timestep/",src:'jsio("import ui.backend.canvas.animate as exports")',pre:!0},"sdk/timestep/ui/backend/canvas/animate.js":{path:"sdk/timestep/ui/backend/canvas/animate.js",friendlyPath:"ui.backend.canvas.animate",directory:"sdk/timestep/ui/backend/canvas/",filename:"animate.js",src:'var anim_uid,Group,groups,TRANSITIONS,Frame,CallbackFrame,WaitFrame,ObjectFrame,ViewStyleFrame,Animator,ViewAnimator;function getTransition(e){return"function"==typeof e?e:TRANSITIONS[e|0]}jsio("import event.Emitter as Emitter"),jsio("import animate.transitions as transitions"),jsio("import timer");anim_uid=0;exports=function(e,t){var t,n,r,i;"undefined"==typeof Engine&&(jsio("import ui.Engine as Engine"),jsio("import ui.View as View"));t=t||0,n=groups[t]||(groups[t]=new Group),r=e.__anim_id||(e.__anim_id="__anim_"+ ++anim_uid),i=n.get(r);return i||(i=e instanceof View?new ViewAnimator(e,n):new Animator(e,n),n.add(r,i)),i},exports.getViewAnimator=function(){return ViewAnimator},exports.setViewAnimator=function(e){ViewAnimator=e};Group=__class__,Group=Group(function(){return this.init&&this.init.apply(this,arguments)},Emitter,function(){this.init=function(){this._anims={},this._pending=[]},this.get=function(e){return this._anims[e]},this.add=function(e,t){return this._anims[e]=t,t.id=e,t},this.isActive=function(){for(var e in this._anims)if(this._anims[e].hasFrames())return!0;return!1},this.onAnimationFinish=function(e){delete this._anims[e.id],this.isActive()||this.publish("Finish")}}),groups={0:new Group};exports.getGroup=function(e){return groups[e||0]};TRANSITIONS=[transitions.easeInOut,transitions.linear,transitions.easeIn,transitions.easeOut,transitions.easeInOut,transitions.bounce];exports.linear=1,exports.easeIn=2,exports.easeOut=3,exports.easeInOut=4,exports.bounce=5;Frame=__class__,Frame=Frame(function(){return this.init&&this.init.apply(this,arguments)},function(){this.init=function(e){this.subject=e.subject,this.target=e.target,this.duration=e.duration||0,this.transition=getTransition(e.transition),this.onTick=e.onTick},this.exec=function(){},this.onInterrupt=function(){}}),CallbackFrame=__class__,CallbackFrame=CallbackFrame(function(){return this.init&&this.init.apply(this,arguments)},Frame,function(){this.exec=function(e,t){this.target.apply(this.subject,arguments)}}),WaitFrame=Frame,ObjectFrame=__class__,ObjectFrame=ObjectFrame(function(){return this.init&&this.init.apply(this,arguments)},Frame,function(){this.exec=function(e,t,n){if(!this.base){this.base={};for(var r in this.target)this.base[r]=this.subject[r]}for(r in this.target)this.subject[r]=(this.target[r]-this.base[r])*e+this.base[r];if(n){t={};for(r in this.target)t[r]=this.subject[r]+" -> "+this.target[r];logger.log(this.duration,e,JSON.stringify(t))}}}),ViewStyleFrame=__class__,ViewStyleFrame=ViewStyleFrame(function(){return this.init&&this.init.apply(this,arguments)},Frame,function(){this._resolvedDeltas=!1,this.init=function(e){this.subject=e.subject,this.target=merge({},e.target),this.duration=0===e.duration?0:e.duration||500,this.transition=getTransition(e&&e.transition),this.onTick=e.onTick},this.resolveDeltas=function(e){var t=this.target;this._resolvedDeltas=!0;for(var n in t){var r=n.substring(1);"d"==n.charAt(0)&&!(n in e)&&r in e&&(t[r]=t[n]+e[r],delete t[n])}},this.exec=function(e,t,n){var r=this._baseStyle||(this._baseStyle=this.subject.style.copy()),t=this.target;this._resolvedDeltas||this.resolveDeltas(this._baseStyle);var r=this._baseStyle,i;for(i in t)i in r&&(this.subject.style[i]=(t[i]-r[i])*e+r[i]);this.subject.needsRepaint();if(n){n={};for(i in t)n[i]=this.subject.style[i]+" -> "+t[i];logger.log(timer.now,this.duration,e,JSON.stringify(n))}},this.onInterrupt=function(){}});exports.Animator=__class__;Animator=exports.Animator=exports.Animator(function(){return this.init&&this.init.apply(this,arguments)},Emitter,function(){this.init=function(e,t){this.subject=e,this._group=t,this.clear(),this._isPaused=!1},this.clear=function(){return this._elapsed=0,this._queue=[],this._unschedule(),this},this.pause=function(){this._isPaused||(this._isPaused=!0,this._unschedule())},this.resume=function(){this._isPaused&&(this._isPaused=!1,this._schedule())},this._schedule=function(){this._isScheduled||(this._isScheduled=!0,Engine.get().subscribe("Tick",this,"onTick"))},this._unschedule=function(){this._isScheduled&&(this._isScheduled=!1,Engine.get().unsubscribe("Tick",this,"onTick"))},this.isPaused=function(){return this._isPaused},this.hasFrames=function(){return!!this._queue[0]},this.wait=function(e){return this.then(new WaitFrame({duration:e}))},this.buildFrame=function(e){return"function"==typeof e.target?new CallbackFrame(e):"object"==typeof e.target?new ObjectFrame(e):new WaitFrame(e)},this.now=function(e,t,n,r){return n=n||(this._queue[0]?exports.easeOut:exports.easeInOut),e=e instanceof Frame?e:this.buildFrame({subject:this.subject,target:e,duration:t,transition:n,onTick:r}),(t=this._queue[0])&&t.onInterrupt(e),this.clear(),this.then(e)},this.then=function(e,t,n,r){return e=e instanceof Frame?e:this.buildFrame({subject:this.subject,target:e,duration:t,transition:n,onTick:r}),this._queue.length||(this._elapsed=0),this._queue.push(e),this._schedule(),this},this.debug=function(){return this._debug=!0,this},this.commit=function(){for(var e=this._elapsed=0,t;t=this._queue[e];++e)this._elapsed+=t.duration;return this.next(),this},this.onTick=function(e){this._isScheduled&&(this._elapsed+=e,this.next(),!this._isScheduled)&&this._group.onAnimationFinish(this)},this.next=function(){var e;if(this._queue[0]){for(;e=this._queue[0];){var t=this._elapsed>=e.duration,n=t?1:this._elapsed/e.duration,r=e.transition(n);t&&(this._elapsed-=e.duration);try{e.exec(r,n,this._debug),e.onTick&&e.onTick.call(e.subject,r,n)}finally{if(t&&e==this._queue[0]&&this._queue.shift(),!t||this._isPaused)return}}this._unschedule()}}}),ViewAnimator=__class__,ViewAnimator=ViewAnimator(function(){return this.init&&this.init.apply(this,arguments)},Animator,function(e){this.buildFrame=function(t){return"object"==typeof t.target?new ViewStyleFrame(t):e(this,"buildFrame",arguments)}})',pre:!0},"sdk/timestep/animate/transitions.js":{path:"sdk/timestep/animate/transitions.js",friendlyPath:"animate.transitions",directory:"sdk/timestep/animate/",filename:"transitions.js",src:"exports.linear=function(e){return e},exports.easeIn=function(e){return e*e},exports.easeInOut=function(e){return 1>(e*=2)?.5*e*e*e:.5*((e-=2)*e*e+2)},exports.easeOut=function(e){return e*(2-e)}",pre:!0},"sdk/timestep/ui/backend/debug/FPSView.js":{path:"sdk/timestep/ui/backend/debug/FPSView.js",friendlyPath:"ui.backend.debug.FPSView",directory:"sdk/timestep/ui/backend/debug/",filename:"FPSView.js",src:'var viewModes,Graph,sdk_timestep_ui_backend_debug_FPSView;function strokeRect(e,t,n){e.fillStyle=n,e.fillRect(t.x,t.y,1,t.height),e.fillRect(t.x,t.y,t.width,1),e.fillRect(t.x+t.width-1,t.y,1,t.height),e.fillRect(t.x,t.y+t.height-1,t.width,1)}function fillRect(e,t,n){e.fillStyle=n,e.fillRect(t.x,t.y,t.width,t.height)}jsio("import device"),jsio("import lib.Enum as Enum"),jsio("import math.geom.Rect as Rect"),jsio("import math.geom.intersect as intersect"),jsio("import event.input.dispatch as dispatch");viewModes=new Enum("FPS","DT"),Graph=__class__,Graph=Graph(function(){return this.init&&this.init.apply(this,arguments)},function(){this.init=function(e){var t=device.get("Canvas");this._width=e.width,this._height=e.height,this._maxValue=e.maxValue,this._backgroundColor=e.backgroundColor,this._colors=e.colors,this._axisColor=e.axisColor,this._canvas=new t({width:e.width,height:e.height}),this._ctx=this._canvas.getContext("2d"),this._ctx.fillStyle=e.backgroundColor,this._ctx.fillRect(0,0,e.width,e.height),this._index=this._offset=0},this.addValues=function(e,t){var n=this._ctx,r=this._width,i=this._height,s,o=this._maxValue,u=(this._offset+this._index)%r,a;n.fillStyle=this._backgroundColor,n.fillRect(u,0,2,i);for(a=e.length;a;)s=e[--a],s>o&&(s=o),s=~~(s/o*i),n.fillStyle=this._colors[a],n.fillRect(u,i-s,2,s);n.fillStyle=this._axisColor,t&&n.fillRect(u,0,1,i),n.fillRect(u,25,2,1),n.fillRect(u,50,2,1),n.fillRect(u,75,2,1),this._index<r?this._index+=2:(this._offset+=2,this._offset>=r&&(this._offset=0))},this.render=function(e,t,n){var r=this._offset,i=this._width,s=this._height;0===r?e.drawImage(this._canvas,0,0,i,s,t,n,i,s):(e.drawImage(this._canvas,r,0,i-r,s,t,n,i-r,s),e.drawImage(this._canvas,0,0,r,s,i-r+t,n,r,s))}}),sdk_timestep_ui_backend_debug_FPSView=__class__;exports=sdk_timestep_ui_backend_debug_FPSView(function(){return this.init&&this.init.apply(this,arguments)},function(){this.init=function(e){this._application=e.application,this._time=+(new Date)+1e3,this._frames=0,this._fps=20,this._dt=10,this._minimized=!0,this._rectTop=new Rect(1,1,200,16),this._rectMin=new Rect(0,0,24,15),this._rectMax=new Rect(0,0,202,117),this._rect=this._rectMin,this._rectFPS=new Rect(141,1,30,15),this._rectDT=new Rect(171,1,30,15),this._borderColor="rgb(100,100,150)",this._backgroundColor="#17182E",this._textColor="#FFFFFF",this._viewMode=viewModes.DT,this._graphs={},this._graphs[viewModes.FPS]=new Graph({width:200,height:100,maxValue:60,backgroundColor:this._backgroundColor,colors:["rgba(170,170,252,0.3)","rgb(170,170,252)"],axisColor:"#FFFFFF"}),this._graphs[viewModes.DT]=new Graph({width:200,height:100,maxValue:66,backgroundColor:this._backgroundColor,colors:["rgba(255,0,0,0.5)","rgb(254,255,170)"],axisColor:"#FFFFFF"})},this.tick=function(e){var t=+(new Date);t>this._time?(this._time=t+1e3,this._fps=this._frames,this._frames=1):this._frames++,t=this._application.getEvents(),t.length&&this._handleEvents(t),this._dt=.8*this._dt+.2*e;if(!this._minimized)switch(this._viewMode){case viewModes.DT:this._graphs[viewModes.DT].addValues([this._dt,e],1===this._frames);break;case viewModes.FPS:this._graphs[viewModes.FPS].addValues([this._fps,1e3/e],1===this._frames)}},this._handleEvents=function(e){var t,n,r;for(t=dispatch.eventTypes,n=e.length;n;){r=e[--n];switch(r.type){case t.START:intersect.ptAndRect(r.srcPt,this._rect)&&(this._minimized?this._minimized=!1:intersect.ptAndRect(r.srcPt,this._rectFPS)?this._viewMode=viewModes.FPS:intersect.ptAndRect(r.srcPt,this._rectDT)?this._viewMode=viewModes.DT:this._minimized=!0,this._rect=this._minimized?this._rectMin:this._rectMax)}}},this.render=function(e){var t,n;e.save(),e.textBaseline="top",e.textAlign="center",e.font="12px Verdana";if(this._minimized)fillRect(e,this._rect,this._backgroundColor);else{fillRect(e,this._rectTop,this._backgroundColor),this._graphs[this._viewMode].render(e,1,17),e.fillStyle=this._borderColor,e.fillRect(0,16,this._rect.width,1);t=this._viewMode===viewModes.FPS,n=this._viewMode===viewModes.DT;fillRect(e,this._rectFPS,t?this._borderColor:this._backgroundColor),e.fillStyle=t?this._textColor:this._borderColor,e.fillText("FPS",this._rectFPS.x+this._rectFPS.width/2,0),fillRect(e,this._rectDT,n?this._borderColor:this._backgroundColor),e.fillStyle=n?this._textColor:this._borderColor,e.fillText("DT",this._rectDT.x+this._rectDT.width/2,0)}strokeRect(e,this._rect,this._borderColor),e.fillStyle=this._textColor,e.fillText(this._fps,12,0),e.restore()},this.getFPS=function(){return this._fps}})',pre:!0},"sdk/timestep/platforms/browser/FontBuffer.js":{path:"sdk/timestep/platforms/browser/FontBuffer.js",friendlyPath:".FontBuffer",directory:"sdk/timestep/platforms/browser/",filename:"FontBuffer.js",src:'var randomColorElement,randomColor,sdk_timestep_platforms_browser_FontBuffer,FontBuffer;jsio("import device");randomColorElement=function(){var e=Math.floor(255*Math.random()).toString(16);return(1===e.length?"0":"")+e},randomColor=function(){return"#"+randomColorElement()+randomColorElement()+randomColorElement()},sdk_timestep_platforms_browser_FontBuffer=__class__,FontBuffer=exports=sdk_timestep_platforms_browser_FontBuffer(function(){return this.init&&this.init.apply(this,arguments)},function(){this.init=function(){var e=[{size:24,count:8},{size:32,count:10},{size:64,count:8}],t,n,r,i=0,s,o;this._canvas=document.createElement("canvas"),this._canvas.width=1024,this._canvas.height=1024,this._ctx=this._canvas.getContext("2d"),this._list=[];for(s=0;s<e.length;s++){n=[],t=e[s];for(o=0;o<t.count;o++)r={previous:null,next:null,x:0,y:i,width:1024,height:0,hash:null,frame:0,refresh:!0,ctx:this._ctx},n.push(r),i+=t.size;this._list.push({size:t.size,lines:n})}this._hashMap={},this._currentFrame=0,this._frameTimeout=3,jsio("import ui.Engine").get().subscribe("Tick",this,this._onTick)},this._onTick=function(){this._currentFrame++;var e=this._currentFrame,t=this._frameTimeout,n=this._list,r,i,s,o,u,a;s=0;for(o=n.length;s<o;s++){r=n[s].lines,u=0;for(a=r.length;u<a;u++)for(i=r[u];i;)null===i.hash?i.next&&null===i.next.hash&&(i.width+=i.next.width,i.next=i.next.next):e>i.frame+t&&(this._ctx.fillStyle=randomColor(),this._ctx.fillRect(i.x,i.y,i.width,i.height),delete this._hashMap[i.hash],i.hash=null),i=i.next}},this.alloc=function(e){var t=e.height,n=e.width+3,e=(e.strokeStyle||"")+"_"+(e.fillStyle||"")+"_"+(e.font||"")+"_"+e.text,r=this._list,i=this._hashMap[e],s,o;if(i)return i.frame=this._currentFrame,i.refresh=!1,i;i=0;for(s=r.length;i<s;i++)if(t<=r[i].size){r=r[i].lines,s=0;for(o=r.length;s<o;s++)for(i=r[s];i;){if(n<=i.width&&null===i.hash)return n!==i.width&&(i.next={previous:i,next:i.next,x:i.x+n,y:i.y,width:i.width-n,hash:null,frame:0,ctx:this._ctx}),i.frame=this._currentFrame,i.hash=e,i.width=n,i.height=t,i.refresh=!0,this._ctx.clearRect(i.x,i.y,n,t),this._hashMap[e]=i;i=i.next}break}return!1},this.getCanvas=function(){return this._canvas}})',pre:!0},"sdk/timestep/platforms/browser/dev_error.js":{path:"sdk/timestep/platforms/browser/dev_error.js",friendlyPath:".dev_error",directory:"sdk/timestep/platforms/browser/",filename:"dev_error.js",src:'function render(e,t){var r,i;function n(t){e.fillText(t,r,i),i+=20}e.fillStyle="rgb(0, 0, 255)",e.fillRect(0,0,e.canvas.width,e.canvas.height);r=30,i=40;e.fillStyle="#FFF",e.font=\'bold 12px Monaco,"Bitstream Vera Sans Mono","Lucida Console",Terminal,monospace\',n(t.message),i+=40,t.stack.split("\\n").map(n)}exports.render=function(e){var t,n,r;logger.error("unhandled tick exception"),logger.error(e.stack);for(t=document.getElementsByTagName("canvas"),n=0;r=t[n];++n)render(r.getContext("2d"),e)}',pre:!0},"sdk/timestep/platforms/browser/FlashAPI.js":{path:"sdk/timestep/platforms/browser/FlashAPI.js",friendlyPath:".FlashAPI",directory:"sdk/timestep/platforms/browser/",filename:"FlashAPI.js",src:'var soundManager,sdk_timestep_platforms_browser_FlashAPI,AudioAPI;"use import";jsio("import lib.PubSub"),jsio("import .SoundManager"),jsio("from util.underscore import _");soundManager=new SoundManager;soundManager.url="media/swf",soundManager.flashVersion=9,soundManager.useMovieStar=!0,soundManager.debugMode=!1,soundManager.consoleOnly=!0,soundManager.useHighPerformance=!0,soundManager.useFastPolling=!0;sdk_timestep_platforms_browser_FlashAPI=__class__,AudioAPI=exports=sdk_timestep_platforms_browser_FlashAPI(function(){return this.init&&this.init.apply(this,arguments)},lib.PubSub,function(e){this.init=function(t){t=merge(t,{map:{},background:[]}),e(this,"init",[t]),this._map={},_.each(t.background,function(e){t.map[e]={name:e}},this),soundManager.onready(bind(this,function(){logger.log("SoundManager onReady");for(key in t.map)logger.log("SoundManager key: ",key),(this._map[key]=soundManager.createSound({id:key,bufferTime:3,url:"media/audio/"+key+".mp3"})).load();this.publish("Ready")}))},this.canPlay=function(e){return e in this._map},this.setVolume=function(e){this._soundPlaying&&soundManager.setVolume(this._soundPlaying,e),this._backgroundSoundPlaying&&soundManager.setVolume(this._backgroundSoundPlaying,e)},this.setMuted=function(e){(this.muted=e)&&this.setVolume(0)},this.play=function(e,t){this.canPlay(e)&&!this.muted&&(void 0===t&&(t=1),this._soundPlaying=e,this._map[e].setVolume(100*t|0),this._map[e].play())},this.pause=function(){this._map[this._soundPlaying].pause(),this._soundPlaying=null},this.playBackgroundMusic=function(e,t){this.canPlay(e)&&!this.muted&&(void 0===t&&(t=1),this._backgroundSoundPlaying=e,this._map[e].setVolume(100*t|0),this._map[e].play())},this.pauseBackgroundMusic=function(){this._backgroundSoundPlaying&&(this._map[this._backgroundSoundPlaying].pause(),this._backgroundSoundPlaying=null)}})',pre:!0},"sdk/timestep/platforms/browser/SoundManager.js":{path:"sdk/timestep/platforms/browser/SoundManager.js",friendlyPath:".SoundManager",directory:"sdk/timestep/platforms/browser/",filename:"SoundManager.js",src:'var SoundManager=exports=function(e,t){function n(e){return function(t){return!this._t||!this._t._a?(this._t&&this._t.sID?i._wD(s+"ignoring "+t.type+": "+this._t.sID):i._wD(s+"ignoring "+t.type),null):e.call(this,t)}}this.flashVersion=8,this.debugMode=!0,this.debugFlash=!1,this.useConsole=!0,this.waitForWindowLoad=this.consoleOnly=!1,this.nullURL="about:blank",this.allowPolling=!0,this.useFastPolling=!1,this.useMovieStar=!0,this.bgColor="#ffffff",this.useHighPerformance=!1,this.flashPollingInterval=null,this.flashLoadTimeout=1e3,this.wmode=null,this.allowScriptAccess="always",this.useFlashBlock=!1,this.useHTML5Audio=!0,this.html5Test=/^(probably|maybe)$/i,this.preferFlash=!0,this.audioFormats={mp3:{type:[\'audio/mpeg; codecs="mp3"\',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a"],type:[\'audio/mp4; codecs="mp4a.40.2"\',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},wav:{type:[\'audio/wav; codecs="1"\',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.defaultOptions={autoLoad:!1,stream:!0,autoPlay:!1,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onstop:null,onfailure:null,onfinish:null,onbeforefinish:null,onbeforefinishtime:5e3,onbeforefinishcomplete:null,onjustbeforefinish:null,onjustbeforefinishtime:200,multiShot:!0,multiShotEvents:!1,position:null,pan:0,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.version=null,this.versionNumber="V2.97a.20110801",this.movieURL=null,this.url=e||null,this.altURL=null,this.enabled=this.swfLoaded=!1,this.o=null,this.movieID="sm2-container",this.id=t||"sm2movie",this.swfCSS={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"},this.oMC=null,this.sounds={},this.soundIDs=[],this.muted=!1,this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.didFlashBlock=this.specialWmodeCase=!1,this.filePattern=null,this.filePatterns={flash8:/\\.mp3(\\?.*)?$/i,flash9:/\\.mp3(\\?.*)?$/i},this.baseMimeTypes=/^\\s*audio\\/(?:x-)?(?:mp(?:eg|3))\\s*(?:$|;)/i,this.netStreamMimeTypes=/^\\s*audio\\/(?:x-)?(?:mp(?:eg|3))\\s*(?:$|;)/i,this.netStreamTypes="aac flv mov mp4 m4v f4v m4a mp4v 3gp 3g2".split(" "),this.netStreamPattern=RegExp("\\\\.("+this.netStreamTypes.join("|")+")(\\\\?.*)?$","i"),this.mimePattern=this.baseMimeTypes,this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null},this.hasHTML5="undefined"!=typeof Audio&&"undefined"!=typeof (new Audio).canPlayType,this.html5={usingFlash:null},this.flash={},this.ignoreFlash=this.html5Only=!1;var r,i=this,s="HTML5::",o,u=navigator.userAgent,a=window,f=a.location.href.toString(),l=this.flashVersion,c=document,h,p,d=[],v=!0,m,g=!1,y=!1,b=!1,w=!1,E=!1,S,x=0,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U=["log","info","warn","error"],z,W,X,V=null,$=null,J,K,Q,G,Y,Z,et,tt,nt=!1,rt=!1,it,st,ot=null,ut,at,ft,lt,ct,ht,pt,dt=Array.prototype.slice,vt=!1,mt,gt,yt,bt,wt,Et=u.match(/(ipad|iphone|ipod)/i),St=u.match(/(mobile|pre\\/|xoom)/i)||Et,xt=u.match(/msie/i),Tt=u.match(/webkit/i),Nt=u.match(/safari/i)&&!u.match(/chrome/i),Ct=u.match(/opera/i),kt=!f.match(/usehtml5audio/i)&&!f.match(/sm2\\-ignorebadua/i)&&Nt&&u.match(/OS X 10_6_([3-7])/i),Lt="undefined"!=typeof console&&"undefined"!=typeof console.log,At="undefined"!=typeof c.hasFocus?c.hasFocus():null,Ot=Nt&&"undefined"==typeof c.hasFocus,Mt=!Ot,_t=/(mp3|mp4|mpa)/i,Dt=c.location?c.location.protocol.match(/http/i):null,Pt=Dt?"":"http:";this.useAltURL=!Dt,this._global_a=null,St&&(i.useHTML5Audio=!0,i.preferFlash=!1,Et&&(vt=i.ignoreFlash=!0)),this.supported=this.ok=function(){return ot?b&&!w:i.useHTML5Audio&&i.hasHTML5},this.getMovie=function(e){return xt?a[e]:Nt?o(e)||c[e]:o(e)},this.createSound=function(e){function t(){return n=Y(n),i.sounds[o.id]=new r(o),i.soundIDs.push(o.id),i.sounds[o.id]}var n=null,s=null,o=null;return!b||!i.ok()?(et("soundManager.createSound(): "+J(b?"notOK":"notReady")),!1):(arguments.length===2&&(e={id:arguments[0],url:arguments[1]}),o=n=N(e),o.id.toString().charAt(0).match(/^[0-9]$/)&&i._wD("soundManager.createSound(): "+J("badID",o.id),2),i._wD("soundManager.createSound(): "+o.id+" ("+o.url+")",1),tt(o.id,!0)?(i._wD("soundManager.createSound(): "+o.id+" exists",1),i.sounds[o.id]):(at(o)?(s=t(),i._wD("Loading sound "+o.id+" via HTML5"),s._setup_html5(o)):(l>8&&i.useMovieStar&&(o.isMovieStar===null&&(o.isMovieStar=o.serverURL||o.type&&o.type.match(i.netStreamPattern)||o.url.match(i.netStreamPattern)?!0:!1),o.isMovieStar&&i._wD("soundManager.createSound(): using MovieStar handling"),o.isMovieStar&&(o.usePeakData&&(S("noPeak"),o.usePeakData=!1),o.loops>1&&S("noNSLoop"))),o=Z(o,"soundManager.createSound(): "),s=t(),l===8?i.o._createSound(o.id,o.onjustbeforefinishtime,o.loops||1,o.usePolicyFile):(i.o._createSound(o.id,o.url,o.onjustbeforefinishtime,o.usePeakData,o.useWaveformData,o.useEQData,o.isMovieStar,o.isMovieStar?o.bufferTime:!1,o.loops||1,o.serverURL,o.duration||null,o.autoPlay,!0,o.autoLoad,o.usePolicyFile),o.serverURL||(s.connected=!0,o.onconnect&&o.onconnect.apply(s))),!o.serverURL&&(o.autoLoad||o.autoPlay)&&s.load(o)),!o.serverURL&&o.autoPlay&&s.play(),s))},this.destroySound=function(e,t){if(!tt(e))return!1;var n=i.sounds[e],r;n._iO={},n.stop(),n.unload();for(r=0;r<i.soundIDs.length;r++)if(i.soundIDs[r]===e){i.soundIDs.splice(r,1);break}return t||n.destruct(!0),delete i.sounds[e],!0},this.load=function(e,t){return tt(e)?i.sounds[e].load(t):!1},this.unload=function(e){return tt(e)?i.sounds[e].unload():!1},this.start=this.play=function(e,t){return!b||!i.ok()?(et("soundManager.play(): "+J(b?"notOK":"notReady")),!1):tt(e)?i.sounds[e].play(t):(t instanceof Object||(t={url:t}),t&&t.url?(i._wD(\'soundManager.play(): attempting to create "\'+e+\'"\',1),t.id=e,i.createSound(t).play()):!1)},this.setPosition=function(e,t){return tt(e)?i.sounds[e].setPosition(t):!1},this.stop=function(e){return tt(e)?(i._wD("soundManager.stop("+e+")",1),i.sounds[e].stop()):!1},this.stopAll=function(){var e;i._wD("soundManager.stopAll()",1);for(e in i.sounds)i.sounds.hasOwnProperty(e)&&i.sounds[e].stop()},this.pause=function(e){return tt(e)?i.sounds[e].pause():!1},this.pauseAll=function(){var e;for(e=i.soundIDs.length;e--;)i.sounds[i.soundIDs[e]].pause()},this.resume=function(e){return tt(e)?i.sounds[e].resume():!1},this.resumeAll=function(){var e;for(e=i.soundIDs.length;e--;)i.sounds[i.soundIDs[e]].resume()},this.togglePause=function(e){return tt(e)?i.sounds[e].togglePause():!1},this.setPan=function(e,t){return tt(e)?i.sounds[e].setPan(t):!1},this.setVolume=function(e,t){return tt(e)?i.sounds[e].setVolume(t):!1},this.mute=function(e){var t=0;typeof e!="string"&&(e=null);if(e)return tt(e)?(i._wD(\'soundManager.mute(): Muting "\'+e+\'"\'),i.sounds[e].mute()):!1;i._wD("soundManager.mute(): Muting all sounds");for(t=i.soundIDs.length;t--;)i.sounds[i.soundIDs[t]].mute();return i.muted=!0},this.muteAll=function(){i.mute()},this.unmute=function(e){typeof e!="string"&&(e=null);if(e)return tt(e)?(i._wD(\'soundManager.unmute(): Unmuting "\'+e+\'"\'),i.sounds[e].unmute()):!1;i._wD("soundManager.unmute(): Unmuting all sounds");for(e=i.soundIDs.length;e--;)i.sounds[i.soundIDs[e]].unmute();return i.muted=!1,!0},this.unmuteAll=function(){i.unmute()},this.toggleMute=function(e){return tt(e)?i.sounds[e].toggleMute():!1},this.getMemoryUse=function(){var e=0;return i.o&&l!==8&&(e=parseInt(i.o._getMemoryUse(),10)),e},this.disable=function(e){var t;typeof e=="undefined"&&(e=!1);if(w)return!1;w=!0,S("shutdown",1);for(t=i.soundIDs.length;t--;)z(i.sounds[i.soundIDs[t]]);return T(e),pt.remove(a,"load",L),!0},this.canPlayMIME=function(e){var t;return i.hasHTML5&&(t=ft({type:e})),!ot||t?t:e?e.match(i.mimePattern)?!0:!1:null},this.canPlayURL=function(e){var t;return i.hasHTML5&&(t=ft({url:e})),!ot||t?t:e?e.match(i.filePattern)?!0:!1:null},this.canPlayLink=function(e){return typeof e.type!="undefined"&&e.type&&i.canPlayMIME(e.type)?!0:i.canPlayURL(e.href)},this.getSoundById=function(e,t){if(!e)throw Error("soundManager.getSoundById(): sID is null/undefined");var n=i.sounds[e];return!n&&!t&&i._wD(\'"\'+e+\'" is an invalid sound ID.\',2),n},this.onready=function(e,t){if(e&&e instanceof Function)return b&&i._wD(J("queue","onready")),t||(t=a),C("onready",e,t),k(),!0;throw J("needFunction","onready")},this.ontimeout=function(e,t){if(e&&e instanceof Function)return b&&i._wD(J("queue","ontimeout")),t||(t=a),C("ontimeout",e,t),k({type:"ontimeout"}),!0;throw J("needFunction","ontimeout")},this._wD=this._writeDebug=function(e,t,n){var r,s;if(!i.debugMode)return!1;typeof n!="undefined"&&n&&(e=e+" | "+(new Date).getTime());if(Lt&&i.useConsole){n=U[t],typeof console[n]!="undefined"?console[n](e):console.log(e);if(i.useConsoleOnly)return!0}try{r=o("soundmanager-debug");if(!r)return!1;s=c.createElement("div"),++x%2===0&&(s.className="sm2-alt"),t=typeof t=="undefined"?0:parseInt(t,10),s.appendChild(c.createTextNode(e)),t&&(t>=2&&(s.style.fontWeight="bold"),t===3&&(s.style.color="#ff3333")),r.insertBefore(s,r.firstChild)}catch(u){}return!0},this._debug=function(){var e,t;S("currentObj",1),e=0;for(t=i.soundIDs.length;e<t;e++)i.sounds[i.soundIDs[e]]._debug()},this.reboot=function(){i._wD("soundManager.reboot()"),i.soundIDs.length&&i._wD("Destroying "+i.soundIDs.length+" SMSound objects...");var e,t;for(e=i.soundIDs.length;e--;)i.sounds[i.soundIDs[e]].destruct();try{xt&&($=i.o.innerHTML),V=i.o.parentNode.removeChild(i.o),i._wD("Flash movie removed.")}catch(n){S("badRemove",2)}$=V=ot=null,i.enabled=B=b=nt=rt=g=y=w=i.swfLoaded=!1,i.soundIDs=i.sounds=[],i.o=null;for(e in d)if(d.hasOwnProperty(e))for(t=d[e].length;t--;)d[e][t].fired=!1;i._wD("soundManager: Rebooting..."),a.setTimeout(i.beginDelayedInit,20)},this.getMoviePercent=function(){return i.o&&typeof i.o.PercentLoaded!="undefined"?i.o.PercentLoaded():null},this.beginDelayedInit=function(){E=!0,H(),setTimeout(function(){return rt?!1:(F(),P(),rt=!0)},20),A()},this.destruct=function(){i._wD("soundManager.destruct()"),i.disable(!0)},bt={abort:n(function(){i._wD(s+"abort: "+this._t.sID)}),canplay:n(function(){if(this._t._html5_canplay)return!0;this._t._html5_canplay=!0,i._wD(s+"canplay: "+this._t.sID+", "+this._t.url),this._t._onbufferchange(0);var e=isNaN(this._t.position)?null:this._t.position/1e3;if(this._t.position&&this.currentTime!==e){i._wD(s+"canplay: setting position to "+e);try{this.currentTime=e}catch(t){i._wD(s+"setting position failed: "+t.message,2)}}}),load:n(function(){this._t.loaded||(this._t._onbufferchange(0),this._t._whileloading(this._t.bytesTotal,this._t.bytesTotal,this._t._get_html5_duration()),this._t._onload(!0))}),emptied:n(function(){i._wD(s+"emptied: "+this._t.sID)}),ended:n(function(){i._wD(s+"ended: "+this._t.sID),this._t._onfinish()}),error:n(function(){i._wD(s+"error: "+this.error.code),this._t._onload(!1)}),loadeddata:n(function(){var e=this._t,t=e.bytesTotal||1;i._wD(s+"loadeddata: "+this._t.sID),!e._loaded&&!Nt&&(e.duration=e._get_html5_duration(),e._whileloading(t,t,e._get_html5_duration()),e._onload(!0))}),loadedmetadata:n(function(){i._wD(s+"loadedmetadata: "+this._t.sID)}),loadstart:n(function(){i._wD(s+"loadstart: "+this._t.sID),this._t._onbufferchange(1)}),play:n(function(){i._wD(s+"play: "+this._t.sID+", "+this._t.url),this._t._onbufferchange(0)}),playing:n(function(){i._wD(s+"playing: "+this._t.sID+", "+this._t.url),this._t._onbufferchange(0)}),progress:n(function(e){if(this._t.loaded)return!1;var t,n,r;r=0;var o=e.type==="progress";n=e.target.buffered;var u=e.loaded||0,a=e.total||1;if(n&&n.length){for(t=n.length;t--;)r=n.end(t)-n.start(t);u=r/e.target.duration;if(o&&n.length>1){r=[],n=n.length;for(t=0;t<n;t++)r.push(e.target.buffered.start(t)+"-"+e.target.buffered.end(t));i._wD(s+"progress: timeRanges: "+r.join(", "))}o&&!isNaN(u)&&i._wD(s+"progress: "+this._t.sID+": "+Math.floor(u*100)+"% loaded")}isNaN(u)||(this._t._onbufferchange(0),this._t._whileloading(u,a,this._t._get_html5_duration()),u&&a&&u===a&&bt.load.call(this,e))}),ratechange:n(function(){i._wD(s+"ratechange: "+this._t.sID)}),suspend:n(function(e){i._wD(s+"suspend: "+this._t.sID),bt.progress.call(this,e)}),stalled:n(function(){i._wD(s+"stalled: "+this._t.sID)}),timeupdate:n(function(){this._t._onTimer()}),waiting:n(function(){i._wD(s+"waiting: "+this._t.sID),this._t._onbufferchange(1)})},r=function(e){var t=this,n,r,o;this.sID=e.id,this.url=e.url,this._iO=this.instanceOptions=this.options=N(e),this.pan=this.options.pan,this.volume=this.options.volume,this._lastURL=null,this.isHTML5=!1,this._a=null,this.id3={},this._debug=function(){if(i.debugMode){var e=null,n=[],r,s;for(e in t.options)t.options[e]!==null&&(t.options[e]instanceof Function?(r=t.options[e].toString(),r=r.replace(/\\s\\s+/g," "),s=r.indexOf("{"),n.push(" "+e+": {"+r.substr(s+1,Math.min(Math.max(r.indexOf("\\n")-1,64),64)).replace(/\\n/g,"")+"... }")):n.push(" "+e+": "+t.options[e]));i._wD("SMSound() merged options: {\\n"+n.join(", \\n")+"\\n}")}},this._debug(),this.load=function(e){var n=null;typeof e!="undefined"?(t._iO=N(e,t.options),t.instanceOptions=t._iO):(e=t.options,t._iO=e,t.instanceOptions=t._iO,t._lastURL&&t._lastURL!==t.url&&(S("manURL"),t._iO.url=t.url,t.url=null)),t._iO.url||(t._iO.url=t.url),i._wD("SMSound.load(): "+t._iO.url,1);if(t._iO.url===t.url&&t.readyState!==0&&t.readyState!==2)return S("onURL",1),t;t._lastURL=t.url,t.loaded=!1,t.readyState=1,t.playState=0;if(at(t._iO))n=t._setup_html5(t._iO),n._called_load?i._wD(s+"ignoring request to load again: "+t.sID):(i._wD(s+"load: "+t.sID),t._html5_canplay=!1,n.load(),n._called_load=!0,t._iO.autoPlay&&t.play());else try{t.isHTML5=!1,t._iO=Z(Y(t._iO)),l===8?i.o._load(t.sID,t._iO.url,t._iO.stream,t._iO.autoPlay,t._iO.whileloading?1:0,t._iO.loops||1,t._iO.usePolicyFile):i.o._load(t.sID,t._iO.url,t._iO.stream?!0:!1,t._iO.autoPlay?!0:!1,t._iO.loops||1,t._iO.autoLoad?!0:!1,t._iO.usePolicyFile)}catch(r){S("smError",2),m("onload",!1),I({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}return t},this.unload=function(){return t.readyState!==0&&(i._wD(\'SMSound.unload(): "\'+t.sID+\'"\'),t.isHTML5?(r(),t._a&&(t._a.pause(),t._a.src="")):l===8?i.o._unload(t.sID,i.nullURL):i.o._unload(t.sID),n()),t},this.destruct=function(e){i._wD(\'SMSound.destruct(): "\'+t.sID+\'"\'),t.isHTML5?(r(),t._a&&(t._a.pause(),t._a.src="",vt||t._remove_html5_events(),t._a._t=null,t._a=null)):(t._iO.onfailure=null,i.o._destroySound(t.sID)),e||i.destroySound(t.sID,!0)},this.start=this.play=function(e,n){var r,n=n===void 0?!0:n;e||(e={}),t._iO=N(e,t._iO),t._iO=N(t._iO,t.options),t.instanceOptions=t._iO;if(t._iO.serverURL&&!t.connected)return t.getAutoPlay()||(i._wD("SMSound.play():  Netstream not connected yet - setting autoPlay"),t.setAutoPlay(!0)),t;at(t._iO)&&(t._setup_html5(t._iO),o());if(t.playState===1&&!t.paused){if(!(r=t._iO.multiShot))return i._wD(\'SMSound.play(): "\'+t.sID+\'" already playing (one-shot)\',1),t;i._wD(\'SMSound.play(): "\'+t.sID+\'" already playing (multi-shot)\',1)}if(t.loaded)i._wD(\'SMSound.play(): "\'+t.sID+\'"\');else if(t.readyState===0)i._wD(\'SMSound.play(): Attempting to load "\'+t.sID+\'"\',1),t.isHTML5||(t._iO.autoPlay=!0),t.load(t._iO);else{if(t.readyState===2)return i._wD(\'SMSound.play(): Could not load "\'+t.sID+\'" - exiting\',2),t;i._wD(\'SMSound.play(): "\'+t.sID+\'" is loading - attempting to play..\',1)}return!t.isHTML5&&l===9&&t.position>0&&t.position===t.duration&&(i._wD(\'SMSound.play(): "\'+t.sID+\'": Sound at end, resetting to position:0\'),t._iO.position=0),t.paused&&t.position&&t.position>0?(i._wD(\'SMSound.play(): "\'+t.sID+\'" is resuming from paused state\',1),t.resume()):(i._wD(\'SMSound.play(): "\'+t.sID+\'" is starting to play\'),t.playState=1,t.paused=!1,(!t.instanceCount||t._iO.multiShotEvents||!t.isHTML5&&l>8&&!t.getAutoPlay())&&t.instanceCount++,t.position=typeof t._iO.position!="undefined"&&!isNaN(t._iO.position)?t._iO.position:0,t.isHTML5||(t._iO=Z(Y(t._iO))),t._iO.onplay&&n&&(t._iO.onplay.apply(t),t._onplay_called=!0),t.setVolume(t._iO.volume,!0),t.setPan(t._iO.pan,!0),t.isHTML5?(o(),r=t._setup_html5(),t.setPosition(t._iO.position),r.play()):i.o._start(t.sID,t._iO.loops||1,l===9?t._iO.position:t._iO.position/1e3)),t},this.stop=function(e){return t.playState===1&&(t._onbufferchange(0),t.resetOnPosition(0),t.isHTML5||(t.playState=0),t.paused=!1,t._iO.onstop&&t._iO.onstop.apply(t),t.isHTML5?t._a&&(t.setPosition(0),t._a.pause(),t.playState=0,t._onTimer(),r(),t.unload()):(i.o._stop(t.sID,e),t._iO.serverURL&&t.unload()),t.instanceCount=0,t._iO={}),t},this.setAutoPlay=function(e){i._wD("sound "+t.sID+" turned autoplay "+(e?"on":"off")),t._iO.autoPlay=e,t.isHTML5||(i.o._setAutoPlay(t.sID,e),e&&!t.instanceCount&&t.readyState===1&&(t.instanceCount++,i._wD("sound "+t.sID+" incremented instance count to "+t.instanceCount)))},this.getAutoPlay=function(){return t._iO.autoPlay},this.setPosition=function(e){e===void 0&&(e=0);var n=t.isHTML5?Math.max(e,0):Math.min(t.duration||t._iO.duration,Math.max(e,0));t.position=n,e=t.position/1e3,t.resetOnPosition(t.position),t._iO.position=n;if(t.isHTML5){if(t._a)if(t._html5_canplay){if(t._a.currentTime!==e){i._wD("setPosition("+e+"): setting position");try{t._a.currentTime=e,(t.playState===0||t.paused)&&t._a.pause()}catch(r){i._wD("setPosition("+e+"): setting position failed: "+r.message,2)}}}else i._wD("setPosition("+e+"): delaying, sound not ready")}else e=l===9?t.position:e,t.readyState&&t.readyState!==2&&i.o._setPosition(t.sID,e,t.paused||!t.playState);return t.isHTML5&&t.paused&&t._onTimer(!0),t},this.pause=function(e){return t.paused||t.playState===0&&t.readyState!==1?t:(i._wD("SMSound.pause()"),t.paused=!0,t.isHTML5?(t._setup_html5().pause(),r()):(e||e===void 0)&&i.o._pause(t.sID),t._iO.onpause&&t._iO.onpause.apply(t),t)},this.resume=function(){return t.paused?(i._wD("SMSound.resume()"),t.paused=!1,t.playState=1,t.isHTML5?(t._setup_html5().play(),o()):(t._iO.isMovieStar&&t.setPosition(t.position),i.o._pause(t.sID)),!t._onplay_called&&t._iO.onplay?(t._iO.onplay.apply(t),t._onplay_called=!0):t._iO.onresume&&t._iO.onresume.apply(t),t):t},this.togglePause=function(){return i._wD("SMSound.togglePause()"),t.playState===0?(t.play({position:l===9&&!t.isHTML5?t.position:t.position/1e3}),t):(t.paused?t.resume():t.pause(),t)},this.setPan=function(e,n){return typeof e=="undefined"&&(e=0),typeof n=="undefined"&&(n=!1),t.isHTML5||i.o._setPan(t.sID,e),t._iO.pan=e,n||(t.pan=e,t.options.pan=e),t},this.setVolume=function(e,n){return typeof e=="undefined"&&(e=100),typeof n=="undefined"&&(n=!1),t.isHTML5?t._a&&(t._a.volume=Math.max(0,Math.min(1,e/100))):i.o._setVolume(t.sID,i.muted&&!t.muted||t.muted?0:e),t._iO.volume=e,n||(t.volume=e,t.options.volume=e),t},this.mute=function(){return t.muted=!0,t.isHTML5?t._a&&(t._a.muted=!0):i.o._setVolume(t.sID,0),t},this.unmute=function(){t.muted=!1;var e=typeof t._iO.volume!="undefined";return t.isHTML5?t._a&&(t._a.muted=!1):i.o._setVolume(t.sID,e?t._iO.volume:t.options.volume),t},this.toggleMute=function(){return t.muted?t.unmute():t.mute()},this.onposition=function(e,n,r){return t._onPositionItems.push({position:e,method:n,scope:typeof r!="undefined"?r:t,fired:!1}),t},this.processOnPosition=function(){var e,n;e=t._onPositionItems.length;if(!e||!t.playState||t._onPositionFired>=e)return!1;for(;e--;)n=t._onPositionItems[e],!n.fired&&t.position>=n.position&&(n.method.apply(n.scope,[n.position]),n.fired=!0,i._onPositionFired++);return!0},this.resetOnPosition=function(e){var n,r;n=t._onPositionItems.length;if(!n)return!1;for(;n--;)r=t._onPositionItems[n],r.fired&&e<=r.position&&(r.fired=!1,i._onPositionFired--);return!0},o=function(){t.isHTML5&&it(t)},r=function(){t.isHTML5&&st(t)},n=function(){t._onPositionItems=[],t._onPositionFired=0,t._hasTimer=null,t._onplay_called=!1,t._a=null,t._html5_canplay=!1,t.bytesLoaded=null,t.bytesTotal=null,t.position=null,t.duration=t._iO&&t._iO.duration?t._iO.duration:null,t.durationEstimate=null,t.failures=0,t.loaded=!1,t.playState=0,t.paused=!1,t.readyState=0,t.muted=!1,t.didBeforeFinish=!1,t.didJustBeforeFinish=!1,t.isBuffering=!1,t.instanceOptions={},t.instanceCount=0,t.peakData={left:0,right:0},t.waveformData={left:[],right:[]},t.eqData=[],t.eqData.left=[],t.eqData.right=[]},n(),this._onTimer=function(e){var n={};if(t._hasTimer||e)return t._a&&(e||(t.playState>0||t.readyState===1)&&!t.paused)?(t.duration=t._get_html5_duration(),t.durationEstimate=t.duration,e=t._a.currentTime?t._a.currentTime*1e3:0,t._whileplaying(e,n,n,n,n),!0):(i._wD(\'_onTimer: Warn for "\'+t.sID+\'": \'+(t._a?"":"Could not find element. ")+(t.playState===0?"playState bad, 0?":"playState = "+t.playState+", OK")),!1)},this._get_html5_duration=function(){var e=t._a?t._a.duration*1e3:t._iO?t._iO.duration:void 0;return e&&!isNaN(e)&&e!==Infinity?e:t._iO?t._iO.duration:null},this._setup_html5=function(e){var e=N(t._iO,e),r=vt?i._global_a:t._a,s=decodeURI(e.url),o=r&&r._t?r._t.instanceOptions:null;if(r){if(r._t&&o.url===e.url&&(!t._lastURL||t._lastURL===o.url))return r;i._wD("setting new URL on existing object: "+s+(t._lastURL?", old URL: "+t._lastURL:"")),vt&&r._t&&r._t.playState&&e.url!==o.url&&r._t.stop(),n(),r.src=e.url,t.url=e.url,t._lastURL=e.url,r._called_load=!1}else i._wD("creating HTML5 Audio() element with URL: "+s),r=new Audio(e.url),r._called_load=!1,vt&&(i._global_a=r);return t.isHTML5=!0,t._a=r,r._t=t,t._add_html5_events(),r.loop=e.loops>1?"loop":"",e.autoLoad||e.autoPlay?(r.autobuffer="auto",r.preload="auto",t.load(),r._called_load=!0):(r.autobuffer=!1,r.preload="none"),r.loop=e.loops>1?"loop":"",r},this._add_html5_events=function(){if(t._a._added_events)return!1;var e;i._wD(s+"adding event listeners: "+t.sID),t._a._added_events=!0;for(e in bt)bt.hasOwnProperty(e)&&t._a&&t._a.addEventListener(e,bt[e],!1);return!0},this._remove_html5_events=function(){var e;i._wD(s+"removing event listeners: "+t.sID),t._a._added_events=!1;for(e in bt)bt.hasOwnProperty(e)&&t._a&&t._a.removeEventListener(e,bt[e],!1)},this._onload=function(e){return e=e?!0:!1,i._wD(\'SMSound._onload(): "\'+t.sID+\'"\'+(e?" loaded.":" failed to load? - "+t.url),e?1:2),!e&&!t.isHTML5&&(i.sandbox.noRemote===!0&&i._wD("SMSound._onload(): "+J("noNet"),1),i.sandbox.noLocal===!0&&i._wD("SMSound._onload(): "+J("noLocal"),1)),t.loaded=e,t.readyState=e?3:2,t._onbufferchange(0),t._iO.onload&&t._iO.onload.apply(t,[e]),!0},this._onbufferchange=function(e){return t.playState===0||e&&t.isBuffering||!e&&!t.isBuffering?!1:(t.isBuffering=e===1,t._iO.onbufferchange&&(i._wD("SMSound._onbufferchange(): "+e),t._iO.onbufferchange.apply(t)),!0)},this._onfailure=function(e,n,r){t.failures++,i._wD(\'SMSound._onfailure(): "\'+t.sID+\'" count \'+t.failures),t._iO.onfailure&&t.failures===1?t._iO.onfailure(t,e,n,r):i._wD("SMSound._onfailure(): ignoring")},this._onbeforefinish=function(){t.didBeforeFinish||(t.didBeforeFinish=!0,t._iO.onbeforefinish&&(i._wD(\'SMSound._onbeforefinish(): "\'+t.sID+\'"\'),t._iO.onbeforefinish.apply(t)))},this._onjustbeforefinish=function(){t.didJustBeforeFinish||(t.didJustBeforeFinish=!0,t._iO.onjustbeforefinish&&(i._wD(\'SMSound._onjustbeforefinish(): "\'+t.sID+\'"\'),t._iO.onjustbeforefinish.apply(t)))},this._onfinish=function(){var e=t._iO.onfinish;t._onbufferchange(0),t.resetOnPosition(0),t._iO.onbeforefinishcomplete&&t._iO.onbeforefinishcomplete.apply(t),t.didBeforeFinish=!1,t.didJustBeforeFinish=!1,t.instanceCount&&(t.instanceCount--,t.instanceCount||(t.playState=0,t.paused=!1,t.instanceCount=0,t.instanceOptions={},t._iO={},r()),(!t.instanceCount||t._iO.multiShotEvents)&&e&&(i._wD(\'SMSound._onfinish(): "\'+t.sID+\'"\'),e.apply(t)))},this._whileloading=function(e,n,r,i){t.bytesLoaded=e,t.bytesTotal=n,t.duration=Math.floor(r),t.bufferLength=i,t._iO.isMovieStar?t.durationEstimate=t.duration:(t.durationEstimate=t._iO.duration?t.duration>t._iO.duration?t.duration:t._iO.duration:parseInt(t.bytesTotal/t.bytesLoaded*t.duration,10),t.durationEstimate===void 0&&(t.durationEstimate=t.duration)),t.readyState!==3&&t._iO.whileloading&&t._iO.whileloading.apply(t)},this._whileplaying=function(e,n,r,s,o){return isNaN(e)||e===null?!1:(t.position=e,t.processOnPosition(),!t.isHTML5&&l>8&&(t._iO.usePeakData&&typeof n!="undefined"&&n&&(t.peakData={left:n.leftPeak,right:n.rightPeak}),t._iO.useWaveformData&&typeof r!="undefined"&&r&&(t.waveformData={left:r.split(","),right:s.split(",")}),t._iO.useEQData&&typeof o!="undefined"&&o&&o.leftEQ&&(e=o.leftEQ.split(","),t.eqData=e,t.eqData.left=e,typeof o.rightEQ!="undefined"&&o.rightEQ&&(t.eqData.right=o.rightEQ.split(",")))),t.playState===1&&(!t.isHTML5&&i.flashVersion===8&&!t.position&&t.isBuffering&&t._onbufferchange(0),t._iO.whileplaying&&t._iO.whileplaying.apply(t),(t.loaded||!t.loaded&&t._iO.isMovieStar)&&t._iO.onbeforefinish&&t._iO.onbeforefinishtime&&!t.didBeforeFinish&&t.duration-t.position<=t._iO.onbeforefinishtime&&t._onbeforefinish()),!0)},this._onid3=function(e,n){i._wD(\'SMSound._onid3(): "\'+this.sID+\'" ID3 data received.\');var r=[],s,o;s=0;for(o=e.length;s<o;s++)r[e[s]]=n[s];t.id3=N(t.id3,r),t._iO.onid3&&t._iO.onid3.apply(t)},this._onconnect=function(e){e=e===1,i._wD(\'SMSound._onconnect(): "\'+t.sID+\'"\'+(e?" connected.":" failed to connect? - "+t.url),e?1:2);if(t.connected=e)t.failures=0,tt(t.sID)&&(t.getAutoPlay()?t.play(void 0,t.getAutoPlay()):t._iO.autoLoad&&t.load()),t._iO.onconnect&&t._iO.onconnect.apply(t,[e])},this._ondataerror=function(e){t.playState>0&&(i._wD("SMSound._ondataerror(): "+e),t._iO.ondataerror&&t._iO.ondataerror.apply(t))}},j=function(){return c.body||c._docElement||c.getElementsByTagName("div")[0]},o=function(e){return c.getElementById(e)},N=function(e,t){var n={},r,s;for(r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);r=typeof t=="undefined"?i.defaultOptions:t;for(s in r)r.hasOwnProperty(s)&&typeof n[s]=="undefined"&&(n[s]=r[s]);return n},pt=function(){function e(e){var e=dt.call(e),t=e.length;return n?(e[1]="on"+e[1],t>3&&e.pop()):t===3&&e.push(!1),e}function t(e,t){var i=e.shift(),s=[r[t]];n?i[s](e[0],e[1]):i[s].apply(i,e)}var n=a.attachEvent,r={add:n?"attachEvent":"addEventListener",remove:n?"detachEvent":"removeEventListener"};return{add:function(){t(e(arguments),"add")},remove:function(){t(e(arguments),"remove")}}}(),at=function(e){return!e.serverURL&&(e.type?ft({type:e.type}):ft({url:e.url})||i.html5Only)},ft=function(e){function t(e){return i.preferFlash&&mt&&!i.ignoreFlash&&typeof i.flash[e]!="undefined"&&i.flash[e]}if(!i.useHTML5Audio||!i.hasHTML5)return!1;var n=e.url||null,e=e.type||null,r=i.audioFormats,s;if(e&&i.html5[e]!=="undefined")return i.html5[e]&&!t(e);if(!lt){lt=[];for(s in r)r.hasOwnProperty(s)&&(lt.push(s),r[s].related&&(lt=lt.concat(r[s].related)));lt=RegExp("\\\\.("+lt.join("|")+")(\\\\?.*)?$","i")}s=n?n.toLowerCase().match(lt):null;if(!s||!s.length){if(!e)return!1;n=e.indexOf(";"),s=(n!==-1?e.substr(0,n):e).substr(6)}else s=s[1];return s&&typeof i.html5[s]!="undefined"?i.html5[s]&&!t(s):(e="audio/"+s,n=i.html5.canPlayType({type:e}),(i.html5[s]=n)&&i.html5[e]&&!t(e))},ht=function(){function e(e){var n,r,s=!1;if(!t||typeof t.canPlayType!="function")return!1;if(e instanceof Array){n=0;for(r=e.length;n<r&&!s;n++)if(i.html5[e[n]]||t.canPlayType(e[n]).match(i.html5Test))s=!0,i.html5[e[n]]=!0,i.flash[e[n]]=!(!i.preferFlash||!mt||!e[n].match(_t));return s}return e=t&&typeof t.canPlayType=="function"?t.canPlayType(e):!1,!!e&&!!e.match(i.html5Test)}if(!i.useHTML5Audio||typeof Audio=="undefined")return!1;var t=typeof Audio!="undefined"?Ct?new Audio(null):new Audio:null,n,r={},s,o;s=i.audioFormats;for(n in s)if(s.hasOwnProperty(n)){r[n]=e(s[n].type),r["audio/"+n]=r[n],i.flash[n]=i.preferFlash&&!i.ignoreFlash&&n.match(_t)?!0:!1;if(s[n]&&s[n].related)for(o=s[n].related.length;o--;)r["audio/"+s[n].related[o]]=r[n],i.html5[s[n].related[o]]=r[n],i.flash[s[n].related[o]]=r[n]}return r.canPlayType=t?e:null,i.html5=N(i.html5,r),!0},D={notReady:"Not loaded yet - wait for soundManager.onload()/onready()",notOK:"Audio support is not available.",domError:"soundManager::createMovie(): appendChild/innerHTML call failed. DOM not ready or other error.",spcWmode:"soundManager::createMovie(): Removing wmode, preventing known SWF loading issue(s)",swf404:"soundManager: Verify that %s is a valid path.",tryDebug:"Try soundManager.debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:"soundManager: Non-HTTP page ("+c.location.protocol+" URL?) Review Flash player security settings for this special case:\\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:"soundManager: Special case: Waiting for focus-related event..",waitImpatient:"soundManager: Getting impatient, still waiting for Flash%s...",waitForever:"soundManager: Waiting indefinitely for Flash (will recover if unblocked)...",needFunction:"soundManager: Function object expected for %s",badID:\'Warning: Sound ID "%s" should be a string, starting with a non-numeric character\',noMS:"MovieStar mode not enabled. Exiting.",currentObj:"--- soundManager._debug(): Current sound objects ---",waitEI:"soundManager::initMovie(): Waiting for ExternalInterface call from Flash..",waitOnload:"soundManager: Waiting for window.onload()",docLoaded:"soundManager: Document already loaded",onload:"soundManager::initComplete(): calling soundManager.onload()",onloadOK:"soundManager.onload() complete",init:"soundManager::init()",didInit:"soundManager::init(): Already called?",flashJS:"soundManager: Attempting to call Flash from JS..",noPolling:"soundManager: Polling (whileloading()/whileplaying() support) is disabled.",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:"Warning: Failed to remove flash movie.",noPeak:"Warning: peakData features unsupported for movieStar formats",shutdown:"soundManager.disable(): Shutting down",queue:"soundManager: Queueing %s handler",smFail:"soundManager: Failed to initialise.",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+i.swfCSS.swfTimedout+" CSS..",fbLoaded:"Flash loaded",fbHandler:"soundManager::flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:"soundManager.load(): current URL already assigned.",badFV:\'soundManager.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.\',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",mfOn:"mobileFlash::enabling on-screen flash repositioning",policy:"Enabling usePolicyFile for data access"},J=function(){var e=dt.call(arguments),t=e.shift(),t=D&&D[t]?D[t]:"",n,r;if(t&&e&&e.length){n=0;for(r=e.length;n<r;n++)t=t.replace("%s",e[n])}return t},Y=function(e){return l===8&&e.loops>1&&e.stream&&(S("as2loop"),e.stream=!1),e},Z=function(e,t){return e&&!e.usePolicyFile&&(e.onid3||e.usePeakData||e.useWaveformData||e.useEQData)&&(i._wD((t||"")+J("policy")),e.usePolicyFile=!0),e},et=function(e){typeof console!="undefined"&&typeof console.warn!="undefined"?console.warn(e):i._wD(e)},h=function(){return!1},z=function(e){for(var t in e)e.hasOwnProperty(t)&&typeof e[t]=="function"&&(e[t]=h)},W=function(e){typeof e=="undefined"&&(e=!1);if(w||e)S("smFail",2),i.disable(e)},X=function(e){var t=null;if(e)if(e.match(/\\.swf(\\?.*)?$/i)){if(t=e.substr(e.toLowerCase().lastIndexOf(".swf?")+4))return e}else e.lastIndexOf("/")!==e.length-1&&(e+="/");return(e&&e.lastIndexOf("/")!==-1?e.substr(0,e.lastIndexOf("/")+1):"./")+i.movieURL},M=function(){l!==8&&l!==9&&(i._wD(J("badFV",l,8)),i.flashVersion=8);var e=i.debugMode||i.debugFlash?"_debug.swf":".swf";i.useHTML5Audio&&!i.html5Only&&i.audioFormats.mp4.required&&i.flashVersion<9&&(i._wD(J("needfl9")),i.flashVersion=9),l=i.flashVersion,i.version=i.versionNumber+(i.html5Only?" (HTML5-only mode)":l===9?" (AS3/Flash 9)":" (AS2/Flash 8)"),l>8&&(i.defaultOptions=N(i.defaultOptions,i.flash9Options),i.features.buffering=!0),l>8&&i.useMovieStar?(i.defaultOptions=N(i.defaultOptions,i.movieStarOptions),i.filePatterns.flash9=RegExp("\\\\.(mp3|"+i.netStreamTypes.join("|")+")(\\\\?.*)?$","i"),i.mimePattern=i.netStreamMimeTypes,i.features.movieStar=!0):(i.useMovieStar=!1,i.features.movieStar=!1),i.filePattern=i.filePatterns[l!==8?"flash9":"flash8"],i.movieURL=(l===8?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",e),i.features.peakData=i.features.waveformData=i.features.eqData=l>8},q=function(e,t){if(!i.o||!i.allowPolling)return!1;i.o._setPolling(e,t)},R=function(){i.debugURLParam.test(f)&&(i.debugMode=!0);if(o(i.debugID))return!1;var e,t,n,r;if(i.debugMode&&!o(i.debugID)&&(!Lt||!i.useConsole||i.useConsole&&Lt&&!i.consoleOnly)){e=c.createElement("div"),e.id=i.debugID+"-toggle",t={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001},e.appendChild(c.createTextNode("-")),e.onclick=G,e.title="Toggle SM2 debug console",u.match(/msie 6/i)&&(e.style.position="absolute",e.style.cursor="hand");for(r in t)t.hasOwnProperty(r)&&(e.style[r]=t[r]);t=c.createElement("div"),t.id=i.debugID,t.style.display=i.debugMode?"block":"none";if(i.debugMode&&!o(e.id)){try{n=j(),n.appendChild(e)}catch(s){throw Error(J("domError")+" \\n"+s.toString())}n.appendChild(t)}}},tt=this.getSoundById,S=function(e,t){return e?i._wD(J(e),t):""},f.indexOf("sm2-debug=alert")+1&&i.debugMode&&(i._wD=function(e){window.alert(e)}),G=function(){var e=o(i.debugID),t=o(i.debugID+"-toggle");if(!e)return!1;v?(t.innerHTML="+",e.style.display="none"):(t.innerHTML="-",e.style.display="block"),v=!v},m=function(e,t,n){if(typeof sm2Debugger!="undefined")try{sm2Debugger.handleEvent(e,t,n)}catch(r){}return!0},Q=function(){var e=[];return i.debugMode&&e.push(i.swfCSS.sm2Debug),i.debugFlash&&e.push(i.swfCSS.flashDebug),i.useHighPerformance&&e.push(i.swfCSS.highPerf),e.join(" ")},K=function(){var e=J("fbHandler"),t=i.getMoviePercent(),n=i.swfCSS,r={type:"FLASHBLOCK"};if(i.html5Only)return!1;i.ok()?(i.didFlashBlock&&i._wD(e+": Unblocked"),i.oMC&&(i.oMC.className=[Q(),n.swfDefault,n.swfLoaded+(i.didFlashBlock?" "+n.swfUnblocked:"")].join(" "))):(ot&&(i.oMC.className=Q()+" "+n.swfDefault+" "+(t===null?n.swfTimedout:n.swfError),i._wD(e+": "+J("fbTimeout")+(t?" ("+J("fbLoaded")+")":""))),i.didFlashBlock=!0,k({type:"ontimeout",ignoreInit:!0,error:r}),I(r))},C=function(e,t,n){typeof d[e]=="undefined"&&(d[e]=[]),d[e].push({method:t,scope:n||null,fired:!1})},k=function(e){e||(e={type:"onready"});if(!b&&e&&!e.ignoreInit||e.type==="ontimeout"&&i.ok())return!1;var t={success:e&&e.ignoreInit?i.ok():!w},n=e&&e.type?d[e.type]||[]:[],r=[],s,o=[t],u=ot&&i.useFlashBlock&&!i.ok();e.error&&(o[0].error=e.error),t=0;for(s=n.length;t<s;t++)n[t].fired!==!0&&r.push(n[t]);if(r.length){i._wD("soundManager: Firing "+r.length+" "+e.type+"() item"+(r.length===1?"":"s")),t=0;for(s=r.length;t<s;t++)r[t].scope?r[t].method.apply(r[t].scope,o):r[t].method.apply(this,o),u||(r[t].fired=!0)}return!0},L=function(){a.setTimeout(function(){i.useFlashBlock&&K(),k(),i.onload instanceof Function&&(S("onload",1),i.onload.apply(a),S("onloadOK",1)),i.waitForWindowLoad&&pt.add(a,"load",L)},1)},gt=function(){if(mt!==void 0)return mt;var e=!1,t=navigator,n=t.plugins,r,i=a.ActiveXObject;if(n&&n.length)(t=t.mimeTypes)&&t["application/x-shockwave-flash"]&&t["application/x-shockwave-flash"].enabledPlugin&&t["application/x-shockwave-flash"].enabledPlugin.description&&(e=!0);else if(typeof i!="undefined"){try{r=new i("ShockwaveFlash.ShockwaveFlash")}catch(s){}e=!!r}return mt=e},ut=function(){var e,t;if(u.match(/iphone os (1|2|3_0|3_1)/i))return i.hasHTML5=!1,i.html5Only=!0,i.oMC&&(i.oMC.style.display="none"),!1;if(!i.useHTML5Audio)return!0;if(!i.html5||!i.html5.canPlayType)return i._wD("SoundManager: No HTML5 Audio() support detected."),i.hasHTML5=!1,!0;i.hasHTML5=!0;if(kt){i._wD("soundManager::Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(mt?"will use flash fallback for MP3/MP4, if available":" would use flash fallback for MP3/MP4, but none detected."),1);if(gt())return!0}for(t in i.audioFormats)i.audioFormats.hasOwnProperty(t)&&(i.audioFormats[t].required&&!i.html5.canPlayType(i.audioFormats[t].type)||i.flash[t]||i.flash[i.audioFormats[t].type])&&(e=!0);return i.ignoreFlash&&(e=!1),i.html5Only=i.hasHTML5&&i.useHTML5Audio&&!e,!i.html5Only},it=function(e){e._hasTimer||(e._hasTimer=!0)},st=function(e){e._hasTimer&&(e._hasTimer=!1)},I=function(e){e=typeof e!="undefined"?e:{},i.onerror instanceof Function&&i.onerror.apply(a,[{type:typeof e.type!="undefined"?e.type:null}]),typeof e.fatal!="undefined"&&e.fatal&&i.disable()},yt=function(){if(!kt||!gt())return!1;var e=i.audioFormats,t,n;for(n in e)if(e.hasOwnProperty(n)&&(n==="mp3"||n==="mp4")){i._wD("soundManager: Using flash fallback for "+n+" format"),i.html5[n]=!1;if(e[n]&&e[n].related)for(t=e[n].related.length;t--;)i.html5[e[n].related[t]]=!1}},this._setSandboxType=function(e){var t=i.sandbox;t.type=e,t.description=t.types[typeof t.types[e]!="undefined"?e:"unknown"],i._wD("Flash security sandbox type: "+t.type),t.type==="localWithFile"?(t.noRemote=!0,t.noLocal=!1,S("secNote",2)):t.type==="localWithNetwork"?(t.noRemote=!1,t.noLocal=!0):t.type==="localTrusted"&&(t.noRemote=!1,t.noLocal=!1)},this._externalInterfaceOK=function(e){if(i.swfLoaded)return!1;var t=(new Date).getTime();i._wD("soundManager::externalInterfaceOK()"+(e?" (~"+(t-e)+" ms)":"")),m("swf",!0),m("flashtojs",!0),i.swfLoaded=!0,Ot=!1,kt&&yt(),xt?setTimeout(p,100):p()},F=function(e,t){function n(){i._wD("-- SoundManager 2 "+i.version+(!i.html5Only&&i.useHTML5Audio?i.hasHTML5?" + HTML5 audio":", no HTML5 audio support":"")+(i.html5Only?"":(i.useMovieStar?", MovieStar mode":"")+(i.useHighPerformance?", high performance mode, ":", ")+((i.flashPollingInterval?"custom ("+i.flashPollingInterval+"ms)":i.useFastPolling?"fast":"normal")+" polling")+(i.wmode?", wmode: "+i.wmode:"")+(i.debugFlash?", flash debug mode":"")+(i.useFlashBlock?", flashBlock mode":""))+" --",1)}function r(e,t){return\'<param name="\'+e+\'" value="\'+t+\'" />\'}if(g&&y)return!1;if(i.html5Only)return M(),n(),i.oMC=o(i.movieID),p(),y=g=!0,!1;var s=t||i.url,a=i.altURL||s,f;f=j();var l,h,d=Q(),v,m=null,m=(m=c.getElementsByTagName("html")[0])&&m.dir&&m.dir.match(/rtl/i),e=typeof e=="undefined"?i.id:e;M(),i.url=X(Dt?s:a),t=i.url,i.wmode=!i.wmode&&i.useHighPerformance&&!i.useMovieStar?"transparent":i.wmode,i.wmode!==null&&(u.match(/msie 8/i)||!xt&&!i.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(i.specialWmodeCase=!0,S("spcWmode"),i.wmode=null),f={name:e,id:e,src:t,width:"auto",height:"auto",quality:"high",allowScriptAccess:i.allowScriptAccess,bgcolor:i.bgColor,pluginspage:Pt+"//www.macromedia.com/go/getflashplayer",title:"JS/Flash audio component (SoundManager 2)",type:"application/x-shockwave-flash",wmode:i.wmode,hasPriority:"true"},i.debugFlash&&(f.FlashVars="debug=1"),i.wmode||delete f.wmode;if(xt)s=c.createElement("div"),h=[\'<object id="\'+e+\'" data="\'+t+\'" type="\'+f.type+\'" title="\'+f.title+\'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="\'+Pt+\'//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0" width="\'+f.width+\'" height="\'+f.height+\'">\',r("movie",t),r("AllowScriptAccess",i.allowScriptAccess),r("quality",f.quality),i.wmode?r("wmode",i.wmode):"",r("bgcolor",i.bgColor),r("hasPriority","true"),i.debugFlash?r("FlashVars",f.FlashVars):"","</object>"].join("");else{s=c.createElement("embed");for(l in f)f.hasOwnProperty(l)&&s.setAttribute(l,f[l])}R(),d=Q();if(f=j()){i.oMC=o(i.movieID)||c.createElement("div");if(i.oMC.id)v=i.oMC.className,i.oMC.className=(v?v+" ":i.swfCSS.swfDefault)+(d?" "+d:""),i.oMC.appendChild(s),xt&&(l=i.oMC.appendChild(c.createElement("div")),l.className=i.swfCSS.swfBox,l.innerHTML=h),y=!0;else{i.oMC.id=i.movieID,i.oMC.className=i.swfCSS.swfDefault+" "+d,l=d=null,i.useFlashBlock||(i.useHighPerformance?d={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(d={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},m&&(d.left=Math.abs(parseInt(d.left,10))+"px"))),Tt&&(i.oMC.style.zIndex=1e4);if(!i.debugFlash)for(v in d)d.hasOwnProperty(v)&&(i.oMC.style[v]=d[v]);try{xt||i.oMC.appendChild(s),f.appendChild(i.oMC),xt&&(l=i.oMC.appendChild(c.createElement("div")),l.className=i.swfCSS.swfBox,l.innerHTML=h),y=!0}catch(b){throw Error(J("domError")+" \\n"+b.toString())}}}return g=!0,n(),i._wD("soundManager::createMovie(): Trying to load "+t+(!Dt&&i.altURL?" (alternate URL)":""),1),!0},P=function(){return i.html5Only?(F(),!1):i.o?!1:(i.o=i.getMovie(i.id),i.o||(V?(xt?i.oMC.innerHTML=$:i.oMC.appendChild(V),V=null,g=!0):F(i.id,i.url),i.o=i.getMovie(i.id)),i.o&&S("waitEI"),i.oninitmovie instanceof Function&&setTimeout(i.oninitmovie,1),!0)},A=function(){setTimeout(O,1e3)},O=function(){if(nt)return!1;nt=!0,pt.remove(a,"load",A);if(Ot&&!At)return S("waitFocus"),!1;var e;b||(e=i.getMoviePercent(),i._wD(J("waitImpatient",e===100?" (SWF loaded)":e>0?" (SWF "+e+"% loaded)":""))),setTimeout(function(){e=i.getMoviePercent(),b||(i._wD("soundManager: No Flash response within expected time.\\nLikely causes: "+(e===0?"Loading "+i.movieURL+" may have failed (and/or Flash "+l+"+ not present?), ":"")+"Flash blocked or JS-Flash security error."+(i.debugFlash?" "+J("checkSWF"):""),2),!Dt&&e&&(S("localFail",2),i.debugFlash||S("tryDebug",2)),e===0&&i._wD(J("swf404",i.url)),m("flashtojs",!1,": Timed out"+Dt?" (Check flash security or flash blockers)":" (No plugin/missing SWF?)")),!b&&Mt&&(e===null?i.useFlashBlock||i.flashLoadTimeout===0?(i.useFlashBlock&&K(),S("waitForever")):W(!0):i.flashLoadTimeout===0?S("waitForever"):W(!0))},i.flashLoadTimeout)},_=function(){function e(){pt.remove(a,"focus",_),pt.remove(a,"load",_)}return At||!Ot?(e(),!0):(At=Mt=!0,i._wD("soundManager::handleFocus()"),Nt&&Ot&&pt.remove(a,"mousemove",_),nt=!1,e(),!0)},T=function(e){if(b)return!1;if(i.html5Only)return i._wD("-- SoundManager 2: loaded --"),b=!0,L(),m("onload",!0),!0;var t;if(!i.useFlashBlock||!i.flashLoadTimeout||i.getMoviePercent())b=!0,w&&(t={type:!mt&&ot?"NO_FLASH":"INIT_TIMEOUT"});return i._wD("-- SoundManager 2 "+(w?"failed to load":"loaded")+" ("+(w?"security/load error":"OK")+") --",1),w||e?(i.useFlashBlock&&i.oMC&&(i.oMC.className=Q()+" "+(i.getMoviePercent()===null?i.swfCSS.swfTimedout:i.swfCSS.swfError)),k({type:"ontimeout",error:t}),m("onload",!1),I(t),!1):(m("onload",!0),pt.add(a,"unload",h),i.waitForWindowLoad&&!E?(S("waitOnload"),pt.add(a,"load",L),!1):(i.waitForWindowLoad&&E&&S("docLoaded"),L(),!0))},wt=function(){var e,t=[];if(i.useHTML5Audio&&i.hasHTML5){for(e in i.audioFormats)i.audioFormats.hasOwnProperty(e)&&t.push(e+": "+i.html5[e]+(!i.html5[e]&&mt&&i.flash[e]?" (using flash)":i.preferFlash&&i.flash[e]&&mt?" (preferring flash)":i.html5[e]?"":" ("+(i.audioFormats[e].required?"required, ":"")+"and no flash support)"));i._wD("-- SoundManager 2: HTML5 support tests ("+i.html5Test+"): "+t.join(", ")+" --",1)}},p=function(){S("init");if(b)return S("didInit"),!1;if(i.html5Only)return b||(pt.remove(a,"load",i.beginDelayedInit),i.enabled=!0,T()),!0;P();try{S("flashJS"),i.o._externalInterfaceTest(!1),i.allowPolling?q(!0,i.flashPollingInterval||(i.useFastPolling?10:50)):S("noPolling",1),i.debugMode||i.o._disableDebug(),i.enabled=!0,m("jstoflash",!0)}catch(e){return i._wD("js/flash exception: "+e.toString()),m("jstoflash",!1),I({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),W(!0),T(),!1}return T(),pt.remove(a,"load",i.beginDelayedInit),!0},H=function(){if(B)return!1;B=!0,R();var e=f.toLowerCase(),t=null,t=null,n=typeof console!="undefined"&&typeof console.log!="undefined";return e.indexOf("sm2-usehtml5audio=")!==-1&&(t=e.charAt(e.indexOf("sm2-usehtml5audio=")+18)==="1",n&&console.log((t?"Enabling ":"Disabling ")+"useHTML5Audio via URL parameter"),i.useHTML5Audio=t),e.indexOf("sm2-preferflash=")!==-1&&(t=e.charAt(e.indexOf("sm2-preferflash=")+16)==="1",n&&console.log((t?"Enabling ":"Disabling ")+"preferFlash via URL parameter"),i.preferFlash=t),!mt&&i.hasHTML5&&(i._wD("SoundManager: No Flash detected"+(i.useHTML5Audio?". Trying HTML5-only mode.":", enabling HTML5.")),i.useHTML5Audio=!0,i.preferFlash=!1),ht(),i.html5.usingFlash=ut(),ot=i.html5.usingFlash,wt(),!mt&&ot&&(i._wD("SoundManager: Fatal error: Flash is needed to play some required formats, but is not available."),i.flashLoadTimeout=1),c.removeEventListener&&c.removeEventListener("DOMContentLoaded",H,!1),P(),!0},ct=function(){return c.readyState==="complete"&&(H(),c.detachEvent("onreadystatechange",ct)),!0},gt(),pt.add(a,"focus",_),pt.add(a,"load",_),pt.add(a,"load",A),Nt&&Ot&&pt.add(a,"mousemove",_),c.addEventListener?c.addEventListener("DOMContentLoaded",H,!1):c.attachEvent?c.attachEvent("onreadystatechange",ct):(m("onload",!1),I({type:"NO_DOM2_EVENTS",fatal:!0})),"complete"===c.readyState&&setTimeout(H,100)};',pre:!0},"sdk/jsio/util/underscore.js":{path:"sdk/jsio/util/underscore.js",friendlyPath:"util.underscore",directory:"sdk/jsio/util/",filename:"underscore.js",src:'(function(){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L;function e(t,n,r){var i,s,o,u;if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return t===n;t._chain&&(t=t._wrapped),n._chain&&(n=n._wrapped);if(E.isFunction(t.isEqual))return t.isEqual(n);if(E.isFunction(n.isEqual))return n.isEqual(t);i=typeof t;if(i!=typeof n||!t!=!n)return!1;if(E.isNaN(t))return E.isNaN(n);s=E.isString(t),o=E.isString(n);if(s||o)return s&&o&&""+t==""+n;s=E.isNumber(t),o=E.isNumber(n);if(s||o)return s&&o&&+t==+n;s=E.isBoolean(t),o=E.isBoolean(n);if(s||o)return s&&o&&+t==+n;s=E.isDate(t),o=E.isDate(n);if(s||o)return s&&o&&t.getTime()==n.getTime();s=E.isRegExp(t),o=E.isRegExp(n);if(s||o)return s&&o&&t.source==n.source&&t.global==n.global&&t.multiline==n.multiline&&t.ignoreCase==n.ignoreCase;if("object"!=i||t.length!==n.length||t.constructor!==n.constructor)return!1;for(i=r.length;i--;)if(r[i]==t)return!0;r.push(t);i=0,s=!0;for(u in t)if(f.call(t,u)&&(i++,!(s=f.call(n,u)&&e(t[u],n[u],r))))break;if(s){for(u in n)if(f.call(n,u)&&!(i--))break;s=!i}return r.pop(),s}t=this,n=t._,r={},i=Array.prototype,s=Object.prototype,o=i.slice,u=i.unshift,a=s.toString,f=s.hasOwnProperty,l=i.forEach,c=i.map,h=i.reduce,p=i.reduceRight,d=i.filter,v=i.every,m=i.some,g=i.indexOf,y=i.lastIndexOf,s=Array.isArray,b=Object.keys,w=Function.prototype.bind,E=function(e){return new C(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=E),exports._=E):"function"==typeof define&&define.amd?define("underscore",function(){return E}):t._=E,E.VERSION="1.2.1";S=E.each=E.forEach=function(e,t,n){if(e!=null)if(l&&e.forEach===l)e.forEach(t,n);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(i in e&&t.call(n,e[i],i,e)===r)break}else for(i in e)if(f.call(e,i)&&t.call(n,e[i],i,e)===r)break};E.map=function(e,t,n){var r=[];return e==null?r:c&&e.map===c?e.map(t,n):(S(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)},E.reduce=E.foldl=E.inject=function(e,t,n,r){var i=n!==void 0;e==null&&(e=[]);if(h&&e.reduce===h)return r&&(t=E.bind(t,r)),i?e.reduce(t,n):e.reduce(t);S(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError("Reduce of empty array with no initial value");return n},E.reduceRight=E.foldr=function(e,t,n,r){return e==null&&(e=[]),p&&e.reduceRight===p?(r&&(t=E.bind(t,r)),n!==void 0?e.reduceRight(t,n):e.reduceRight(t)):(e=(E.isArray(e)?e.slice():E.toArray(e)).reverse(),E.reduce(e,t,n,r))},E.find=E.detect=function(e,t,n){var r;return x(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},E.filter=E.select=function(e,t,n){var r=[];return e==null?r:d&&e.filter===d?e.filter(t,n):(S(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},E.reject=function(e,t,n){var r=[];return e==null?r:(S(e,function(e,i,s){t.call(n,e,i,s)||(r[r.length]=e)}),r)},E.every=E.all=function(e,t,n){var i=!0;return e==null?i:v&&e.every===v?e.every(t,n):(S(e,function(e,s,o){if(!(i=i&&t.call(n,e,s,o)))return r}),i)};x=E.some=E.any=function(e,t,n){var t=t||E.identity,i=!1;return e==null?i:m&&e.some===m?e.some(t,n):(S(e,function(e,s,o){if(i|=t.call(n,e,s,o))return r}),!!i)};E.include=E.contains=function(e,t){var n=!1;return e==null?n:g&&e.indexOf===g?e.indexOf(t)!=-1:n=x(e,function(e){if(e===t)return!0})},E.invoke=function(e,t){var n=o.call(arguments,2);return E.map(e,function(e){return(t.call?t||e:e[t]).apply(e,n)})},E.pluck=function(e,t){return E.map(e,function(e){return e[t]})},E.max=function(e,t,n){var r;if(!t&&E.isArray(e))return Math.max.apply(Math,e);if(!t&&E.isEmpty(e))return-Infinity;r={computed:-Infinity};return S(e,function(e,i,s){i=t?t.call(n,e,i,s):e,i>=r.computed&&(r={value:e,computed:i})}),r.value},E.min=function(e,t,n){var r;if(!t&&E.isArray(e))return Math.min.apply(Math,e);if(!t&&E.isEmpty(e))return Infinity;r={computed:Infinity};return S(e,function(e,i,s){i=t?t.call(n,e,i,s):e,i<r.computed&&(r={value:e,computed:i})}),r.value},E.shuffle=function(e){var n,t=[];return S(e,function(e,r){r==0?t[0]=e:(n=Math.floor(Math.random()*(r+1)),t[r]=t[n],t[n]=e)}),t},E.sortBy=function(e,t,n){return E.pluck(E.map(e,function(e,r,i){return{value:e,criteria:t.call(n,e,r,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;return n<r?-1:n>r?1:0}),"value")},E.groupBy=function(e,t){var n={},r=E.isFunction(t)?t:function(e){return e[t]};return S(e,function(e,t){var i=r(e,t);(n[i]||(n[i]=[])).push(e)}),n},E.sortedIndex=function(e,t,n){var r,i,s;n||(n=E.identity);for(r=0,i=e.length;r<i;){s=r+i>>1;n(e[s])<n(t)?r=s+1:i=s}return r},E.toArray=function(e){return e?e.toArray?e.toArray():E.isArray(e)||E.isArguments(e)?o.call(e):E.values(e):[]},E.size=function(e){return E.toArray(e).length},E.first=E.head=function(e,t,n){return t!=null&&!n?o.call(e,0,t):e[0]},E.initial=function(e,t,n){return o.call(e,0,e.length-(t==null||n?1:t))},E.last=function(e,t,n){return t!=null&&!n?o.call(e,e.length-t):e[e.length-1]},E.rest=E.tail=function(e,t,n){return o.call(e,t==null||n?1:t)},E.compact=function(e){return E.filter(e,function(e){return!!e})},E.flatten=function(e,t){return E.reduce(e,function(e,n){return E.isArray(n)?e.concat(t?n:E.flatten(n)):(e[e.length]=n,e)},[])},E.without=function(e){return E.difference(e,o.call(arguments,1))},E.uniq=E.unique=function(e,t,n){var n=n?E.map(e,n):e,r=[];return E.reduce(n,function(n,i,s){if(0==s||(t===!0?E.last(n)!=i:!E.include(n,i)))n[n.length]=i,r[r.length]=e[s];return n},[]),r},E.union=function(){return E.uniq(E.flatten(arguments,!0))},E.intersection=E.intersect=function(e){var t=o.call(arguments,1);return E.filter(E.uniq(e),function(e){return E.every(t,function(t){return E.indexOf(t,e)>=0})})},E.difference=function(e,t){return E.filter(e,function(e){return!E.include(t,e)})},E.zip=function(){var e,t,n,r;for(e=o.call(arguments),t=E.max(E.pluck(e,"length")),n=Array(t),r=0;r<t;r++)n[r]=E.pluck(e,""+r);return n},E.indexOf=function(e,t,n){var r;if(e==null)return-1;if(n)return n=E.sortedIndex(e,t),e[n]===t?n:-1;if(g&&e.indexOf===g)return e.indexOf(t);n=0;for(r=e.length;n<r;n++)if(e[n]===t)return n;return-1},E.lastIndexOf=function(e,t){var n;if(e==null)return-1;if(y&&e.lastIndexOf===y)return e.lastIndexOf(t);for(n=e.length;n--;)if(e[n]===t)return n;return-1},E.range=function(e,t,n){var n,r,i,s;arguments.length<=1&&(t=e||0,e=0);for(n=arguments[2]||1,r=Math.max(Math.ceil((t-e)/n),0),i=0,s=Array(r);i<r;)s[i++]=e,e+=n;return s};T=function(){};E.bind=function(e,t){var n,r;if(e.bind===w&&w)return w.apply(e,o.call(arguments,1));if(!E.isFunction(e))throw new TypeError;return r=o.call(arguments,2),n=function(){var i,s;if(this instanceof n){T.prototype=e.prototype;i=new T,s=e.apply(i,r.concat(o.call(arguments)));return Object(s)===s?s:i}return e.apply(t,r.concat(o.call(arguments)))}},E.bindAll=function(e){var t=o.call(arguments,1);return t.length==0&&(t=E.functions(e)),S(t,function(t){e[t]=E.bind(e[t],e)}),e},E.memoize=function(e,t){var n={};return t||(t=E.identity),function(){var r=t.apply(this,arguments);return f.call(n,r)?n[r]:n[r]=e.apply(this,arguments)}},E.delay=function(e,t){var n=o.call(arguments,2);return setTimeout(function(){return e.apply(e,n)},t)},E.defer=function(e){return E.delay.apply(E,[e,1].concat(o.call(arguments,1)))},E.throttle=function(e,t){var n,r,i,s,o;return o=E.debounce(function(){s=!1},t),function(){r=this,i=arguments,n||(n=setTimeout(function(){n=null,e.apply(r,i),o()},t)),s||e.apply(r,i),o&&o(),s=!0}},E.debounce=function(e,t){var n;return function(){var r=this,i=arguments;clearTimeout(n),n=setTimeout(function(){n=null,e.apply(r,i)},t)}},E.once=function(e){var n,t=!1;return function(){return t?n:(t=!0,n=e.apply(this,arguments))}},E.wrap=function(e,t){return function(){var n=[e].concat(o.call(arguments));return t.apply(this,n)}},E.compose=function(){var e=o.call(arguments);return function(){var t,n;for(t=o.call(arguments),n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},E.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},E.keys=b||function(e){var t,n;if(e!==Object(e))throw new TypeError("Invalid object");t=[];for(n in e)f.call(e,n)&&(t[t.length]=n);return t},E.values=function(e){return E.map(e,E.identity)},E.functions=E.methods=function(e){var n,t=[];for(n in e)E.isFunction(e[n])&&t.push(n);return t.sort()},E.extend=function(e){return S(o.call(arguments,1),function(t){var n;for(n in t)t[n]!==void 0&&(e[n]=t[n])}),e},E.defaults=function(e){return S(o.call(arguments,1),function(t){var n;for(n in t)e[n]==null&&(e[n]=t[n])}),e},E.clone=function(e){return E.isObject(e)?E.isArray(e)?e.slice():E.extend({},e):e},E.tap=function(e,t){return t(e),e},E.isEqual=function(t,n){return e(t,n,[])},E.isEmpty=function(e){var t;if(E.isArray(e)||E.isString(e))return e.length===0;for(t in e)if(f.call(e,t))return!1;return!0},E.isElement=function(e){return!!e&&e.nodeType==1},E.isArray=s||function(e){return a.call(e)=="[object Array]"},E.isObject=function(e){return e===Object(e)},E.isArguments="[object Arguments]"==a.call(arguments)?function(e){return a.call(e)=="[object Arguments]"}:function(e){return!!e&&!!f.call(e,"callee")},E.isFunction=function(e){return a.call(e)=="[object Function]"},E.isString=function(e){return a.call(e)=="[object String]"},E.isNumber=function(e){return a.call(e)=="[object Number]"},E.isNaN=function(e){return e!==e},E.isBoolean=function(e){return e===!0||e===!1||a.call(e)=="[object Boolean]"},E.isDate=function(e){return a.call(e)=="[object Date]"},E.isRegExp=function(e){return a.call(e)=="[object RegExp]"},E.isNull=function(e){return e===null},E.isUndefined=function(e){return e===void 0},E.noConflict=function(){return t._=n,this},E.identity=function(e){return e},E.times=function(e,t,n){var r;for(r=0;r<e;r++)t.call(n,r)},E.escape=function(e){return(""+e).replace(/&(?!\\w+;|#\\d+;|#x[\\da-f]+;)/gi,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/\'/g,"&#x27;").replace(/\\//g,"&#x2F;")},E.mixin=function(e){S(E.functions(e),function(t){L(t,E[t]=e[t])})};N=0;E.uniqueId=function(e){var t=N++;return e?e+t:t},E.templateSettings={evaluate:/<%([\\s\\S]+?)%>/g,interpolate:/<%=([\\s\\S]+?)%>/g,escape:/<%-([\\s\\S]+?)%>/g},E.template=function(e,t){var n=E.templateSettings;n="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push(\'"+e.replace(/\\\\/g,"\\\\\\\\").replace(/\'/g,"\\\\\'").replace(n.escape,function(e,t){return"\',_.escape("+t.replace(/\\\\\'/g,"\'")+"),\'"}).replace(n.interpolate,function(e,t){return"\',"+t.replace(/\\\\\'/g,"\'")+",\'"}).replace(n.evaluate||null,function(e,t){return"\');"+t.replace(/\\\\\'/g,"\'").replace(/[\\r\\n\\t]/g," ")+"__p.push(\'"}).replace(/\\r/g,"\\\\r").replace(/\\n/g,"\\\\n").replace(/\\t/g,"\\\\t")+"\');}return __p.join(\'\');",n=new Function("obj",n);return t?n(t):n};C=function(e){this._wrapped=e};E.prototype=C.prototype;k=function(e,t){return t?E(e).chain():e},L=function(e,t){C.prototype[e]=function(){var e=o.call(arguments);return u.call(e,this._wrapped),k(t.apply(E,e),this._chain)}};E.mixin(E),S("pop push reverse shift sort splice unshift".split(" "),function(e){var t=i[e];C.prototype[e]=function(){return t.apply(this._wrapped,arguments),k(this._wrapped,this._chain)}}),S(["concat","join","slice"],function(e){var t=i[e];C.prototype[e]=function(){return k(t.apply(this._wrapped,arguments),this._chain)}}),C.prototype.chain=function(){return this._chain=!0,this},C.prototype.value=function(){return this._wrapped}})()',pre:!0},"sdk/timestep/platforms/browser/initialize.js":{path:"sdk/timestep/platforms/browser/initialize.js",friendlyPath:"platforms.browser.initialize",directory:"sdk/timestep/platforms/browser/",filename:"initialize.js",baseMod:"platforms",basePath:"sdk/timestep/",src:'jsio("import device"),jsio("from util.browser import $"),device.registerDevice("browser","platforms.browser"),exports.init=function(){var e,t,n,r,i,s;if(device.isMobileBrowser){device.setUseDOM(!0);t=device.screen;if(device.isIOS||device.isAndroid){n=!1;window.addEventListener("focus",function(e){e=e.target.tagName;if("TEXTAREA"==e||"INPUT"==e)n=!0},!0),document.addEventListener("blur",function(){n&&(n=!1)},!0),device.hideAddressBar=function(){!n&&device.isMobileBrowser&&(device.isIOS||device.isAndroid)&&(device.isIOS?(window.scrollTo(0,1),window.scrollTo(0,0)):window.scrollTo(0,-1))},CONFIG.unlockViewport||window.addEventListener("touchstart",bind(device,"hideAddressBar"),!0)}e=function(){var e,n,o;device.isIOS&&device.hideAddressBar();e=window.outerWidth,n=window.outerHeight,o=window.orientation;(r!=e||i!=n||s!=o)&&(r=e,i=n,s=o,t.isPortrait=n>e,t.isLandscape=!t.isPortrait,e=window.innerWidth,n=window.innerHeight,device.width!=e||device.height!=n||device.orientation!=o)&&(device.width=e,device.height=n,device.orientation=o,device.screen.publish("Resize",device.width,device.height,device.orientation))}}else e=function(){var e=window.document,t=window.innerWidth||e.clientWidth||e.clientWidth;e=window.innerHeight||e.clientHeight||e.clientHeight;if(t!=device.width||e!=device.height)device.width=t,device.height=e,device.screen.width=t,device.screen.height=e,t>e?(device.screen.isPortrait=!1,device.screen.isLandscape=!0,device.screen.orientation="landscape"):(device.screen.isPortrait=!0,device.screen.isLandscape=!1,device.screen.orientation="portrait"),device.screen.publish("Resize",t,e)};$.onEvent(window,"resize",e,!1),$.onEvent(window,"orientationchange",e,!1),e()}',pre:!0},"sdk/timestep/platforms/browser/Input.js":{path:"sdk/timestep/platforms/browser/Input.js",friendlyPath:".Input",directory:"sdk/timestep/platforms/browser/",filename:"Input.js",src:'var eventTypes,UID,sdk_timestep_platforms_browser_Input;jsio("import device"),jsio("from util.browser import $"),jsio("import event.input.dispatch as input");eventTypes=input.eventTypes,UID=-1,sdk_timestep_platforms_browser_Input=__class__;exports=sdk_timestep_platforms_browser_Input(function(){return this.init&&this.init.apply(this,arguments)},function(){this.init=function(e){if(device.simulatingMobileNative||device.simulatingMobileBrowser)this._simulateMobile=!0;this._evtQueue=[],e.el&&(device.isMobileBrowser&&(this._toggleNode=$({parent:document.body})),this.setElement(e.el)),this._isOver=!1,this._keyListener=e.keyListener,device.useDOM&&$.onEvent(document,device.events.start,this,"handleMouse",eventTypes.START),this.enable(),this._hasFocus=!1,document.addEventListener&&(document.addEventListener("focus",bind(this,"onFocusCapture"),!0),document.addEventListener("blur",bind(this,"onBlurCapture"),!0))},this.enable=function(){this._handleMove=$.onEvent(document,device.events.move,this,"handleMouse",eventTypes.MOVE),this._handleSelect=$.onEvent(document,device.events.end,this,"handleMouse",eventTypes.SELECT),this._handleScroll=$.onEvent(window,"DOMMouseScroll",this,"handleMouse",eventTypes.SCROLL),this._handleWheel=$.onEvent(window,"mousewheel",this,"handleMouse",eventTypes.SCROLL)},this.disable=function(){this._handleMove&&(this._handleMove(),this._handleMove=!1),this._handleSelect&&(this._handleSelect(),this._handleSelect=!1),this._handleScroll&&(this._handleScroll(),this._handleScroll=!1),this._handleWheel&&(this._handleWheel(),this._handleWheel=!1)},this.onFocusCapture=function(e){var t=e.target.tagName;if("TEXTAREA"==t||"INPUT"==t)this._hasFocus=e.target,this._keyListener&&this._keyListener.setEnabled(!1)},this.onBlurCapture=function(){this._hasFocus&&(this._hasFocus=null,this._keyListener&&this._keyListener.setEnabled(!0))},this.setElement=function(e){var t,n;this._el=e;if(this._elEvents)for(t=0;n=this._elEvents[t];++t)n();e.ondragstart=function(){return!1},e.onselectstart=function(){return!1},this._elEvents=[],device.useDOM||this._elEvents.push($.onEvent(e,device.events.start,this,"handleMouse",eventTypes.START)),!device.isMobileBrowser&&!device.isNative&&(this._elEvents.push($.onEvent(e,"mouseover",this,"onMouseOver")),this._elEvents.push($.onEvent(e,"mouseout",this,"onMouseOut")))},this.onMouseOver=function(){this._isOver=!0},this.onMouseOut=function(){this._isOver=!1},this.onMouseDown=function(){this._isMouseDown=!0},this.onMouseUp=function(){this._isMouseUp=!0},this.getEvents=function(){return this._evtQueue.splice(0,this._evtQueue.length)},this.allowScrollEvents=function(e){this._allowScrollEvents=e},this.handleMouse=function(e,t){var r,i,s,n=t.target;if(!(this._hasFocus&&this._hasFocus==n||n&&n.getAttribute&&n.getAttribute("noCapture"))){r=device.isMobileBrowser;if(device.useDOM||r||this._isDown||!this._el||t.target==this._el){r?($.stopEvent(t),t.returnValue=!1):this._isOver&&(!this._allowScrollEvents||e!=eventTypes.SCROLL)&&(t.stopPropagation&&t.stopPropagation(),e!=eventTypes.START&&($.stopEvent(t),t.returnValue=!1));if(t.touches)for(n=0;i=t.changedTouches[n];++n)this.handleMouse(e,i,!0);else{if("offsetX"in t&&!device.useDOM)i=t.offsetX,s=t.offsetY;else if(this._el.getBoundingClientRect)s=this._el.getBoundingClientRect(),i=t.pageX-s.left,s=t.pageY-s.top;else{for(r=this._el;r;)i+=r.offsetTop,s+=r.offsetLeft,r=r.parentNode;i=t.pageX-i,s=t.pageY-s}r=t.identifier||UID;if(this._simulateMobile)switch(e){case eventTypes.START:this._moveOK=!0;break;case eventTypes.MOVE:if(!this._moveOK)return;break;case eventTypes.SELECT:this._moveOK=!1}e==eventTypes.START?this._isDown=!0:e==eventTypes.SELECT&&(this._isDown=!1,this._toggleNode&&(document.body.removeChild(this._toggleNode),document.body.appendChild(this._toggleNode))),i=new input.InputEvent(r,e,i,s);if(device.useDOM){for(;n&&!n._view;)n=n.parentNode;if(!n)return;i.target=n._view}e==eventTypes.SCROLL&&("wheelDeltaX"in t?(i.scrollDelta=t.wheelDeltaY/120,i.scrollAxis=input.VERTICAL_AXIS,t.wheelDeltaX&&t.wheelDeltaY?(n=i.clone(),n.scrollDelta=t.wheelDeltaX/120,n.scrollAxis=input.HORIZONTAL_AXIS,this._evtQueue.push(n)):t.wheelDeltaX&&(i.scrollDelta=t.wheelDeltaX/120,i.scrollAxis=input.HORIZONTAL_AXIS)):t.detail?(i.scrollDelta=-t.detail,i.scrollAxis="axis"in t?t.axis==t.VERTICAL_AXIS?input.VERTICAL_AXIS:input.HORIZONTAL_AXIS:input.VERTICAL_AXIS):t.wheelDelta&&(i.scrollDelta=(window.opera?1:-1)*t.wheelDelta/120,i.scrollAxis=input.VERTICAL_AXIS)),this._evtQueue.push(i)}}}}})',pre:!0},"sdk/timestep/platforms/browser/InputPrompt.js":{path:"sdk/timestep/platforms/browser/InputPrompt.js",friendlyPath:".InputPrompt",directory:"sdk/timestep/platforms/browser/",filename:"InputPrompt.js",src:'var sdk_timestep_platforms_browser_InputPrompt=__class__;exports=sdk_timestep_platforms_browser_InputPrompt(function(){return this.init&&this.init.apply(this,arguments)},function(){var e={onChange:function(){},title:"",message:"",value:"",prompt:""};this.init=function(t){t=merge(t,e),this.onChange=t.onChange,this._value=t.value,this._message=t.title||t.message||t.prompt},this.show=function(){var e=window.prompt(this._message,this._value);null!==e&&(this._value=e),this.onChange(e)},this.getValue=function(){return this._value},this.setValue=function(e){this._value=e},this.setMessage=function(e){this._message=e}})',pre:!0},"sdk/timestep/platforms/browser/KeyListener.js":{path:"sdk/timestep/platforms/browser/KeyListener.js",friendlyPath:".KeyListener",directory:"sdk/timestep/platforms/browser/",filename:"KeyListener.js",src:'var gListenerSingleton,gCancelKeys,sdk_timestep_platforms_browser_KeyListener;jsio("import lib.PubSub as PubSub"),jsio("import lib.Enum"),jsio("import event.input.keys as keyConstants"),jsio("import device"),jsio("import timer"),jsio("from util.browser import $");gListenerSingleton=null,gCancelKeys=lib.Enum(keyConstants.SPACE,keyConstants.LEFT,keyConstants.RIGHT,keyConstants.UP,keyConstants.DOWN),sdk_timestep_platforms_browser_KeyListener=__class__;exports=sdk_timestep_platforms_browser_KeyListener(function(){return this.init&&this.init.apply(this,arguments)},function(){this.init=function(e){if(gListenerSingleton)return gListenerSingleton;gListenerSingleton=this,this._el=e=e||document,this._events=[],this._shortcuts=[],this._isEnabled=!0,this._keyMap={},$.onEvent(e,"keydown",this,"onKeyDown"),$.onEvent(e,"keypress",this,"onKeyPress"),$.onEvent(e,"keyup",this,"onKeyUp"),$.onEvent(window,"blur",this,"liftAll")},this.setEnabled=function(e){this._isEnabled=e},this.captureShortcut=function(e){this._shortcuts.push(e)},this.getPressed=function(){return this._keyMap},this.onKeyDown=function(e){var t,n,r,i;if(this._isEnabled){t={code:e.keyCode,ctrl:e.ctrlKey,shift:e.shiftKey,alt:e.altKey,meta:e.metaKey,lifted:!1,dt:timer.getTickProgress()};if(t.ctrl||t.shift||t.alt||t.meta){for(n=!1,r=0;i=this._shortcuts[r];++r)i.compare(t)&&(i.publish("Down",t),n=!0);n&&$.stopEvent(e)}else $.stopEvent(e),e.keyCode in this._keyMap||(this._events.push(t),this._keyMap[e.keyCode]=+(new Date))}},this.liftAll=function(){var t,e=timer.getTickProgress();for(t in this._keyMap)this._events.push({code:t,lifted:!0,dt:e});this._keyMap={}},this.onKeyUp=function(e){var t=timer.getTickProgress();delete this._keyMap[e.keyCode],this._events.push({code:e.keyCode,lifted:!0,dt:t}),$.stopEvent(e)},this.onKeyPress=function(e){this._isEnabled&&e.keyCode in gCancelKeys&&$.stopEvent(e)},this.peekEvents=function(){return this._events},this.popEvents=function(){return this._events.splice(0,this._events.length)}}),merge(exports.prototype,keyConstants),exports.Shortcut=__class__,exports.Shortcut=exports.Shortcut(function(){return this.init&&this.init.apply(this,arguments)},PubSub,function(){this.init=function(e,t,n,r,i){this.ctrl=!!t,this.shift=!!n,this.alt=!!r,this.meta=!!i,this.code=!!e},this.compare=function(e){return this.ctrl==e.ctrl&&this.alt==e.alt&&this.meta==e.meta&&this.shift==e.shift&&this.code==e.code}})',pre:!0},"sdk/timestep/event/input/keys.js":{path:"sdk/timestep/event/input/keys.js",friendlyPath:"event.input.keys",directory:"sdk/timestep/event/input/",filename:"keys.js",src:"exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,BREAK:19,CAPS:20,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,META_LEFT:91,WIN_LEFT:91,META_RIGHT:92,WIN_RIGHT:92,SELECT:93,EQUAL:187,MINUS:189,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,MUTE:173,VOL_DOWN:174,VOL_UP:175,FORWARD:176,BACK:177,STOP:178,PLAY_PAUSE:179}",pre:!0},"sdk/timestep/platforms/browser/MobileBrowserAPI.js":{path:"sdk/timestep/platforms/browser/MobileBrowserAPI.js",friendlyPath:".MobileBrowserAPI",directory:"sdk/timestep/platforms/browser/",filename:"MobileBrowserAPI.js",src:'var sdk_timestep_platforms_browser_MobileBrowserAPI,AudioAPI;jsio("import lib.PubSub"),jsio("import device"),jsio("from util.underscore import _");sdk_timestep_platforms_browser_MobileBrowserAPI=__class__,AudioAPI=exports=sdk_timestep_platforms_browser_MobileBrowserAPI(function(){return this.init&&this.init.apply(this,arguments)},lib.PubSub,function(e){var t={oneChannelOnly:device.isMobileBrowser,compiledFilename:"compiled"};this.init=function(n){n=merge(n,t),e(this,"init",[n]),this._opts=n,this._map=n.map,this._audios={},this.oneChannelOnly=n.oneChannelOnly,setInterval(bind(this,"_ontimeupdate"),200),this.oneChannelOnly||_.each(n.background,function(e){n.map[e]={name:e}},this),this._load(),this.oneChannelOnly&&(this._boundLoadHandler=bind(this,"_playFirst"),document.body.addEventListener(device.events.start,this._boundLoadHandler,!0)),window.addEventListener("pagehide",bind(this,"pause"),!1)},this._createChannel=function(e,t){var n=new Audio(t);this._audios[e]=n,n.addEventListener("error",bind(this,"_onerror")),n.addEventListener("timeupdate",bind(this,"_ontimeupdate")),n.load()},this.setMuted=function(e){(this.muted=e)&&this.setVolume(0)},this.setVolume=function(e){_.each(this._audios,function(t){t.volume=e})},this.unload=function(){this.pause(),_.each(this._audios,function(e){e.src=""},this)},this._load=function(){this._audios={};var e=this._opts.path.replace(/\\/$/,"");if(this.oneChannelOnly)this._createChannel("AUDIO",e+"/"+this._opts.compiledFilename+".m4a");else for(var t in this._map)this._map.hasOwnProperty(t)&&"SILENCE"!=t&&this._createChannel(t,e+"/"+t+".mp3");logger.info("now loading",this._opts.src),this._publishedReady||(this.publish("Ready"),this._publishedReady=!0)},this._playFirst=function(){document.body.removeEventListener(device.events.start,this._boundLoadHandler,!0),this._audios.AUDIO.play()},this._ontimeupdate=function(){_.each(this._audios,function(e){e.paused&&!e._pausedOnce&&(e.pause(),e._pausedOnce=!0,e._ready=!0),this.oneChannelOnly&&(!this._nowPlaying||e.currentTime>=this._nowPlaying.end)&&this.play("SILENCE")},this)},this._onerror=function(e){var t="",n;for(n in e)t+=e[n]+" ";logger.info("ERROR",t)},this.canPlay=function(e){if(!this._map[e])return!1;var t=null;this.oneChannelOnly&&(t=this._map[e].end,e="AUDIO"),e=this._audios[e];if(!e)return!1;if(e._ready||!t)return!0;try{var n=e.seekable.end();return t<=n}catch(r){return logger.log(r),!1}},this.play=function(e,t){if(!this.muted)if(void 0===t&&(t=1),this.canPlay(e)){var n=this._audios[this.oneChannelOnly?"AUDIO":e];try{n.paused||n.pause();var r=0;this.oneChannelOnly&&null!=this._map[e].start&&(r=this._map[e].start),n.currentTime!=r&&(n.currentTime=r),n.volume=t,n.play(),this._nowPlaying=this._map[e]}catch(i){}}else logger.info("Not ready yet")},this.pause=function(){_.each(this._audios,function(e){e.pause()},this)},this.playBackgroundMusic=function(e,t){if(!this.muted){if(this.oneChannelOnly)return!1;this._backgroundSoundPlaying=e,this.play(e,t)}},this.pauseBackgroundMusic=function(){this._backgroundSoundPlaying&&this._audios[this._backgroundSoundPlaying].pause()}})',pre:!0},"sdk/timestep/platforms/browser/TextBox.js":{path:"sdk/timestep/platforms/browser/TextBox.js",friendlyPath:".TextBox",directory:"sdk/timestep/platforms/browser/",filename:"TextBox.js",src:'var sdk_timestep_platforms_browser_TextBox;"use import";jsio("from util.browser import $");sdk_timestep_platforms_browser_TextBox=__class__;exports=sdk_timestep_platforms_browser_TextBox(function(){return this.init&&this.init.apply(this,arguments)},function(){var e={padding:0,lineHeight:1.4,border:"none",display:"none",textAlign:"center",verticalAlign:"middle",fontSize:16,fontFamily:null,fontWeight:"",opacity:1,position:"absolute",backgroundColor:"transparent",top:0,left:0};this.init=function(t){var t=merge(t,{color:"black",height:20}),n=merge({},e);t.color&&(n.color=t.color),this._el=$({tag:t.multiLine?"textarea":"input",attrs:{type:"text"},style:n}),$.onEvent(this._el,"blur",this,"onBlur"),$.onEvent(this._el,"focus",this,"onFocus"),$.onEvent(this._el,"change",this,"onChange"),$.onEvent(this._el,"click",this,"onClick")},this.onBlur=this.onFocus=this.onChange=this.onClick=function(){},this.destroy=function(){$.remove(this._el),this._el=null},this.setApp=function(e){if(e!=this._app||!this._el.parentNode)this._app=e,e=e._ctx.canvas,logger.log("setting parent",this._el),e.parentNode.appendChild(this._el)},this.change=function(){},this.click=function(){},this.selectAll=function(){this._el.focus(),this._el.select()},this.show=function(){$.show(this._el)},this.hide=function(){$.hide(this._el)},this.setValue=function(e){return this._el.value=e,this},this.setOpacity=function(e){return this._el.style.opacity=e,this},this.setType=function(e){return this._el.type=e,this},this.setVisible=function(e){return this[e?"show":" hide"]()},this.getX=function(){return parseInt(this._el.style.left)},this.getY=function(){return parseInt(this._el.style.top)},this.getWidth=function(){return this._el.offsetWidth},this.getHeight=function(){return this._el.offsetHeight},this.getValue=function(){return this._el.value},this.getOpacity=function(){return this._el.style.opacity},this.getType=function(){return this._el.type},this.getVisible=function(){return this._el.parentNode&&"block"==this._el.style.display},this.setPosition=function(e){this._el.style.top=e.y+"px",this._el.style.left=e.x+"px"},this.getPosition=function(){return{x:this.getX(),y:this.getY()}},this.setDimensions=function(e){return this._el.style.width=e.width+"px",this._el.style.height=e.height+"px",this},this.getDimensions=function(){return{width:this.getWidth(),height:this.getHeight()}}})',pre:!0},"sdk/timestep/platforms/browser/TextInput.js":{path:"sdk/timestep/platforms/browser/TextInput.js",friendlyPath:".TextInput",directory:"sdk/timestep/platforms/browser/",filename:"TextInput.js",src:'var sdk_timestep_platforms_browser_TextInput,tab,tabLength;"use import";function checkTab(e){var e,i,s,t=e.target,n=t.selectionStart,r=t.selectionEnd;if(9==e.keyCode)if(e.preventDefault(),e.shiftKey)if(n!=r&&-1!=t.value.slice(n,r).indexOf("\\n")){for(i=n;i&&"\\n"!=t.value.charAt(i-1);)--i;e=t.value.slice(0,i),s=t.value.slice(r,t.value.length),i=t.value.slice(i,r).replace(RegExp("(^|\\n)"+tab,"g"),function(e){return r-=tab.length,"\\n"==e.charAt(0)?"\\n":(n-=tab.length,"")});t.value=e.concat(i).concat(s),t.selectionStart=n,t.selectionEnd=r}else{for(i=n;i&&"\\n"!=t.value.charAt(i-1);)--i;t.value.substring(i,i+tab.length)==tab&&(t.value=t.value.slice(0,i).concat(t.value.slice(i+tab.length,t.value.length)),n==r?t.selectionStart=t.selectionEnd=n-(n==i?0:tab.length):(t.selectionStart=n-(n==i?0:tab.length),t.selectionEnd=r-tab.length))}else if(n!=r&&-1!=t.value.slice(n,r).indexOf("\\n")){for(i=n;i&&"\\n"!=t.value.charAt(i-1);)--i;e=t.value.slice(0,i),s=t.value.slice(r,t.value.length),i=t.value.slice(i,r).replace(/\\n/g,function(){return r+=tab.length,"\\n"+tab}),t.value=e.concat(tab).concat(i).concat(s),t.selectionStart=n+tab.length,t.selectionEnd=r+tab.length}else{for(i=n;i&&"\\n"!=t.value.charAt(i-1);)--i;t.value=t.value.slice(0,i).concat(tab).concat(t.value.slice(i,t.value.length)),n==r?t.selectionStart=t.selectionEnd=n+tab.length:(t.selectionStart=n+tab.length,t.selectionEnd=r+tab.length)}else!e.shiftKey&&!e.metaKey&&!e.ctrlKey&&(8==e.keyCode&&t.value.slice(n-tabLength,n)==tab?(e.preventDefault(),t.value=t.value.slice(0,n-tabLength).concat(t.value.slice(n,t.value.length)),t.selectionStart=t.selectionEnd=n-tab.length):46==e.keyCode&&t.value.slice(r,r+tabLength)==tab?(e.preventDefault(),t.value=t.value.slice(0,n).concat(t.value.slice(n+tabLength,t.value.length)),t.selectionStart=t.selectionEnd=n):37==e.keyCode&&t.value.slice(n-tabLength,n)==tab?(e.preventDefault(),t.selectionStart=t.selectionEnd=n-tabLength):39==e.keyCode&&t.value.slice(n,n+tabLength)==tab&&(e.preventDefault(),t.selectionStart=t.selectionEnd=n+tabLength))}jsio("import lib.PubSub"),jsio("from util.browser import $");sdk_timestep_platforms_browser_TextInput=__class__;exports=sdk_timestep_platforms_browser_TextInput(function(){return this.init&&this.init.apply(this,arguments)},lib.PubSub,function(){this.init=function(e){this._el=$({tag:"input",parent:document.body,style:{position:"absolute",left:"-100px",top:"-100px"},attrs:{type:"text",value:e&&e.value||""}}),this._value=this._el.value,this._selectionEnd=this._selectionStart=0,$.onEvent(this._el,"keydown",this,"checkValue"),$.onEvent(this._el,"keyup",this,"checkValue"),$.onEvent(this._el,"keypress",this,"checkValue"),$.onEvent(this._el,"focus",this,"onFocus"),$.onEvent(this._el,"blur",this,"onBlur")},this.onFocus=function(){this.publish("Focus")},this.onBlur=function(){this.publish("Blur")},this.checkValue=function(e){var n,t=e.target,e=t.selectionStart;t=t.selectionEnd,n=this._el.value;n!=this._value&&(this.publish("ChangeValue",n),this._value=n),e!=this._selectionStart&&(this._selectionStart=e,this.publish("ChangeSelectionStart",e)),t!=this._selectionEnd&&(this._selectionEnd=t,this.publish("ChangeSelectionEnd",t))},this.focus=function(){logger.log("focus"),this._el.focus()},this.blur=function(){this._el.blur()}});tab="    ",tabLength=4;Array.prototype.map.call(document.getElementsByTagName("textarea"),function(e){e.addEventListener("keydown",checkTab,!1)})',pre:!0},"sdk/timestep/platforms/browser/Timer.js":{path:"sdk/timestep/platforms/browser/Timer.js",friendlyPath:".Timer",directory:"sdk/timestep/platforms/browser/",filename:"Timer.js",src:'var _onTick,disableRequestAnimFrame,disablePostMessage,asFastAsPossible,MIN_DT,postMessageCb,fastDriver,mainDriver,reqAnim;function sendPostMessage(){window.postMessage("timestep.TICK","*")}function sendTimeout(){setTimeout(onFrame,MIN_DT)}function sendTimeoutNow(){setTimeout(onFrame,0)}function onFrame(){var e,t;if(_onTick){e=+(new Date),t=e-(exports.last||e);exports.last=e,_onTick(t),t>MIN_DT?fastDriver.call(window,onFrame):mainDriver.call(window,onFrame)}}_onTick=null,disableRequestAnimFrame=!1,disablePostMessage=!0,asFastAsPossible=!1,MIN_DT=16;if(window.postMessage){postMessageCb=function(e){"timestep.TICK"==e.data&&onFrame()};window.addEventListener?window.addEventListener("message",postMessageCb,!1):window.attachEvent("onmessage",postMessageCb)}else disablePostMessage=!0,tickNow=sendTimeoutNow;fastDriver=sendTimeoutNow,mainDriver=sendTimeout;if(asFastAsPossible)disablePostMessage?mainDriver=sendTimeoutNow:fastDriver=mainDriver=sendPostMessage;else{reqAnim=!disableRequestAnimFrame&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame);reqAnim?fastDriver=mainDriver=reqAnim:disablePostMessage||(fastDriver=sendPostMessage)}exports.last=null,exports.start=function(e){_onTick=e,mainDriver.call(window,onFrame)},exports.stop=function(){_onTick=null}',pre:!0},"sdk/timestep/ui/backend/dom/animate.js":{path:"sdk/timestep/ui/backend/dom/animate.js",friendlyPath:".backend.dom.animate",directory:"sdk/timestep/ui/backend/dom/",filename:"animate.js",src:'jsio("import ui.backend.canvas.animate as canvasAnimate"),exports=function(e){return"_node"in e?e.getAnimation():canvasAnimate(e)},exports.linear=canvasAnimate.linear,exports.easeIn=canvasAnimate.easeIn,exports.easeInOut=canvasAnimate.easeInOut,exports.easeOut=canvasAnimate.easeOut',pre:!0},"sdk/timestep/ui/backend/dom/ImageView.js":{path:"sdk/timestep/ui/backend/dom/ImageView.js",friendlyPath:".backend.dom.ImageView",directory:"sdk/timestep/ui/backend/dom/",filename:"ImageView.js",src:'var sdk_timestep_ui_backend_dom_ImageView;function getImageURL(e){return e.getSource?e.getSource().src:e}jsio("import ui.View as View"),jsio("import ui.resource.Image as Image");sdk_timestep_ui_backend_dom_ImageView=__class__;exports=sdk_timestep_ui_backend_dom_ImageView(function(){return this.init&&this.init.apply(this,arguments)},View,function(e){this.init=function(t){t=merge(t,{image:null,autoSize:!1}),e(this,"init",[t]),t.image&&this.setImage(t.image,t)},this.autoSize=function(){this._img&&(this.style.width=this._img.getWidth(),this.style.height=this._img.getHeight(),this.style.fixedAspectRatio&&this.style.updateAspectRatio())},this.tick=function(){var e;if(this._img){e=JSON.stringify(this._img.getBounds());this._cachedBounds!=e&&(this._cachedBounds=e,this.updateImage())}},this._imgCache={},this.getImage=function(){return this._img},this.setImage=function(e,t){var n;if("string"==typeof e){n=e;(e=this._imgCache[n])||(this._imgCache[e]=e=new Image({url:n}))}(this._img=e)?(t&&t.autoSize&&(0<this._img.getWidth()&&0<this._img.getHeight()?this.autoSize():this._img.doOnLoad(this,"autoSize")),this._img.doOnLoad(this,"updateImage")):this.updateImage()},this.reflow=function(){this.updateImage()},this.updateImage=function(){var t,n,r,i,s,o,e=this.__view._node.style;if(!this._img||!this._img.isReady())e.backgroundImage="none";else{t=this._img,n=t.getBounds(),r=t.getOrigW(),i=t.getOrigH(),s=n.width+n.marginLeft+n.marginRight,o=n.height+n.marginTop+n.marginBottom;e.padding=n.marginTop+"px "+n.marginRight+"px "+n.marginBottom+"px "+n.marginLeft+"px",s=this.style.width/s,o=this.style.height/o,e.webkitBackgroundClip=e.backgroundClip="content-box",e.backgroundImage=\'url("\'+getImageURL(t)+\'")\',e.backgroundPositionX=s*(-n.x+n.marginLeft)+"px",e.backgroundPositionY=o*(-n.y+n.marginTop)+"px",e.backgroundSize=r*s+"px "+i*o+"px"}},this.getOrigWidth=this.getOrigW=function(){return this._img.getOrigW()},this.getOrigHeight=this.getOrigH=function(){return this._img.getOrigH()},this.doOnLoad=function(){return 1==arguments.length?this._img.doOnLoad(this,arguments[0]):this._img.doOnLoad.apply(this._img,arguments),this}})',pre:!0},"sdk/timestep/ui/resource/Image.js":{path:"sdk/timestep/ui/resource/Image.js",friendlyPath:"ui.resource.Image",directory:"sdk/timestep/ui/resource/",filename:"Image.js",src:'var ImageCache,ImageMap,sdk_timestep_ui_resource_Image;function imageOnLoad(e,t,n){if(e&&!this.width)return 3<n?(this.onLoad=this.onError=null,this.__cb.fire(!1)):setTimeout(bind(this,imageOnLoad,e,t,(n||0)+1),0);this.__cb.fire(e),this.onLoad=this.onError=null}jsio("import event.Callback as Callback"),jsio("import math.geom.Rect as Rect"),jsio("import device"),jsio("import ui.resource.loader as resourceLoader");ImageCache={},ImageMap=!GLOBAL.CONFIG.disableNativeViews&&GLOBAL.NATIVE&&GLOBAL.NATIVE.timestep&&GLOBAL.NATIVE.timestep.ImageMap;ImageMap||(ImageMap=__class__,ImageMap=ImageMap(function(){return this.init&&this.init.apply(this,arguments)},function(){this.init=function(e,t,n,r,i,s,o,u,a,f){this.url=f,this.x=t,this.y=n,this.width=r,this.height=i,this.marginTop=s,this.marginRight=o,this.marginBottom=u,this.marginLeft=a}}));sdk_timestep_ui_resource_Image=__class__;exports=sdk_timestep_ui_resource_Image(function(){return this.init&&this.init.apply(this,arguments)},function(){var e,t,n,r;this.init=function(e){e||(e={}),this._cb=new Callback,this._map=new ImageMap(this,0,0,-1,-1,0,0,0,0,e.url||""),this._originalURL=e.url,resourceLoader._updateImageMap(this._map,e.url,e.sourceX,e.sourceY,e.sourceW,e.sourceH),this._scale=e.scale,this._setSrcImg(e.srcImage,this._map.url)},this._setSrcImg=function(e,t){var n;this._cb.reset(),!e&&t&&ImageCache[t]&&(e=ImageCache[t]);if(!e&&Image.get){n=Image.get(t);typeof n=="object"?e=n:n&&(t=n)}e&&e.complete?(this._srcImg=e,this._onLoad(!0)):(this._srcImg=e=e||new Image,e.__cb||(e.__cb=new Callback,e.addEventListener("load",bind(e,imageOnLoad,!0),!1),e.addEventListener("error",bind(e,imageOnLoad,!1),!1),t&&(ImageCache[t]=e),!e.src&&t&&(this._srcImg.src=this._map.url=t)),e.__cb.run(this,"_onLoad"))},this.setSource=this.setSrcImg=function(e){this._setSrcImg(e)},this.__reload__=function(e){var t,n;if(this._srcImg){t=e.chain(),n=bind(this,function(){this._srcImg.removeEventListener("reload",n,!1),t()});this._srcImg.addEventListener("reload",n,!1)}},this.setURL=function(e){resourceLoader._updateImageMap(this._map,e),this._setSrcImg(null,this._map.url)},this.getURL=function(){return this._map.url},this.getOriginalURL=function(){return this._originalURL},this.getSourceWidth=this.getOrigWidth=this.getOrigW=function(){return this._srcImg.width},this.getSourceHeight=this.getOrigHeight=this.getOrigH=function(){return this._srcImg.height},this.setSourceWidth=this.setSourceW=function(e){this._map.width=e},this.setSourceHeight=this.setSourceH=function(e){this._map.height=e},this.setSourceY=this.setSourceY=function(e){this._map.y=e},this.setSourceX=this.setSourceX=function(e){this._map.x=e},this.setMarginTop=function(e){this._map.marginTop=e},this.setMarginRight=function(e){this._map.marginRight=e},this.setMarginBottom=function(e){this._map.marginBottom=e},this.setMarginLeft=function(e){this._map.marginLeft=e},this.getURL=function(){return this._map.url},this.getSourceWidth=this.getOrigWidth=this.getOrigW=function(){return this._srcImg.width},this.getSourceHeight=this.getOrigHeight=this.getOrigH=function(){return this._srcImg.height},this.setSourceWidth=this.setSourceW=function(e){this._map.width=e},this.setSourceHeight=this.setSourceH=function(e){this._map.height=e},this.setSourceY=this.setSourceY=function(e){this._map.y=e},this.setSourceX=this.setSourceX=function(e){this._map.x=e},this.setMarginTop=function(e){this._map.marginTop=e},this.setMarginRight=function(e){this._map.marginRight=e},this.setMarginBottom=function(e){this._map.marginBottom=e},this.setMarginLeft=function(e){this._map.marginLeft=e},this.getSource=function(){return this._srcImg},this.getWidth=function(){return(this._map.width==-1?0:this._map.width+this._map.marginLeft+this._map.marginRight)/this._map.scale},this.getHeight=function(){return(this._map.height==-1?0:this._map.height+this._map.marginTop+this._map.marginBottom)/this._map.scale},this.getMap=this.getBounds=function(){return this._map},this.setBounds=function(e,t,n,r,i,s,o,u){var a=this._map;a.x=e,a.y=t,a.width=n,a.height=r,a.marginTop=i||0,a.marginRight=s||0,a.marginBottom=o||0,a.marginLeft=u||0},this.setBounds=this.setMap,this.doOnLoad=function(){return this._cb.forward(arguments),this},this._onLoad=function(e){e?(this._srcImg.width==0&&logger.warn("Image has no width",this._url),e=this._map,!this._scale||e.width==-1&&e.height==-1?(e.width==-1&&(e.width=this._srcImg.width),e.height==-1&&(e.height=this._srcImg.height)):(e.width==-1&&(e.width=this._srcImg.width*e.height/this._srcImg.height),e.height==-1&&(e.height=this._srcImg.height*e.width/this._srcImg.width),this._srcImg.width=e.width,this._srcImg.height=e.height),this._map.url=this._srcImg.src,this._cb.fire(null,this)):(logger.error("Image failed to load:",this._map.url),this._cb.fire({NoImage:!0}))},this.isLoaded=this.isReady=function(){return this._cb.fired()};e=GLOBAL.NATIVE&&!device.simulatingMobileNative,t=Array.prototype.slice;if(!e)n=new(device.get("Canvas")),r=n.getContext("2d");this.render=function(i,s,u,a,f){var l,c,p,d,v,m,g,y,b,w,E;if(this._cb.fired())try{l=arguments,c=this._map;if(!i.filters||!i.filters.Multiply&&!i.filters.NegativeMask&&!i.filters.PositiveMask)if(l.length==9)i.drawImage(this._srcImg,l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8]);else if(s instanceof Rect)if(u instanceof Rect){l=s,v=u;p=v.width/(c.marginLeft+c.width+c.marginRight),d=v.height/(c.marginTop+c.height+c.marginBottom),i.drawImage(this._srcImg,l.x,l.y,l.width,l.height,v.x,v.y,v.width,v.height)}else v=s,p=v.width/(c.marginLeft+c.width+c.marginRight),d=v.height/(c.marginTop+c.height+c.marginBottom),i.drawImage(this._srcImg,c.x,c.y,c.width,c.height,v.x+p*c.marginLeft,v.y+d*c.marginTop,p*c.width,d*c.height);else p=a/(c.marginLeft+c.width+c.marginRight),d=f/(c.marginTop+c.height+c.marginBottom),i.drawImage(this._srcImg,c.x,c.y,c.width,c.height,(s||0)+p*c.marginLeft,(u||0)+d*c.marginTop,p*c.width,d*c.height);m=arguments,g=this;p=function(e,o,l){n.width=a,n.height=f,r.globalCompositeOperation="source-over",g.render.apply(g,[r].concat(t.call(m,1))),r.globalCompositeOperation=o,r.fillStyle="rgba("+e.r+","+e.g+","+e.b+","+e.a+")",r.fillRect(s||0,u||0,a||c.width,f||c.height),e=i.globalCompositeOperation,i.globalCompositeOperation=l,i.drawImage(n,s||0,u||0,a||c.width,f||c.height),i.globalCompositeOperation=e},/WebKit/.exec(navigator.appVersion);if(!e&&i.filters){if(i.filters.LinearAdd){y=i.filters.LinearAdd.get();p(y,"source-in","lighter")}i.filters.Tint&&(y=i.filters.Tint.get(),p({r:y.r,g:y.g,b:y.b,a:y.a},"source-in","source-over"));if(i.filters.Multiply){y=i.filters.Multiply.get(),b=this.getImageData(),w=b.data;for(p=0;p<w.length;p+=4)w[p]=w[p]*(y.r/255),w[p+1]=w[p+1]*(y.g/255),w[p+2]=w[p+2]*(y.b/255);n.width=b.width,n.height=b.height,r.putImageData(b,0,0),i.drawImage(n,s||0,u||0,a||c.width,f||c.height)}if(i.filters.NegativeMask){y=i.filters.NegativeMask.get(),n.width=a,n.height=f,r.globalCompositeOperation="source-over",y.imgObject.render.apply(y.imgObject,[r].concat(t.call(m,1))),r.globalCompositeOperation="source-in",g.render.apply(g,[r].concat(t.call(m,1)));E=i.globalCompositeOperation;i.globalCompositeOperation="source-over",i.drawImage(n,s||0,u||0,a||c.width,f||c.height),i.globalCompositeOperation=E}i.filters.PositiveMask&&(y=i.filters.PositiveMask.get(),n.width=a,n.height=f,r.globalCompositeOperation="source-over",y.imgObject.render.apply(y.imgObject,[r].concat(t.call(m,1))),r.globalCompositeOperation="source-out",g.render.apply(g,[r].concat(t.call(m,1))),E=i.globalCompositeOperation,i.globalCompositeOperation="source-over",i.drawImage(n,s||0,u||0,a||c.width,f||c.height),i.globalCompositeOperation=E)}}catch(S){}},this.getImageData=function(){var e,t;if(!GLOBAL.document||!document.createElement)throw"Not supported";if(!this._map.width||!this._map.height)throw"Not loaded";e=document.createElement("canvas");e.width=this._map.width,e.height=this._map.height;t=e.getContext("2d");return this.render(t,0,0,this._map.width,this._map.height),t.getImageData(0,0,e.width,e.height)},this.setImageData=function(){},this.destroy=function(){this._srcImg.destroy()}}),exports.__clearCache__=function(){ImageCache={}}',pre:!0},"sdk/timestep/event/Callback.js":{path:"sdk/timestep/event/Callback.js",friendlyPath:"event.Callback",directory:"sdk/timestep/event/",filename:"Callback.js",src:'jsio("import lib.Callback as exports")',pre:!0},"sdk/timestep/ui/resource/loader.js":{path:"sdk/timestep/ui/resource/loader.js",friendlyPath:"ui.resource.loader",directory:"sdk/timestep/ui/resource/",filename:"loader.js",src:'var _cache,MIME,Loader;jsio("import lib.Callback");_cache={},MIME={".png":"image",".jpg":"image",".bmp":"image",".css":"css",".html":"html",".mp3":"audio",".ogg":"audio",".mp4":"audio",".3gp":"audio",".m4a":"audio",".aac":"audio",".flac":"audio",".mkv":"audio",".wav":"audio"},Loader=__class__,Loader=Loader(function(){return this.init&&this.init.apply(this,arguments)},function(){this._map={},this.getMap=function(){return this._map},this.setMap=function(e){this._map=e||{}},this.get=function(e){return"resources/images/"+e},this.preload=function(e,t,n){"function"==typeof t&&(n=t,t=void 0);if(isArray(e)){var r=new lib.Callback;return e.forEach(function(e){e&&this.preload(e,t,r.chain())},this),n&&r.run(n),r}var e=e.replace(/^\\//,""),i={},s=this._map,o;for(o in s)0==o.indexOf(e)&&(i[s[o]&&s[o].sheet||o]=!0);return e=Object.keys(i),e=this._loadGroup(merge({resources:e},t)),n&&e.run(n),e};var e=null;this.getSound=function(t){return e||(jsio("import AudioManager"),e=new AudioManager),GLOBAL.NATIVE&&GLOBAL.NATIVE.sound&&GLOBAL.NATIVE.sound.preloadSound?NATIVE.sound.preloadSound(t):(e.addSound(t),{complete:!0})},this.getImage=function(e,t){var n=new Image;if(Image.get){var r=Image.get(e);if(r instanceof Image)return r}return r?(n.src=r,Image.set(e,n)):(t||logger.warn(e,"may not be properly cached!"),n.src=e),n},this._updateImageMap=function(e,t,n,r,i,s){var n=n||0,r=r||0,i=void 0==i?-1:i,s=void 0==s?-1:s,o=this._map[t];if(!!o&&!!o.sheet)return t=o.scale||1,e.x=o.x-o.marginLeft,e.y=o.y-o.marginTop,e.width=o.w+o.marginLeft+o.marginRight,e.height=o.h+o.marginTop+o.marginBottom,e.x+=n*t,e.y+=r*t,0<i&&(e.width=i*t),0<s&&(e.height=s*t),e.marginLeft=Math.max(0,o.x-e.x),e.marginTop=Math.max(0,o.y-e.y),e.marginRight=Math.max(0,e.x+e.width-(o.x+o.w)),e.marginBottom=Math.max(0,e.y+e.height-(o.y+o.h)),e.x+=e.marginLeft,e.y+=e.marginTop,e.width-=e.marginLeft+e.marginRight,e.height-=e.marginTop+e.marginBottom,e.scale=t,e.url=o.sheet,e;e.x=n,e.y=r,e.width=i,e.height=s,e.scale=1,e.url=t},this._getRaw=function(e,t,n,r){if(!n&&_cache[t])return _cache[t];n=null;switch(e){case"audio":n=this.getSound(t);break;case"image":n=this.getImage(t,r);break;default:logger.error("unknown type for preloader",e)}return _cache[t]=n},this._loadGroup=function(e,t){for(var n=e.timeout,r=new lib.Callback,i=e.resources||[],s=i.length||0,o=[],u=0;u<s;++u){var a=i[u].substring(i[u].lastIndexOf(".")).split("|")[0];"image"==MIME[a]?(o.push({type:"image",resource:i[u]}),GLOBAL.NATIVE&&NATIVE.gl&&NATIVE.gl.touchTexture(i[u])):"audio"==MIME[a]&&o.push({type:"audio",resource:i[u]})}if(!o.length)return t&&r.run(t),r.fire(),r;var f=0,l=o.length,c=e.parallel||5,h=0,p=bind(this,function(){var e=f++,n=o[e],i;if(n){i=this._getRaw(n.type,n.resource,!1,!0);var s=function(e){h>=l||(i.onreload=i.onload=i.onerror=function(){},++h,h>=l?(t&&t(n,e,!0,h,l),d&&clearTimeout(d),r.fire()):(t&&t(n,e,!1,h,l),setTimeout(p,0)))};if(i.reload&&i.complete){var u=i.onreload,a=i.onerror;i.onreload=function(){u&&u(),s(!1)},i.onerror=function(){a&&a(),s(!0)},i.reload()}else i.complete?s(!0===i.failed):(u=i.onload,a=i.onerror,i.onload=function(){u&&u(),i.failed=!1,s(!1)},i.onerror=function(){a&&a(),i.failed=!0,s(!0)})}}),d=null;return setTimeout(function(){for(var e=0;e<c;++e)p();n&&(d=setTimeout(function(){r.fire(),h=l},n))},0),r}});exports=new Loader',pre:!0},"sdk/timestep/AudioManager.js":{path:"sdk/timestep/AudioManager.js",friendlyPath:"AudioManager",directory:"sdk/timestep/",filename:"AudioManager.js",baseMod:"AudioManager",basePath:"sdk/timestep/",src:'jsio("import device"),jsio("import event.Emitter as Emitter"),GLOBAL.ACCESSIBILITY=new(Class(Emitter,function(){this.muted=!1,this.mute=function(e){this.muted=e,this.publish("MuteChange")}})),GLOBAL.ONACCESSIBLE&&GLOBAL.ONACCESSIBLE(),device.isMobileBrowser&&!device.simulatingMobileBrowser?(jsio("import platforms.browser.MobileBrowserAPI"),exports=platforms.browser.MobileBrowserAPI):exports=jsio("import ui.backend.sound.HTML5API")',pre:!0},"sdk/timestep/ui/backend/sound/HTML5API.js":{path:"sdk/timestep/ui/backend/sound/HTML5API.js",friendlyPath:"ui.backend.sound.HTML5API",directory:"sdk/timestep/ui/backend/sound/",filename:"HTML5API.js",src:'var RawAudio,MultiSound,sdk_timestep_ui_backend_sound_HTML5API;jsio("import event.Emitter as Emitter"),jsio("import util.path"),jsio("import device");RawAudio=__class__,RawAudio=RawAudio(function(){return this.init&&this.init.apply(this,arguments)},function(){this.init=function(){var e=new Audio,t=RawAudio.prototype,n;for(n in t)!e[n]&&t.hasOwnProperty(n)&&(e[n]=RawAudio.prototype[n]);return e.oldPlay=e.play,e.play=function(){4==e.readyState?e.oldPlay():setTimeout(e.play,32)},GLOBAL.ACCESSIBILITY.subscribe("MuteChange",this,function(){e.muted=GLOBAL.ACCESSIBILITY.muted}),e.muted=GLOBAL.ACCESSIBILITY.muted,e},this.stop=function(){try{if(this.paused||this.pause(),(!("NETWORK_LOADING"in this)||this.networkState!=this.NETWORK_LOADING||this.networkState!=this.NETWORK_NO_SOURCE)&&!isNaN(this.duration))this.currentTime=0}catch(e){}}}),MultiSound=__class__,MultiSound=MultiSound(function(){return this.init&&this.init.apply(this,arguments)},function(){this.init=function(e,t,n){this._soundManager=e,this._name=t;for(var n="string"==typeof n?{sources:[n]}:n||{},t=n.sources||[t],r=this._sources=[],i=e.getPath(),s=e.getExt(),o=RegExp(s+"$","i"),u=void 0!==n.loop?n.loop:n.background,a=void 0!==n.volume?n.volume:1,f=0,l;l=t[f];++f){l=util.path.join(i,n.path,l),o.test(l)||(l+=s);var c=new RawAudio;c.loop=u,c.volume=a,c.isBackgroundMusic=n.background,c.src=l,c.preload=4!=c.readyState||e._preload&&!n.background?"auto":"none",r.push(c),c.isBackgroundMusic&&window.NATIVE&&NATIVE.sound.registerMusic(l,c)}this.loop=u,this.isBackgroundMusic=n.background},this.setVolume=function(e){for(var t=0,n;n=this._sources[t];++t)n.volume=e},this.stop=function(){for(var e=0,t;t=this._sources[e];++e)t.stop()},this.pause=function(){this._isPaused=!0;for(var e=0,t;t=this._sources[e];++e)t.pause()},this.isPaused=function(){return this._isPaused},this.isPlaying=function(){var e=!1;if(this._lastSrc){var t=this._lastSrc.currentTime,n=this._lastSrc.duration;if(isNaN(n)||t<n)e=!this.isPaused()}return e},this.getDuration=function(){return this._lastSrc&&this._lastSrc.duration||0},this.getTime=function(){return this._lastSrc?this._lastSrc.currentTime:0},this.setTime=function(e){this._lastSrc&&this.isBackgroundMusic&&void 0!=e&&(this._lastSrc.duration?this._lastSrc.currentTime=e:setTimeout(bind(this,"setTime",e+.01),10))},this.play=function(e){e=e||{},this._isPaused?this._isPaused=!1:this.stop();var t=this._getRandom();t.loop=e.loop||this.loop,t.play(),t.muted&&(t.muted=!1,t.muted=!0),this._lastSrc=t,this.setTime(e.time),e.duration&&setTimeout(bind(this,function(){this.pause()}),1e3*e.duration)},this._getRandom=function(){return this._sources[Math.random()*this._sources.length|0]}}),sdk_timestep_ui_backend_sound_HTML5API=__class__;exports=sdk_timestep_ui_backend_sound_HTML5API(function(){return this.init&&this.init.apply(this,arguments)},Emitter,function(e){this.init=function(t){var n;t=t||{},e(this,"init",[t]),this.setPath(t.path),this._map=t.files||t.map,this._preload=t.preload,this._sounds={},this._areEffectsMuted=this._isMusicMuted=!1,this._currentMusic=null,t.persist&&this.persistState(t.persist),t=new Audio,this._ext=t.canPlayType("audio/mpeg")?".mp3":t.canPlayType("audio/ogg")?".ogg":"",this._ext||(this._ext=".mp3",logger.log("warning: could not determine sound support type"));for(n in this._map)this.addSound(n,this._map[n])},this.getExt=function(){return this._ext},this.getPath=function(e){return e?this._sounds[e].path:this._path},this.setPath=function(e){e&&(e=e.replace(/\\/$/,"")),this._path=e||""},this.addSound=function(e,t){this._sounds[e]=new MultiSound(this,e,t)},this.persistState=function(e){this._key=e;if(e=localStorage.getItem(this._key))try{e=JSON.parse(e)}catch(t){}e&&(logger.log("restoring audio api state"),this.setMusicMuted(e.isMusicMuted),this.setEffectsMuted(e.areEffectsMuted))},this._persist=function(){this._key&&localStorage.setItem(this._key,JSON.stringify({isMusicMuted:this._isMusicMuted,areEffectsMuted:this._areEffectsMuted}))},this.getMuted=function(){return this._isMusicMuted&&this._areEffectsMuted},this.getMusicMuted=function(){return this._isMusicMuted},this.getEffectsMuted=function(){return this._areEffectsMuted},this.setMuted=function(e){this.setMusicMuted(e),this.setEffectsMuted(e)},this.setMusicMuted=function(e){e!=this._isMusicMuted&&(this._isMusicMuted=e,this._persist(),this._currentMusic&&(e?this._currentMusic.pause():this._currentMusic.play()))},this.setEffectsMuted=function(e){var t;if(e!=this._areEffectsMuted&&(this._areEffectsMuted=e,this._persist(),e))for(t in this._sounds)e=this._sounds[t],e.isBackgroundMusic||e.stop()},this.setVolume=function(e,t){var n=this._sounds[e];return n?(n.setVolume(t),!0):!1},this.getVolume=function(e){return(e=this._sounds[e])?Math.round(10*e._sources[0].volume)/10:null},this.setTime=function(e,t){var n=this._sounds[e];if(!n)return logger.log("warning: no sound of that name"),!1;n.setTime(t)},this.getTime=function(e){return e=this._sounds[e],e?e.getTime():(logger.log("warning: no sound of that name"),!1)},this.getDuration=function(e){return e=this._sounds[e],e?e.getDuration():(logger.log("warning: no sound of that name"),!1)},this.play=function(e,t){var n=this._sounds[e],t=t||{};return n?(n.isBackgroundMusic?(this._currentMusic&&this._currentMusic.stop(),this._currentMusic=n,this._isMusicMuted||n.play(t)):this._areEffectsMuted||n.play(t),!0):(logger.log("warning: no sound of that name"),!1)},this.pause=function(e){return e=this._sounds[e],e?(this._currentMusic==e&&(this._currentMusic=null),e.pause(),!0):!1},this.stop=function(e){return e=this._sounds[e],e?(this._currentMusic==e&&(this._currentMusic=null),e.stop(),!0):!1},this.isPaused=function(e){return e=this._sounds[e],e?e.isPaused():(logger.log("warning: no sound of that name"),!1)},this.isPlaying=function(e){return e=this._sounds[e],e?e.isPlaying():(logger.log("warning: no sound of that name"),!1)},this.playBackgroundMusic=this.play,this.pauseBackgroundMusic=function(){this._currentMusic&&this._currentMusic.pause()}})',pre:!0},"sdk/jsio/util/path.js":{path:"sdk/jsio/util/path.js",friendlyPath:"util.path",directory:"sdk/jsio/util/",filename:"path.js",baseMod:"util",basePath:"sdk/jsio",pre:!0,src:'var util=jsio.__jsio.__util;exports.join=util.buildPath,exports.resolveRelativePath=util.resolveRelativePath,exports.splitPath=util.splitPath,exports.makeRelativePath=util.makeRelativePath,exports.splitExt=function(e){var e=exports.splitPath(e),t=e.filename.lastIndexOf(".");return-1==t?(e.basename=e.filename,e.ext=""):(e.basename=e.filename.substring(0,t),e.ext=e.filename.substring(t)),e}'},"sdk/timestep/ui/backend/dom/StackView.js":{path:"sdk/timestep/ui/backend/dom/StackView.js",friendlyPath:".backend.dom.StackView",directory:"sdk/timestep/ui/backend/dom/",filename:"StackView.js",src:'var sdk_timestep_ui_backend_dom_StackView;jsio("import ui.View");sdk_timestep_ui_backend_dom_StackView=__class__;exports=sdk_timestep_ui_backend_dom_StackView(function(){return this.init&&this.init.apply(this,arguments)},View,function(e){this.init=function(){e(this,"init",arguments),this.stack=[]},this.getCurrentView=function(){return this.stack.length?this.stack[this.stack.length-1]:null},this.push=function(e,t){var n;!this.stack[0]&&!1!==t&&(t=!0);n=this.getCurrentView();return n&&this._hide(n,t),e.style.width=this.style.width,e.style.height=this.style.height,this.stack.push(e),this._show(e,t),e},this._hide=function(e,t,n){e.publish("ViewWillDisappear"),t?(this.removeSubview(e),e.publish("ViewDidDisappear")):(t=new View({parent:e,zIndex:1e5}),e.then({x:(n?1:-1)*e.style.width}).then(bind(this,"removeSubview",e)).then(bind(e,"publish","ViewDidDisappear")).then(bind(t,"removeFromSuperview")))},this._show=function(e,t,n){e.publish("ViewWillAppear"),e.style.visible=!0,t?(this.addSubview(e),e.style.x=0,e.publish("ViewDidAppear")):(e.style.x=(n?-1:1)*this.style.width,this.addSubview(e),e.then({x:0}).then(bind(e,"publish","ViewDidAppear")))},this.pop=function(e){var t;if(!this.stack.length)return!1;t=this.stack.pop();return this._hide(t,e,!0),this.stack.length&&this._show(this.stack[this.stack.length-1],e,!0),t},this.popAll=function(e){for(;this.stack[1];)this.pop(e)}})',pre:!0},"sdk/timestep/ui/backend/dom/TextView.js":{path:"sdk/timestep/ui/backend/dom/TextView.js",friendlyPath:".backend.dom.TextView",directory:"sdk/timestep/ui/backend/dom/",filename:"TextView.js",src:'var sdk_timestep_ui_backend_dom_TextView;jsio("import ui.View as View"),jsio("import device");sdk_timestep_ui_backend_dom_TextView=__class__;exports=sdk_timestep_ui_backend_dom_TextView(function(){return this.init&&this.init.apply(this,arguments)},View,function(e){var t;this._displayStyle="table";t={wrap:!0,autoSize:!0,autoFontSize:!0,verticalPadding:0,horizontalPadding:0,lineHeight:1.2,color:"#000000",fontFamily:device.defaultFontFamily,fontWeight:"",size:12,lineWidth:2,outlineColor:null,shadowColor:null,verticalAlign:"middle",horizontalAlign:"center",backgroundColor:null};this.init=function(n){e(this,"init",[merge(n,t)])},this.updateOpts=function(t){var t=e(this,"updateOpts",arguments),n=this.__view.getElement().style;t.horizontalPadding&&(isArray(t.horizontalPadding)?(n.paddingLeft=t.horizontalPadding[0]+"px",n.paddingRight=t.horizontalPadding[0]+"px"):(n.paddingLeft=t.horizontalPadding+"px",n.paddingRight=t.horizontalPadding+"px")),t.verticalPadding&&(isArray(t.verticalPadding)?(n.paddingTop=t.verticalPadding[0]+"px",n.paddingBottom=t.verticalPadding[0]+"px"):(n.paddingTop=t.verticalPadding+"px",n.paddingBottom=t.verticalPadding+"px")),t.color&&(n.color=t.color),t.size&&(n.fontSize=t.size+"px"),t.fontFamily&&(n.fontFamily=t.fontFamily),t.horizontalAlign&&(n.textAlign=t.horizontalAlign),t.fontWeight&&(n.fontWeight=t.fontWeight),t.shadowColor&&(n.textShadow=t.shadowColor+" 2px 2px 1px"),t.outlineColor&&(n.webkitTextStroke=t.lineWidth+"px "+t.outlineColor),t.wrap||(n.whiteSpace="nowrap"),n.display="table","text"in t&&this.setText(t.text)},this.getText=function(){return this.__view.getElement().getElementsByTagName("span")[0].innerHTML},this.reflow=function(){var e;if(this._textNode&&this._opts.autoSize){e=this._textNode.scrollHeight;if(!this.style.height||this.style.height<e)this.style.height=e}},this.setText=function(e){var t;if("function"==typeof e)return e(this);if(this._text!=e){this._text=e;t=this._textNode||document.createElement("span");this._textNode||(this._textNode=t,this.__view.getElement().appendChild(t),t.className="text",t.style.display="table-cell",t.style.verticalAlign=this._opts.verticalAlign||"middle"),this._textNode.innerText=e||"",this.needsReflow()}}})',pre:!0},"sdk/timestep/ui/backend/dom/ViewBacking.js":{path:"sdk/timestep/ui/backend/dom/ViewBacking.js",friendlyPath:".backend.dom.ViewBacking",directory:"sdk/timestep/ui/backend/dom/",filename:"ViewBacking.js",src:'var Canvas,AVOID_CSS_ANIM,sdk_timestep_ui_backend_dom_ViewBacking,ViewBacking;jsio("import device"),jsio("import event.Callback as Callback"),jsio("import animate"),jsio("import animate.transitions as transitions"),jsio("import event.input.InputEvent as InputEvent"),jsio("import math.geom.Point as Point"),jsio("from util.browser import $"),jsio("import ..BaseBacking");Canvas=device.get("Canvas"),AVOID_CSS_ANIM=device.isAndroid,sdk_timestep_ui_backend_dom_ViewBacking=__class__,ViewBacking=exports=sdk_timestep_ui_backend_dom_ViewBacking(function(){return this.init&&this.init.apply(this,arguments)},BaseBacking,function(){var e={};"x y r width height visible anchorX anchorY opacity scale zIndex scrollLeft scrollTop flipX flipY".split(" ").forEach(function(t){e[t]=!0,this.__defineGetter__(t,function(){return t in this._computed?this._computed[t]:parseInt(this._node.style[t])}),this.__defineSetter__(t,function(e){var n={};return n[t]=e,this._setProps(n),e})},this),this.init=function(e,t){this._view=e,this._subviews=[];var n=this._node=document.createElement(t.elementType||"div");n._view=e,n.addEventListener("webkitTransitionEnd",bind(this,"_transitionEnd"),!1),n.className="view "+t.className,n=n.style,n.fontSize="1px",n.position="absolute",n.top="0px",n.left="0px",device.isAndroid||(n.webkitBackfaceVisibility="hidden"),n.webkitTransformOrigin="0px 0px";for(var r in t.styles)n[r]=t.styles[r];this._computed={x:0,y:0,r:0,width:void 0,height:void 0,anchorX:0,anchorY:0,opacity:1,visible:!0,zIndex:0,scale:1},this._animating=!1,this._animationQueue=[],this._animationCallback=null},this.getElement=function(){return this._node};var t=9e5;this.addSubview=function(e){var n=e.__view,r=n._node,i=r.parentNode&&r.parentNode._view;return i==this._view?!1:(i&&i.__view.removeSubview(e),i=this._subviews.length,this._subviews[i]=e,this._node.appendChild(r),n._setAddedAt(++t),i&&n.__sortKey<this._subviews[i-1].__view.__sortKey&&(this._needsSort=!0),!0)},this.removeSubview=function(e){var t=this._subviews.indexOf(e);return-1!=t?(this._subviews.splice(t,1),this._node.removeChild(e.__view._node),!0):!1},this.getSuperview=function(){var e=this._node.parentNode;return e==document.body||!e?null:e._view},this.getSubviews=function(){return this._needsSort&&(this._needsSort=!1,this._subviews.sort()),this._subviews},this.wrapTick=function(e,t){this._view.tick&&this._view.tick(e,t);for(var n=0,r;r=this._subviews[n];++n)r.__view.wrapTick(e,t)},this.wrapRender=function(e,t){if(this.visible){this.__firstRender||this._view.needsReflow(!0),this._needsSort&&(this._needsSort=!1,this._subviews.sort());var n=this._computed.width,r=this._computed.height;if(n&&r&&!(0>n||0>r))try{var i=this._view.render;if(i&&!i.isFake){this._canvas||(this._canvas=new Canvas,this._node.insertBefore(this._canvas,this._node.firstChild),this.ctx=this._canvas.getContext("2d"));var s=this._view._needsRepaint;if((n|0)!=this._canvas.width||(r|0)!=this._canvas.height)s=!0,this._canvas.width=n,this._canvas.height=r;s&&(this._view._needsRepaint=!1,this._canvas.style.display="none",this.ctx.clear(),this.ctx.save(),i.call(this._view,this.ctx,t),this.ctx.restore(),this._canvas.style.display="block")}this._renderSubviews(e,t)}catch(o){logger.error(this,o.message,o.stack)}}},this._renderSubviews=function(e,t){for(var n=0,r,i=this._subviews;r=i[n++];)r.__view.wrapRender(e,t)},this.localizePoint=function(e){var t=this._computed;return e.x-=t.x+t.anchorX,e.y-=t.y+t.anchorY,t.r&&e.rotate(-t.r),e.scale(1/t.scale),e.x+=t.anchorX,e.y+=t.anchorY,e},this.copy=function(){return merge({},this._computed)},this.update=function(e){this._setProps(e)},this._updateOrigin=function(){this._node.style.webkitTransformOrigin=(this._computed.anchorX||0)+"px "+(this._computed.anchorY||0)+"px"},this._onPosition=function(){this._setMatrix()},this._onResize=function(){this._setMatrix(),this._setCenter(),this._view.needsReflow()},this._setProps=function(t,n){var r=!1,i=this._node.style,s=0,o=!1,u={},a;for(a in t){var f=t[a];if("dx"==a||"dy"==a)a=a.substr(1),f=this._computed[a]+f;switch(a){case"anchorX":case"anchorY":this._computed[a]=f,this._updateOrigin();break;case"clip":this._computed.clip=f,i.overflow=f?"hidden":"visible";break;case"zIndex":this._computed.zIndex!=f&&(this._computed.zIndex=f,i.zIndex=f,this._onZIndex(f));break;case"x":case"y":f=Math.floor(f);case"r":case"scale":this._computed[a]!=f&&(u[a]=this._computed[a],this._computed[a]=f,r=!0);break;default:this._computed[a]!=f&&(++s,this._computed[a]=f,"width"==a||"height"==a?(i[a]=f+"px",o=!0):"visible"==a?i.display=f?this._displayStyle||"block":"none":"opacity"==a?i[a]=f:(i[a]=f,e[a]||(this[a]=f)))}}if(r)if(++s,AVOID_CSS_ANIM){var l={scale:u.scale||this._computed.scale,r:u.r||this._computed.r};if(!n||l.scale==this._computed.scale&&l.r==this._computed.r){if(l.scale!=this._computed.scale||l.r!=this._computed.r)i.WebkitTransform="scale("+(this._computed.flipX?-1*this._computed.scale:this._computed.scale)+","+(this._computed.flipY?-1*this._computed.scale:this._computed.scale)+") rotate("+this._computed.r+"rad)"}else animate(l).now({scale:this._computed.scale,r:this._computed.r},n.duration,n.easing,bind(this,function(){i.WebkitTransform="scale("+(this._computed.flipX?-1*l.scale:l.scale)+","+(this._computed.flipY?-1*l.scale:l.scale)+") rotate("+l.r+"rad)"})).then(bind(this,function(){i.WebkitTransform="scale("+(this._computed.flipX?-1*l.scale:l.scale)+","+(this._computed.flipY?-1*l.scale:l.scale)+") rotate("+this._computed.r+"rad)"}));i.left=(this._center?-this.width/2|0:0)+this._computed.x+"px",i.top=(this._center?-this.height/2|0:0)+this._computed.y+"px"}else{r=new WebKitCSSMatrix,r=r.translate(this._computed.x,this._computed.y),r=r.rotate(180*this._computed.r/3.14159),r=r.scale(this._computed.scale);if(this._computed.flipX||this._computed.flipY)r=r.translate(this._computed.flipX?-this._computed.width:0,this._computed.flipY?this._computed.height/2:0),r=r.scale(this._computed.flipX?-1:1,this._computed.flipY?-1:1),r=r.translate(this._computed.flipX?this._computed.width:0,this._computed.flipY?-this._computed.height/2:0);r=r.rotate(0,360,0),i.WebkitTransform=r}return o&&this._onSizeChanged&&this._onSizeChanged(),s},this._setCenter=function(){var e=this._node.style,t=0,n=0;AVOID_CSS_ANIM&&(t+=this._computed.x,n+=this._computed.y),e.left=t+"px",e.top=n+"px"},this._onSizeChanged=function(){this._setCenter(),this._view.needsReflow()},this._sortIndex="00000000",this._onZIndex=function(e){e=~~e,-99999999>e&&(e=this._zIndex=-99999999),99999999<e&&(e=this._zIndex=99999999),0>e?(e*=-1,this._sortIndex="-"+"00000000".substring(0,8-(""+e).length)+e):this._sortIndex="00000000".substring(0,8-(""+e).length)+e,this._setSortKey()},this._setAddedAt=function(e){this._addedAt=e,this._setSortKey()},this._setSortKey=function(){this.__sortKey=this._sortIndex+this._addedAt},this._transitionEnd=function(e){$.stopEvent(e),this.transitionCallback.fired()||(this.transitionCallback.fire(),this.transitionCallback.reset(),e?e.cancelBubble=!0:this._transitionEndTimeout&&(this._transitionEndTimeout=null),this._node.style.webkitTransition="none",this._animating=!1,this._animationCallback&&(e=this._animationCallback,this._animationCallback=null,e()),this._processAnimation())},this._processAnimation=function(e){if(0!=this._animationQueue.length&&!this._isPaused)if(e&&(clearTimeout(this._queuedTimeout),this._queuedTimeout=null),!this._queuedTimeout)if(e)switch(e=this._animationQueue.shift(),e.type){case"animate":var t=this._node.style;t.webkitTransitionProperty=AVOID_CSS_ANIM?"left, top, opacity, width, height":"-webkit-transform, opacity, width, height",t.webkitTransitionDuration=(e.duration|0)+"ms",t.webkitTransitionTimingFunction="string"==typeof e.easing?e.easing:e.easing==transitions.easeIn?"ease-in":e.easing==transitions.easeOut?"ease-out":e.easing==transitions.easeInOut?"ease-in-out":e.easing==transitions.linear?"linear":"ease",this._setProps(e.props,e);case"wait":this._animating=!0,this._animationCallback=e.callback||null,this.transitionCallback=new Callback,this.transitionCallback.runOrTimeout(function(){},bind(this,function(e){this._transitionEnd(e)}),e.duration);break;case"callback":e.callback(),this._animating||this._processAnimation()}else this._queuedTimeout||(this._queuedTimeout=setTimeout(bind(this,function(){this._queuedTimeout=!1,this._processAnimation(!0)}),0))},this.getQueue=function(){return[]},this.getAnimation=function(){return this},this.animate=function(){return arguments[0]?this.next.apply(this,arguments):this},this.clear=function(){return this.transitionCallback&&this.transitionCallback.fire(),this._transitionEndTimeout&&clearTimeout(this._transitionEndTimeout),this._animationQueue=[],this._animationCallback=null,this._animating=!1,this},this.finishNow=function(){return this._node.style.webkitTransition="none",this},this.pause=function(){this._isPaused=!0},this.resume=function(){this._isPaused=!1,this._processAnimation()},this.animate=function(e,t,n,r){return this.then(e,t,n,r)},this.now=function(e,t,n,r){return this.clear(),this.then(e,t,n,r)},this.then=function(e,t,n,r){return 1==arguments.length&&"function"==typeof e?this.callback(e):(this._animationQueue.push({type:"animate",props:e,duration:t||600,callback:r&&bind(this,r),easing:n}),1==this._animationQueue.length&&!this._animating&&this._processAnimation(),this)},this.callback=function(e){return this._animationQueue.push({type:"callback",duration:0,callback:e&&bind(this,e)}),1==this._animationQueue.length&&!this._animating&&this._processAnimation(),this},this.wait=function(e,t){return this._animationQueue.push({type:"wait",duration:e,callback:t}),1==this._animationQueue.length&&!this._animating&&this._processAnimation(),this},this.fadeIn=function(e,t){this.show();if(1!=this._node.style.opacity)return this.then({opacity:1},e,null,t),this;t&&t()},this.fadeOut=function(e,t){if(0!=this._node.style.opacity)return this.then({opacity:0},e,null,bind(this,function(){this.hide(),t&&t()})),this;this.hide(),t&&t()}})',pre:!0},"sdk/timestep/ui/backend/canvas/ImageView.js":{path:"sdk/timestep/ui/backend/canvas/ImageView.js",friendlyPath:".backend.canvas.ImageView",directory:"sdk/timestep/ui/backend/canvas/",filename:"ImageView.js",src:'var sdk_timestep_ui_backend_canvas_ImageView,ImageView;jsio("import util.path"),jsio("import std.uri as URI"),jsio("import ui.View as View"),jsio("import ui.resource.Image as Image");sdk_timestep_ui_backend_canvas_ImageView=__class__,ImageView=exports=sdk_timestep_ui_backend_canvas_ImageView(function(){return this.init&&this.init.apply(this,arguments)},View,function(e){this.init=function(t){e(this,"init",arguments),t=merge(t,{image:null,autoSize:!1}),t.image&&this.setImage(t.image,t)},this.getImage=function(){return this._img},this._imgCache={},this.setImage=function(e,t){if("string"==typeof e){var n=e;(e=this._imgCache[n])||(this._imgCache[e]=e=new Image({url:n}))}if(this._img=e)(t=merge(t,this._opts))&&t.autoSize&&(0<this._img.getWidth()&&0<this._img.getHeight()?this.autoSize():this._img.doOnLoad(this,"autoSize")),this._img.doOnLoad(this,"needsRepaint")},this.doOnLoad=function(){return 1==arguments.length?this._img.doOnLoad(this,arguments[0]):this._img.doOnLoad.apply(this._img,arguments),this},this.autoSize=function(){this._img&&(this.style.width=this._img.getWidth(),this.style.height=this._img.getHeight(),this.style.fixedAspectRatio&&this.style.updateAspectRatio())},this.getOrigWidth=this.getOrigW=function(){return this._img.getOrigW()},this.getOrigHeight=this.getOrigH=function(){return this._img.getOrigH()},this.render=function(e){if(this._img){var t=this.style;this._img.render(e,0,0,t.width,t.height)}};var t=window.location.toString(),n=window.location.hostname;this.getTag=function(){var e;if(this._img){var r=this._img.getOriginalURL();if(this._cachedTag&&r==this._cachedTag.url)e=this._cachedTag.tag;else{e=URI.relativeTo(r,t);var i=e.getHost();e=util.path.splitExt(e.getFile()).basename+(i&&i!=n?":"+i:""),this._cachedTag={url:r,tag:e}}}return(e||"")+":ImageView"+this.uid}})',pre:!0},"sdk/jsio/std/uri.js":{path:"sdk/jsio/std/uri.js",friendlyPath:"std.uri",directory:"sdk/jsio/std/",filename:"uri.js",src:'var strictRegex,looseRegex,queryStringRegex,attrs="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),sdk_jsio_std_uri=__class__,URI=exports=sdk_jsio_std_uri(function(){return this.init&&this.init.apply(this,arguments)},function(){this.init=function(e,t){if(e instanceof URI)for(var n=0,r;r=attrs[n];++n)this["_"+r]=e["_"+r];else for(r in this._isStrict=t,n=exports.parse(e,t),n)this["_"+r]=n[r]};for(var e=0,t;t=attrs[e];++e)(function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);this["get"+t]=function(){return this["_"+e]},this["set"+t]=function(t){return this["_"+e]=t,this}}).call(this,t);this.query=function(e){return exports.parseQuery(this._query)[e]},this.hash=function(e){return exports.parseQuery(this._anchor)[e]},this.addHash=function(e){var t=exports.parseQuery(this._anchor),n;for(n in e)t[n]=e[n];return this._anchor=exports.buildQuery(t),this},this.push=function(e){return e&&(this._path=(this._path+"/"+e).replace(/\\/\\/+/g,"/")),this},this.addQuery=function(e){var t=exports.parseQuery(this._query),n;for(n in e)t[n]=e[n];return this._query=exports.buildQuery(t),this},this.removeQuery=function(e){var t=exports.parseQuery(this._query);if(isArray(e))for(var n=0,r=e.length;n<r;++n)delete t[e[n]];else delete t[e];return this._query=exports.buildQuery(t),this},this.toJSON=function(){return this.toString(!1)},this.toString=function(e){var t=this._protocol?this._protocol+"://":"",n=this._host?this._host+(80==(this._port||80)?"":":"+this._port):"";return e?t+n:t+n+this._path+(this._query?"?"+this._query:"")+(this._anchor?"#"+this._anchor:"")}});exports.relativeTo=function(e,t){var n,e=""+e;if(t&&!/^http(s?):\\/\\//.test(e))n=(new exports(t)).setAnchor("").setQuery("").setFile("").toString("/"==e.charAt(0)),e=exports.resolveRelative(n+e);return new URI(e)},exports.resolveRelative=function(e){for(;e!=(e=e.replace(/(^|\\/)([^\\/]+)\\/\\.\\.\\//g,"/")););return e.replace(/[^.]\\.\\//g,"")},exports.buildQuery=function(e){var n,t=[];for(n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},exports.parseQuery=function(e){var e,t,n,r,i,s;for(e=e.split("&"),t=e.length,n={},r=0;r<t;++r){i=e[r].split("="),s=decodeURIComponent(i[0]);s&&(n[s]=decodeURIComponent(i[1]))}return n};strictRegex=/^(?:([^:\\/?#]+):)?(?:\\/\\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?))?((((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,looseRegex=/^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/,queryStringRegex=/(?:^|&)([^&=]*)=?([^&]*)/g;exports.parse=function(e,t){var n,r,i,s,o;for(n={},r=(t?strictRegex:looseRegex).exec(e),i=0;s=attrs[i];++i)n[s]=r[i]||"";o=n.queryKey={};return n.query.replace(queryStringRegex,function(e,t,n){e&&(o[t]=n)}),n},exports.isSameDomain=function(e,t){var n=exports.parse(e),r=exports.parse(t);return n.port==r.port&&n.host==r.host&&n.protocol==r.protocol}',pre:!0},"sdk/timestep/ui/backend/canvas/TextView.js":{path:"sdk/timestep/ui/backend/canvas/TextView.js",friendlyPath:".backend.canvas.TextView",directory:"sdk/timestep/ui/backend/canvas/",filename:"TextView.js",src:'var messageFont,textViewID,sdk_timestep_ui_backend_canvas_TextView,TextView;jsio("import ui.View as View"),jsio("import ui.layout.Padding as Padding"),jsio("import device"),jsio("import .util.FragmentBuffer as FragmentBuffer"),jsio("import .TextFlow"),jsio("import ...legacySettings as legacySettings");messageFont=!0,textViewID=1,sdk_timestep_ui_backend_canvas_TextView=__class__,TextView=exports=sdk_timestep_ui_backend_canvas_TextView(function(){return this.init&&this.init.apply(this,arguments)},View,function(e){var t={multiline:{replacement:"wrap"},textAlign:{replacement:"horizontalAlign"},lineWidth:{replacement:"strokeWidth"},strokeStyle:{replacement:"strokeColor"},outlineColor:{replacement:"strokeColor"}},n={wrap:!1,autoSize:!1,autoFontSize:!0,padding:new Padding(0),lineHeight:1.2,color:"#000000",fontFamily:device.defaultFontFamily,fontWeight:"",size:12,strokeWidth:2,strokeColor:null,shadowColor:null,verticalAlign:"middle",horizontalAlign:"center",buffer:GLOBAL.NATIVE&&!device.simulatingMobileNative,backgroundColor:null},r={width:!0,height:!0,wrap:!0,autoSize:!0,autoFontSize:!0,padding:!0,lineHeight:!0,color:!1,fontFamily:!0,fontWeight:!0,size:!0,strokeWidth:!0,strokeColor:!1,shadowColor:!1,verticalAlign:!0,horizontalAlign:!0,backgroundColor:!1,text:!0},i=Object.keys(r),s=Object.keys({color:!0,fontFamily:!0,fontWeight:!0,size:!0,strokeWidth:!0,strokeColor:!1,shadowColor:!1,backgroundColor:!0,text:!0}),o=["width","height","size"],u=new FragmentBuffer;u.onGetHash=function(e){return e.textView.getHash()},this.init=function(t){this._opts={},this._optsLast={},this.updateCache(),this._textFlow=new TextFlow({target:this}),this._textFlow.subscribe("ChangeWidth",this,"onChangeWidth"),this._textFlow.subscribe("ChangeHeight",this,"onChangeHeight"),this._textFlow.subscribe("ChangeSize",this,"onChangeSize"),e(this,"init",[merge(t,n)]),this._id=textViewID++},this.onChangeWidth=function(e){this.updateOpts({width:e},!0)},this.onChangeHeight=function(e){this.updateOpts({height:e},!0)},this.onChangeSize=function(e,t){this.updateOpts({size:e},!0),t&&(t.font=this._opts.fontWeight+" "+this._opts.size+"px "+this._opts.fontFamily)},this._restoreOpts=function(){for(var e=this._optsLast,t,n=o.length;n;)t=o[--n],t in e&&(this._opts[t]=e[t])},this._checkOpts=function(e){var t=this._optsLast,s,o=i.length;if(this._cacheUpdate=this._cacheUpdate||!Object.keys(this._opts).length)this._hash=!1;for(;o;)s=i[--o],s in e&&r[s]&&t[s]!==e[s]&&(this._cacheUpdate=!0),t[s]=s in e?e[s]:s in this._opts?this._opts[s]:n[s]},this._checkDeprecatedOpts=function(e){e.allowVerticalSizing=!legacySettings.disableVerticalAutoSize;for(var n in t)if(n in e){var r=t[n];!r.hasWarned&&(console.warn("TextView opts."+n+" is deprecated, please use "+r.replacement+"..."),r.hasWarned=!0),e[r.replacement]=e[n]}if(n=e.font){messageFont&&(console.warn("TextView opts.font is deprecated, please use fontFamily and size..."),messageFont=!1);for(;n.length&&" "===n[0];)n=n.substr(1-n.length);r=n.indexOf(" "),-1!==r&&(e.size=parseInt(n.substr(0,r).replace(/[pxtem\\s]/gi,""),10),e.fontFamily=n.substr(r+1-n.length))}},this.updateCache=function(){this._cacheUpdate=!0,this._hash=!1},this.updateOpts=function(t,n){this._opts.buffer&&u.releaseBin(this.getHash()),this.updateCache(),this._checkDeprecatedOpts(t),"padding"in t&&(this.style.padding=new Padding(t.padding));if(!n){if(this._restoreOpts(),this._checkOpts(t),!this._cacheUpdate){e(this,"updateOpts",arguments);return}t.hash=!1}return t=e(this,"updateOpts",arguments),"text"in t&&this.setText(t.text),!n&&this._textFlow.setOpts(this._opts),t},this._updateCtx=function(e){var t=this._opts;e.textAlign="left",e.textBaseline="top",e.fillStyle=t.color,e.font=t.fontWeight+" "+t.size+"px "+t.fontFamily,e.lineWidth=this.getStrokeWidth()},this._renderToCtx=function(e,t,n){var r=this._opts,i=this._textFlow.getCache(),s=r.autoFontSize?this._textFlow.getActualWidth():1e6,o,u=r.color,a=r.strokeColor,f=r.shadowColor,l=.5*this.getStrokeWidth(),c,h=i.length;legacySettings.textViewColor&&this.color&&(u=this.color),this._updateCtx(e),a&&(e.strokeStyle=a);for(;h;)o=i[--h],r=o.word,c=t+o.x,o=n+o.y,a&&e.strokeText(r,c+l,o+l,s),f&&(e.fillStyle=f,e.fillText(r,c+l,o+l,s)),e.fillStyle=u,e.fillText(r,c+l,o+l,s)},this._renderBuffer=function(e){var t=u.getContext(),n=this._textFlow.getOffsetRect(),r=n.width,i=n.height,s=this._textFlow.getCache();r&&i&&(this._opts.lineCount=s[s.length-1].line,n.text=this._opts.text,n.textView=this,s=u.getPositionForText(n),null!=s?(this._cacheUpdate&&(t.clearRect(s.x,s.y,s.width,s.height),this._renderToCtx(t,s.x-n.x,s.y-n.y)),e.drawImage(u.getCanvas(),s.x,s.y,r,i,n.x,n.y,r,i)):this._opts.buffer=!1)},this.render=function(e){var t=this._opts;this._cacheUpdate&&(this._updateCtx(e),this._textFlow.reflow(e,1+(t.autoFontSize?4:0)+(t.autoSize?2:0)+(t.wrap?1:0))),this._textFlow.getCache().length&&(this._opts.buffer?this._renderBuffer(e):(t=-this.getStrokeWidth()/2,this._renderToCtx(e,t,t))),this._cacheUpdate=!1},this.clearBuffers=function(){u.clearBuffer()},this.getFontBuffer=function(){return u},this.setText=function(e){this._opts.buffer&&u.releaseBin(this.getHash()),this._restoreOpts(),this._opts.text=void 0!=e?e.toString():"",this.updateCache(),this.needsRepaint()},this.getStrokeWidth=function(){return this._opts.strokeColor?this._opts.strokeWidth:0},this.getText=function(){return this._opts.text},this.getTag=function(){return"TextView"+this.uid+":"+(this.tag||(this._opts.text||"").substring(0,20))},this.getOpts=function(){return this._opts},this.getHash=function(){if(!this._hash){this._hash="";for(var e=this._opts,t=s.length;t;)this._hash+=e[s[--t]]}return this._hash},this.reflow=function(){this._restoreOpts(),this._cacheUpdate=!0}});exports.clearBuffers=TextView.prototype.clearBuffers,exports.getFontBuffer=TextView.prototype.getFontBuffer',pre:!0},"sdk/timestep/ui/layout/Padding.js":{path:"sdk/timestep/ui/layout/Padding.js",friendlyPath:"ui.layout.Padding",directory:"sdk/timestep/ui/layout/",filename:"Padding.js",src:'Padding=__class__,exports=Padding=Padding(function(){return this.init&&this.init.apply(this,arguments)},function(){this.init=this.update=function(e){if(e instanceof Padding)this.top=e.top,this.right=e.right,this.bottom=e.bottom,this.left=e.left;else{"string"==typeof e&&(e=e.split(/\\s+/).map(function(e){return parseFloat(e)}));if(!e||!e.length)e=[e||0];switch(e.length){case 1:this.left=this.right=this.top=this.bottom=e[0];break;case 2:this.top=this.bottom=e[0],this.left=this.right=e[1];break;case 3:this.top=e[0],this.left=this.right=e[1],this.bottom=e[2];break;case 4:this.top=e[0],this.right=e[1],this.bottom=e[2],this.left=e[3]}}},this.getVertical=function(){return this.top+this.bottom},this.getHorizontal=function(){return this.left+this.right},this.toString=function(){return[this.top,this.right,this.bottom,this.left].join(" ")}})',pre:!0},"sdk/timestep/ui/backend/canvas/util/FragmentBuffer.js":{path:"sdk/timestep/ui/backend/canvas/util/FragmentBuffer.js",friendlyPath:".util.FragmentBuffer",directory:"sdk/timestep/ui/backend/canvas/util/",filename:"FragmentBuffer.js",src:'var sdk_timestep_ui_backend_canvas_util_FragmentBuffer,FragmentBuffer;jsio("import device"),jsio("import .FragmentBin"),jsio("import .SortedLinkedList as SortedList");sdk_timestep_ui_backend_canvas_util_FragmentBuffer=__class__,FragmentBuffer=exports=sdk_timestep_ui_backend_canvas_util_FragmentBuffer(function(){return this.init&&this.init.apply(this,arguments)},function(){this.init=function(e){this.opts=merge(e,{}),this._cache={},this._decriptions=[],window.addEventListener("pageshow",bind(this,"clearBuffer"),!1)};var e=function(e,t){return e.size()>t.size()};this._build=function(){this._canvas=new(device.get("Canvas"))({width:1024,height:1024}),this._ctx=this.getCanvas().getContext("2d"),this._ctx.clearRect(0,0,1024,1024),this._ctx.textAlign="left",this._ctx.textBaseline="middle",this._ctx.globalCompositeOperation="source-over",this._binList=new SortedList(e),this._binList.insert(new FragmentBin({x:0,y:0,width:1024,height:1024}))},this.getCanvas=function(){return this._canvas||this._build(),this._canvas},this.getContext=function(){return this._ctx||this._build(),this._ctx},this.onGetHash=function(){throw Error("onGetHash should be implemented.")},this._insertText=function(e){for(var t=Math.ceil(e.width)+1,n=Math.ceil(e.height)+1,r=this._binList.iterator(),e=null,i=!1;r.hasNext()&&!i;)e=r.next(),!e.filled&&e.width>=t&&e.height>=n?i=!0:e=null;if(e){newBins=e.split(t,n);for(t=0;t<newBins.length;t++)this._binList.insert(newBins[t])}else logger.log("buffer full, further TextViews will not be cached");return e},this.getPositionForText=function(e){var t=this.onGetHash(e),n=Math.ceil(e.width)+1;return!this._cache[t]&&0<n&&(this._cache[t]=this._insertText(e,!1),this._decriptions.push(e)),this._cache[t]},this.releaseBin=function(){},this.clearBuffer=function(){this._cache={},this._binList=new SortedList(e),this._binList.insert(new FragmentBin({x:0,y:0,width:1024,height:1024}));for(this._ctx&&this._ctx.clearRect(0,0,1024,1024);this._decriptions.length;)this._decriptions.pop().textView.updateCache()}})',pre:!0},"sdk/timestep/ui/backend/canvas/util/FragmentBin.js":{path:"sdk/timestep/ui/backend/canvas/util/FragmentBin.js",friendlyPath:".FragmentBin",directory:"sdk/timestep/ui/backend/canvas/util/",filename:"FragmentBin.js",src:'var sdk_timestep_ui_backend_canvas_util_FragmentBin=__class__,FragmentBin=exports=sdk_timestep_ui_backend_canvas_util_FragmentBin(function(){return this.init&&this.init.apply(this,arguments)},"TextBin",function(){this.init=function(e){this.width=e.width,this.height=e.height,this.x=e.x,this.y=e.y},this.size=function(){return this.width*this.height},this.split=function(e,t){var n=[this];if(10<this.width&&10<this.height){if(10<this.height-t){var r=new FragmentBin({x:this.x,y:this.y+t,width:this.width,height:this.height-t});n.push(r)}10<this.width-e&&(r=new FragmentBin({x:this.x+e,y:this.y,width:this.width-e,height:t}),n.push(r))}return this.width=e,this.height=t,this.filled=!0,n}});',pre:!0},"sdk/timestep/ui/backend/canvas/util/SortedLinkedList.js":{path:"sdk/timestep/ui/backend/canvas/util/SortedLinkedList.js",friendlyPath:".SortedLinkedList",directory:"sdk/timestep/ui/backend/canvas/util/",filename:"SortedLinkedList.js",src:'var Item,sdk_timestep_ui_backend_canvas_util_SortedLinkedList,Iterator=__class__;Iterator=Iterator(function(){return this.init&&this.init.apply(this,arguments)},"Iterator",function(){this.init=this.update=function(e){this._list=e||this._list,this._current=e.head,this._count=0},this.next=function(){var e=this._current.data;return this._current=this._current.next,this._count++,e},this.current=function(){return this._current.data},this.insertBefore=function(e){this._current.insertBefore(e),this._list.count++},this.insertAfter=function(e){this._current.insertAfter(e),this._list.count++},this.remove=function(){this._current.prev.remove(),this._current.prev==this._current&&(this._list.head=null),this._list.count--},this.hasNext=function(){return this._count<this._list.count},this.atHead=function(){return this._current==this._list.head}}),Item=__class__,Item=Item(function(){return this.init&&this.init.apply(this,arguments)},"Item",function(){this.init=function(e,t,n){this.data=e,this.prev=t||this,this.next=n||this},this.insertBefore=function(e){e=new Item(e,this.prev,this),this.prev=this.prev.next=e},this.insertAfter=function(e){e=new Item(e,this,this.next),this.next=this.next.prev=e},this.remove=function(){this.prev.next=this.next,this.next.prev=this.prev}}),sdk_timestep_ui_backend_canvas_util_SortedLinkedList=__class__;exports=sdk_timestep_ui_backend_canvas_util_SortedLinkedList(function(){return this.init&&this.init.apply(this,arguments)},"SortedLinkedList",function(){this.init=function(e){this.head=null,this._comparator=e,this.count=0},this.append=function(e){this._head.insertAfter(e),this.count++},this.insert=function(e){var t,n,r;if(this.head){for(t=this.iterator(),n=t.current(),r=!1;t.hasNext()&&!r;)r=!this._comparator(e,n),r||(t.next(),n=t.current());t.insertBefore(e),r&&t.atHead()&&(this.head=this.head.prev)}else this.head=new Item(e),this.count++},this.iterator=function(){return new Iterator(this)}})',pre:!0},"sdk/timestep/ui/backend/canvas/TextFlow.js":{path:"sdk/timestep/ui/backend/canvas/TextFlow.js",friendlyPath:".TextFlow",directory:"sdk/timestep/ui/backend/canvas/",filename:"TextFlow.js",src:'var textFlowMode,sdk_timestep_ui_backend_canvas_TextFlow,TextFlow;jsio("import lib.Enum as Enum"),jsio("import lib.PubSub as PubSub");textFlowMode=Enum("NONE","WRAP","AUTOSIZE","AUTOSIZE_WRAP","AUTOFONTSIZE","AUTOFONTSIZE_WRAP","AUTOFONTSIZE_AUTOSIZE","AUTOFONTSIZE_WRAP_AUTOSIZE"),sdk_timestep_ui_backend_canvas_TextFlow=__class__,TextFlow=exports=sdk_timestep_ui_backend_canvas_TextFlow(function(){return this.init&&this.init.apply(this,arguments)},PubSub,function(e){this.init=function(t){e(this,"init",arguments),this._target=t.target,this._lineWidth=0,this._line=[],this._lines=[],this._cache=[],this._maxHeight=this._maxWidth=this._maxWordWidth=this._cacheSize=0,this._heightFound=-1,this._offsetRect={x:0,y:0,width:0,height:0}},this._lineSplit=function(e){var t=e.measureText(" ").width,n=this._opts,r=n.text||"",i=n.wrap||"justify"===n.horizontalAlign?r.replace(/\\t/g," ").match(/\\S+|[\\n]| +(?= )/g)||[]:r.split("\\n"),s=0,o=i.length;this._line=[],this._maxWordWidth=this._lineWidth=0;if((n.hardWrap||exports.hardWrap)&&1===i.length&&e.measureText(r).width>this.getActualWidth()){for(var i=[],o=this.getActualWidth(),n="",u=0;u<r.length;){var a=r[u++];e.measureText(n+a).width>=o?(i.push(n),n=a):n+=a}""!==n&&i.push(n),o=i.length}for(;s<o;)r={word:i[s],width:e.measureText(i[s]).width,line:1},this._line.push(r),this._lineWidth+=r.width+t,this._maxWordWidth=Math.max(this._maxWordWidth,r.width),s++;this._lineWidth-=t},this._measureWords=function(e){var t=e.measureText(" ").width,n=0,r=this._line.length;for(this._maxWordWidth=this._lineWidth=0;n<r;)word=this._line[n],word.line=1,word.width=e.measureText(word.word).width,this._lineWidth+=word.width+t,this._maxWordWidth=Math.max(this._maxWordWidth,word.width),n++;this._lineWidth-=t},this._wrap=function(e,t){var n=e.measureText(" ").width,r,i=0,s=[],o=[],u="";this._lines=s;var a=this._maxWidth=0,f=this._line.length;if("justify"===this._opts.horizontalAlign){for(;a<f;)r=this._line[a++],i+=r.width+n,"\\n"===r.word?(s.push(o),o=[],i=0):i>t?(o.length&&s.push(o),o=[r],i=r.width+n):o.push(r);o.length&&s.push(o)}else{for(;a<f;)r=this._line[a++],i=e.measureText(u).width,"\\n"===r.word?(s.push([{word:u,width:i,line:s.length}]),u=""):i+r.width+n>t?(""!==u&&s.push([{word:u,width:i,line:s.length}]),u=r.word):u+=(""!==u?" ":"")+r.word;""!==u&&s.push([{word:u,width:e.measureText(u).width,line:s.length}])}},this._getLineSize=function(e){var t=this._opts;return(1>=e?1:t.lineHeight)*t.size},this._wordFlow=function(e){var e=e.measureText(" ").width,t=this._lines;this._cache=[];for(var n=this._maxHeight=this._maxWidth=this._cacheSize=0,r=t.length,i=this._getLineSize(r),s=0;n<r;){for(var o=t[n++],u=0,a=o.length,f=0;u<a;){var l=o[u++];l.x=f,l.y=s,l.line=n,this._cache[this._cacheSize++]=l,f+=l.width+e}s+=i,f-=e,this._maxWidth=Math.max(this._maxWidth,f),this._maxHeight=Math.max(this._maxHeight,s)}},this._checkWidth=function(e,t){if(""===this._opts.text)return!1;var n=this._opts;if(t>this.getActualWidth()){var r=n.size*this._target.style.width/t|0;return n.size!==r&&this.publish("ChangeSize",r,e),!0}return!1},this._checkHeight=function(e,t,n,r){if(""!==this._opts.text&&!(2>Math.abs(n-t))){var i=Math.max(t+n>>1,1);this.publish("ChangeSize",i,e),r();if(1!==i){var s=this._opts;this._lines.length*this._getLineSize(this._lines.length)>this.getActualHeight()?this._checkHeight(e,t,i,r):(this._heightFound=s.size,this._checkHeight(e,i,n,r))}}},this._horizontalAlign=function(e){var t=this.getPaddingLeft(),e=e.measureText(" ").width,n={left:-1,center:2,right:1,justify:3}[this._opts.horizontalAlign],r=this._cache,i=this.getActualWidth(),s,o;if(r.length){3===n&&(e=0);for(var u,a=0,f=r.length;a<f;){u=a,o=r[a].line;for(s=0;a<f&&o===r[a].line;)s+=r[a].width+e,a++;if(-1===n)for(;u<a;)r[u++].x+=t;else if(3===n){s=o<r[r.length-1].line?(i-s)/(a-u-1):e;for(o=t;u<a;)r[u].x=o,o+=r[u].width+s,u++}else for(s=(i-s+e)/n+t;u<a;)r[u++].x+=s}}},this._verticalAlign=function(){var e=this._lines.length,t={top:-1,middle:2,bottom:1}[this._opts.verticalAlign],n=this._cache,r=this.getActualHeight(),i=n.length;if(n.length){if(-1===t)e=this.getPaddingTop();else var s=this._getLineSize(e),e=(r-e*s)/t+this.getPaddingTop();for(;i;)n[--i].y+=e;this._offsetRect.y+=e}},this.reflow=function(e,t){var n=this._opts,r=this.getActualWidth(),i=this.getActualHeight();this._lineSplit(e);switch(t){case textFlowMode.NONE:this._lines=[this._line],this._wordFlow(e);break;case textFlowMode.WRAP:this._wrap(e,r),this._wordFlow(e);break;case textFlowMode.AUTOSIZE:case textFlowMode.AUTOFONTSIZE_AUTOSIZE:this._lines=[this._line],this._wordFlow(e),r<this._maxWidth&&this.publish("ChangeWidth",this._maxWidth+this.getHorizontalPadding()),i<this._maxHeight&&this.publish("ChangeHeight",this._maxHeight+this.getVerticalPadding());break;case textFlowMode.AUTOSIZE_WRAP:this._wrap(e,r),this._wordFlow(e),r<this._maxWidth&&this.publish("ChangeWidth",this._maxWidth+this.getHorizontalPadding()),i<this._maxHeight&&this.publish("ChangeHeight",this._maxHeight+this.getVerticalPadding());break;case textFlowMode.AUTOFONTSIZE:this._checkWidth(e,this._lineWidth)&&this._lineSplit(e),this._lines=[this._line],n.allowVerticalSizing&&n.size>this.getActualHeight()?(i=bind(this,function(){this._measureWords(e),this._wordFlow(e)}),this._checkHeight(e,1,n.size,i),this.publish("ChangeSize",this._heightFound,e),i()):this._wordFlow(e);break;case textFlowMode.AUTOFONTSIZE_WRAP:this._wrap(e,r),this._checkWidth(e,this._maxWordWidth)&&(this._lineSplit(e),this._wrap(e,r)),this._wordFlow(e);var s=this._lines.length,i=this._getLineSize(s);n.allowVerticalSizing&&s*i>this.getActualHeight()&&(i=bind(this,function(){this._measureWords(e),this._wrap(e,r),this._wordFlow(e)}),this._checkHeight(e,1,n.size,i),this.publish("ChangeSize",this._heightFound,e),i());break;case textFlowMode.AUTOFONTSIZE_WRAP_AUTOSIZE:this._wrap(e,r),this._checkWidth(e,this._maxWordWidth)&&(this._lineSplit(e),this._wrap(e,r)),this._wordFlow(e),i<this._maxHeight&&this.publish("ChangeHeight",this._maxHeight+this.getVerticalPadding())}var s=this._cache,o=s[s.length-1];if(s.length){var u=this._target.getStrokeWidth(),i=Math.ceil(n.size*n.lineHeight+u);this._offsetRect.x=this.getPaddingLeft(),this._offsetRect.y=this.getPaddingTop(),this._offsetRect.width=this.getActualWidth(),this._offsetRect.height=o.line*i,this._horizontalAlign(e),this._verticalAlign(),1===o.line&&(this._offsetRect.x=s[0].x,this._offsetRect.width=o.x+o.width-s[0].x),this._offsetRect.width+=u}},this.setOpts=function(e){this._opts=e},this.getCache=function(){return this._cache},this.getHorizontalPadding=function(){var e=this._target.style.padding;return e.left+e.right},this.getPaddingLeft=function(){return this._target.style.padding.left},this.getActualWidth=function(){return this._target.style.width-this.getHorizontalPadding()},this.getVerticalPadding=function(){var e=this._target.style.padding;return e.top+e.bottom},this.getPaddingTop=function(){return this._target.style.padding.top},this.getActualHeight=function(){return this._target.style.height-this.getVerticalPadding()},this.getOffsetRect=function(){return this._offsetRect}})',pre:!0},"sdk/timestep/ui/legacySettings.js":{path:"sdk/timestep/ui/legacySettings.js",friendlyPath:"...legacySettings",directory:"sdk/timestep/ui/",filename:"legacySettings.js",src:"exports={disableVerticalAutoSize:!1,textViewColor:!1}",pre:!0},"sdk/timestep/ui/backend/canvas/ViewDebugger.js":{path:"sdk/timestep/ui/backend/canvas/ViewDebugger.js",friendlyPath:".backend.canvas.ViewDebugger",directory:"sdk/timestep/ui/backend/canvas/",filename:"ViewDebugger.js",src:'var sdk_timestep_ui_backend_canvas_ViewDebugger;jsio("import std.js as JS");sdk_timestep_ui_backend_canvas_ViewDebugger=__class__;exports=sdk_timestep_ui_backend_canvas_ViewDebugger(function(){return this.init&&this.init.apply(this,arguments)},function(){this.init=function(e,t){this._target=e,this._opts=t=JS.merge(t,{trackClicks:!1,outline:!1,flash:!1}),this.outline=t.outline,this.trackClicks=t.trackClicks,this.flash=t.flash,this._nextFlash=this._flashState=0},this.preRender=function(e){var t;this._time||(this._time=+(new Date));t=this._time;this._time=+(new Date),this._dt=this._time-t,t=this._target.style,this.outline&&(e.save(),e.globalAlpha=.2,e.strokeStyle="black",e.lineWidth=1,e.strokeRect(0,0,t.width,t.height),e.restore())},this.postRender=function(e){var n,r,t=this._target;if(this.trackClicks)for(n=t._clicks.length-1;0<=n;--n){r=t._clicks[n];e.setFillStyle("rgba(0, 0, 0, "+r.o+")"),r.o-=.4*this._dt/1e3,0<r.o?(e.circle(r.x,r.y,15),e.fill()):t._clicks.splice(n,1)}if(this.flash){switch(this._flashState){case 0:e.setFillStyle("rgba(0, 0, 0, 0.5)");break;case 1:e.setFillStyle("rgba(0, 0, 0, 0)");break;case 2:e.setFillStyle("rgba(255, 255, 255, 0.5)");break;case 3:e.setFillStyle("rgba(0, 0, 0, 0)")}n=+(new Date),n>this._nextFlash&&(this._flashState=(this._flashState+1)%4,this._nextFlash=n+300),e.fillRect(0,0,t.style.width,t.style.height)}}})',pre:!0},"sdk/timestep/ui/init.js":{path:"sdk/timestep/ui/init.js",friendlyPath:"ui.init",directory:"sdk/timestep/ui/",filename:"init.js",src:'jsio("import .View"),jsio("import .layout.BackingExtension"),jsio("import .Engine")',pre:!0},"sdk/timestep/ui/layout/BackingExtension.js":{path:"sdk/timestep/ui/layout/BackingExtension.js",friendlyPath:".layout.BackingExtension",directory:"sdk/timestep/ui/layout/",filename:"BackingExtension.js",src:'var layoutProps,key;jsio("import ..View"),jsio("import ..backend.strPad as strPad"),jsio("import ..backend.BaseBacking"),jsio("import .BoxLayout"),jsio("import .LinearLayout"),jsio("import .Padding"),jsio("import util.setProperty");layoutProps={layout:{value:!1,cb:"_onSetLayout"},inLayout:{value:!0,cb:"_onInLayout"},order:{value:0,cb:"_onOrder"},direction:{value:"down",cb:"_onLayoutChange"},flex:{value:0,cb:"_onLayoutChange"},halign:{value:"start"},halignSelf:{value:void 0},valign:{value:"start"},valignSelf:{value:void 0},centerX:{value:!1},centerY:{value:!1},top:{value:void 0,cb:"_onLayoutChange"},right:{value:void 0,cb:"_onLayoutChange"},bottom:{value:void 0,cb:"_onLayoutChange"},left:{value:void 0,cb:"_onLayoutChange"},justifyContent:{value:"start",cb:"_onLayoutChange"},sizeContainerToFit:{value:!1,cb:"_onLayoutChange"},minWidth:{value:void 0,cb:"_onLayoutChange"},minHeight:{value:void 0,cb:"_onLayoutChange"},maxWidth:{value:void 0,cb:"_onLayoutChange"},maxHeight:{value:void 0,cb:"_onLayoutChange"},layoutWidth:{value:void 0,cb:"_onLayoutChange"},layoutHeight:{value:void 0,cb:"_onLayoutChange"},fixedAspectRatio:{value:!1,cb:"_onFixedAspectRatio"},aspectRatio:{value:null,cb:"_onLayoutChange"},margin:{value:null,cb:"_onMarginChange"}};for(key in layoutProps)backend.BaseBacking.addProperty(key,layoutProps[key]);util.setProperty(backend.BaseBacking.prototype,"padding",{get:function(){return this._padding||(this._padding=new Padding)},set:function(e){this._padding?this._padding.update(e):this._padding=new Padding(e),this._onLayoutChange()}}),View.addExtension({extend:function(e){e=e.prototype,e._sortOrder=strPad.initialValue,e._onOrder=function(e,t){this._sortOrder=strPad.pad(t),this._onLayoutChange()},e._onMarginChange=function(e,t){this._cachedMargin?this._cachedMargin.update(t):this._cachedMargin=new Padding(t),this.top=this._cachedMargin.top,this.bottom=this._cachedMargin.bottom,this.left=this._cachedMargin.left,this.right=this._cachedMargin.right,this._onLayoutChange()},e._onFixedAspectRatio=function(e,t){t&&this.updateAspectRatio()},e.updateAspectRatio=function(e,t){this.aspectRatio=(e||this.width)/(t||this.height)},e._onSetLayout=function(e,t){switch(t){case"linear":this._view.__layout=new LinearLayout({view:this._view});break;case"box":this._view.__layout=new BoxLayout({view:this._view})}},e._onInLayout=function(e,t){var n=this._superview&&this._superview.__layout;n&&(t?n.add(this._view):(n.remove(this._view),this._view.needsReflow()))},e._onLayoutChange=function(){var e=this.getSuperview();e&&e.__layout&&e.needsReflow(),this._view.needsReflow()}}})',pre:!0},"sdk/timestep/ui/layout/BoxLayout.js":{path:"sdk/timestep/ui/layout/BoxLayout.js",friendlyPath:".BoxLayout",directory:"sdk/timestep/ui/layout/",filename:"BoxLayout.js",src:'var sdk_timestep_ui_layout_BoxLayout=__class__,BoxLayout=exports=sdk_timestep_ui_layout_BoxLayout(function(){return this.init&&this.init.apply(this,arguments)},function(){var e=this.constructor;this.reflowsChildren=!1,this.init=function(t){this._view=t.view,e.initParentListener(t.view)},this.reflow=function(t){var n=this._view,r=n.getSuperview(),i=n.style;r&&(t||!i.inLayout||!r.style.layout||!r.__layout.reflowsChildren)&&(e.reflowX(n,r.style.width),e.reflowY(n,r.style.height))},e.addParentListener=function(e){e.style.__removeSuperviewResize&&e.style.__removeSuperviewResize();var t=bind(e,"needsReflow"),n=e.getSuperview();n&&n.on("Resize",t),e.style.__removeSuperviewResize=bind(e.style,function(){this.__removeSuperviewResize=null,n&&n.removeListener("Resize",t)})},e.initParentListener=function(e){e.__root&&this.addParentListener(e),e.on("ViewAdded",bind(this,"addParentListener",e)),e.on("ViewRemoved",bind(e.style,function(){this.__removeSuperviewResize&&this.__removeSuperviewResize()}))};var t=/%$/;e.reflowX=function(e,n,r){if(n){var i=e.style,n=n-(r&&r.getHorizontal()||0),s=0;if("wrapContent"==i.layoutWidth)for(var e=e.getSubviews(),o=0,u;u=e[o];++o)u=u.style.x+u.style.width*u.style.scale,u>s&&(s=u);else s=void 0!=i.right&&void 0!=i.left?n/i.scale-(i.left||0)-(i.right||0):t.test(i.layoutWidth)?n/i.scale*parseFloat(i.layoutWidth)/100:i.aspectRatio?i.height*i.aspectRatio:i.width||n/i.scale;i.centerX&&(i.x=(n-i.scale*s)/2+(r&&r.left||0)),void 0==i.left&&void 0!=i.right&&(i.x=n-i.scale*s-i.right-(r&&r.right||0)),void 0!=i.left&&(i.x=i.left+(r&&r.left||0)),i.width=s,i.centerAnchor&&(i.anchorX=s/2)}},e.reflowY=function(e,n,r){if(n){var i=e.style,n=n-(r&&r.getVertical()||0),s=0;if("wrapContent"==i.layoutHeight)for(var e=e.getSubviews(),o=0,u;u=e[o];++o)u=u.style.y+u.style.height*u.style.scale,u>s&&(s=u);else s=void 0!=i.top&&void 0!=i.bottom?n/i.scale-(i.top||0)-(i.bottom||0):t.test(i.layoutHeight)?n/i.scale*parseFloat(i.layoutHeight)/100:i.aspectRatio?i.width/i.aspectRatio:i.height||n/i.scale;i.centerY&&(i.y=(n-i.scale*s)/2+(r&&r.top||0)),void 0==i.top&&void 0!=i.bottom&&(i.y=n-i.scale*s-i.bottom-(r&&r.bottom||0)),void 0!=i.top&&(i.y=i.top+(r&&r.top||0)),i.height=s,i.centerAnchor&&(i.anchorY=s/2)}}});',pre:!0},"sdk/timestep/ui/layout/LinearLayout.js":{path:"sdk/timestep/ui/layout/LinearLayout.js",friendlyPath:".LinearLayout",directory:"sdk/timestep/ui/layout/",filename:"LinearLayout.js",src:'var DEBUG,sdk_timestep_ui_layout_LinearLayout;jsio("import ui.layout.Padding as Padding"),jsio("import .BoxLayout");DEBUG=!1,sdk_timestep_ui_layout_LinearLayout=__class__;exports=sdk_timestep_ui_layout_LinearLayout(function(){return this.init&&this.init.apply(this,arguments)},BoxLayout,function(e){function t(){return this.view.style._sortOrder+this.index}this.reflowsChildren=!0,this.init=function(e){var e,t,n;this._view=e.view,this._view.subscribe("SubviewAdded",this,"_onSubviewAdded"),this._view.subscribe("SubviewRemoved",this,"_onSubviewRemoved"),this.setDirection(e.isVertical?"vertical":"horizontal"),this._views=[];for(e=this._view.getSubviews(),t=0;n=e[t];++t)n.style.inLayout&&this._views.push(this._initLayoutView(n));this._forwardEvents(),this._debug=DEBUG},this._onSubviewRemoved=function(e){e.style.inLayout&&this.remove(e)},this._onSubviewAdded=function(e){e.style.inLayout&&this.add(e)},this.debug=function(){return this._debug=!0,this},this.setDirection=function(e){return this._direction=e,this._propPos=(e="vertical"==e)?"y":"x",this._propPosOpp=e?"x":"y",this._propDim=e?"height":"width",this._minPropDim=e?"minHeight":"minWidth",this._maxPropDim=e?"maxHeight":"maxWidth",this._propDimOpp=e?"width":"height",this._propSideA=e?"top":"left",this._propSideB=e?"bottom":"right",this._flexProp=e?"vflex":"hflex",this._view.needsReflow(),this},this.getDirection=function(){return this._direction},this._events=["ViewWillAppear","ViewDidAppear","ViewWillDisappear","ViewDidDisappear"],this._forwardEvents=function(){var e,t;for(e=0;t=this._events[e];++e)this._view.subscribe(t,this,"_forwardSignal",t)},this._events=["ViewWillAppear","ViewDidAppear","ViewWillDisappear","ViewDidDisappear"],this._forwardSignal=function(){var e,t;for(e=0;t=this._views[e];++e)t.view.publish.apply(t.view,arguments)},this._initLayoutView=function(e){return e.style.inLayout=!0,this._debug&&logger.log(this._view.uid,"adding view",e.uid,this._propDim,e.style[this._propDim]),this._view.connectEvent(e,"Resize",bind(this,"reflow")),{view:e,index:0,toString:t}},this.getSize=function(){return this._size},this.getViewIndex=function(e){var t,n;for(t=0;n=this._views[t];++t)if(n.view==e)return t;return-1},this.addSubviews=function(e){var t,n,r;this._debug&&logger.log(this._view.uid,"adding",e.length,"views");if(isArray(e)){for(t=0,n=e.length;t<n;++t){r=e[t];r&&this._views.push(this._initLayoutView(r))}this._view.needsReflow()}else this.insertBefore(e);return this},this.getSubviews=function(){return this._views.map(function(e){return e.view})},this.remove=function(e){var t=this.getViewIndex(e);-1!=t&&(this._views.splice(t,1),this._view.disconnectEvent(e,"Resize"),this._view.needsReflow())},this.add=this.insertBefore=function(e,t){var n,r,i;if(-1==this.getViewIndex(e)){n=this._initLayoutView(e),r=!1;if(t){i=this.getViewIndex(t);-1!=i&&(this._views.splice(i,0,n),r=!0)}r||this._views.push(n),this._view.needsReflow()}},this.insertAfter=function(e,t){var n,r,i;if(-1==this.getViewIndex(e)){n=this._initLayoutView(e),r=!1;if(t){i=this.getViewIndex(t);-1!=i&&(this._views.splice(i+1,0,n),r=!0)}r||this._views.unshift(n),this._view.needsReflow()}},this.reflow=function(){var t,n,r,i,o,u,a,f,l,c,h,p,d,v,m,g,y,b;e(this,"reflow",arguments);for(t=0,n=0;r=this._views[n];++n)r.view.style.visible&&(r.index=r.view.style.__sortKey,++t);if(t){this._views.sort();if(DEBUG)i=this._view.uid;o=this._view.style;o.direction!=this._direction&&this.setDirection(o.direction);u=this._view.getPosition().scale,a="vertical"==this._direction,f=this._propDim,l=this._minPropDim,c=this._propSideA,h=this._propSideB,p=o.padding,d=p&&(a?p.getVertical():p.getHorizontal())||0,v=o[f],m=this._views;this._debug&&logger.log("reflow() view",i+":",m.length,"subview(s)");g=0,y=0;p&&(a?p.getHorizontal():p.getVertical());for(n=0;r=m[n];++n){b=r.view.style;b.visible&&(r.margins=(b[c]||0)+(b[h]||0),b.flex?(y+=b.flex,r.baseSize=b[l]||0,g+=r.baseSize):g+=(b[f]||0)*b.scale+r.margins,p&&(b.x=p.left,b.y=p.top),BoxLayout.reflowX(r.view,o.width,p),BoxLayout.reflowY(r.view,o.height,p))}if((!y||void 0!=v)&&(n=v-d,!(0>n))){h=o.justifyContent,l=(y||"start"!=h?n:g)+d,g=n-g,!y&&"wrapContent"==o[a?"layoutHeight":"layoutWidth"]&&(this._debug&&logger.log("  view",i,"(sizing to fit)",f,"=",l+"px","("+d+"px padding)"),o[f]=l);for(n=d=o=0;r=m[n];++n)b=r.view.style,b.visible&&b.flex&&(d=r.baseSize+g*(b.flex/y)/b.scale+d,a=Math.round(d/u)*u,d-=a,r.dim=a-r.margins,r.dim>b[this._maxPropDim]&&(r.dim=b[this._maxPropDim]),o+=a);n=g-o,p=p&&p[c]||0,u=0;if(0<n)switch(h){case"end":p+=n;break;case"center":p+=n/2;break;case"space":u=n/(t-1)||0;break;case"space-outside":u=n/(t+1)||0,p+=u}t=this._propPos;for(n=0;r=m[n];++n)b=r.view.style,b.visible&&(b[t]=p+(b[c]||0),this._debug&&logger.log("  view",i,"layout subview",r.view.uid,t,"=",b[t]),b.flex&&(b[f]=r.dim,this._debug&&logger.log("  view",i,"layout subview",r.view.uid,f,"=",b[f])),p+=u+(b[f]||0)*b.scale+r.margins);this._size!=l&&(this._size=l,this._view.publish("LayoutResize",l))}}}})',pre:!0},"sdk/gc/API.js":{path:"sdk/gc/API.js",friendlyPath:"gc.API",directory:"sdk/gc/",filename:"API.js",src:'var sdk_gc_API;jsio("import lib.PubSub"),jsio("import lib.Callback"),jsio("import std.uri as URI"),jsio("import ui.Engine"),jsio("import ui.View"),jsio("import ui.StackView"),jsio("import device"),device.simulatingMobileNative&&jsio("import .debugging.nativeShim"),GLOBAL.CONFIG||(GLOBAL.CONFIG={}),GLOBAL.DEBUG||(GLOBAL.DEBUG=!1),GLOBAL.CONFIG.isMuted&&(jsio("import AudioManager"),GLOBAL.ACCESSIBILITY.mute(!0));sdk_gc_API=__class__;exports=sdk_gc_API(function(){return this.init&&this.init.apply(this,arguments)},lib.PubSub,function(){var t,e=navigator.userAgent;(this.isNative=/TeaLeaf/.test(e))?(this.isIOS=/iPhone OS/.test(e),this.isAndroid=/Android/.test(e)):/(iPod|iPhone|iPad)/i.test(e)?(this.isIOS=this.isMobileBrowser=!0,this.isUIWebView=!/Safari/.test(e)):/Android/.test(e)?this.isAndroid=this.isMobileBrowser=!0:(this.isDesktop=!0,this.isFacebook=GLOBAL.CONFIG.isFacebookApp),this.init=function(){if(GLOBAL.window&&window.top)try{window.top.GC=GLOBAL.GC}catch(e){}GLOBAL.ADDON_SOCIAL&&ADDON_SOCIAL&&(jsio("import GCSocial.GCSocial",{suppressErrors:!0}),this.social=GCSocial.GCSocial,GLOBAL.gcsocial=this.social,this.social.init({appID:GLOBAL.CONFIG.appID,shortName:GLOBAL.CONFIG.shortName,inviteURLTemplate:GLOBAL.CONFIG.inviteURLTemplate,endpoint:GLOBAL.CONFIG.servicesURL}),this.track=gcsocial.tracker),window.addEventListener("pageshow",bind(this,"_onShow"),!1),window.addEventListener("pagehide",bind(this,"_onHide"),!1),this.isOnline=navigator.onLine,window.addEventListener("online",bind(this,function(){this.isOnline||(this.isOnline=!0,this.publish("OnlineStateChanged",!0))}),!1),window.addEventListener("offline",bind(this,function(){this.isOnline&&(this.isOnline=!1,this.publish("OnlineStateChanged",!1))}),!1),CONFIG.version&&logger.log("Version",CONFIG.version)},GLOBAL.GC=new this.constructor,GC.Application=ui.StackView,jsio("import .UI"),GC.ui=new UI;try{GLOBAL.CACHE&&(t=JSON.parse(GLOBAL.CACHE["spritesheets/map.json"]))}catch(n){logger.warn("spritesheet map failed to parse",n)}jsio("import ui.resource.loader"),GC.resources=ui.resource.loader,GC.resources.setMap(t),GC.env=="browser"&&setTimeout(bind(this,"_onShow"),0),this._onHide=function(){this.app&&this.app.onPause&&this.app.onPause(),this.publish("Hide"),this.publish("AfterHide"),this.tracker&&this.tracker.endSession()},this._onShow=function(){this.app&&this.app.onResume&&this.app.onResume(),this.publish("Show"),this.publish("AfterShow")},this.buildApp=function(){return jsio("import src.Application as Application"),Application.prototype.__root=!0,this.app=new Application,this.buildEngine(merge({view:this.app},this.app._settings)),this.app},this.buildEngine=function(e){var e,t,n,r,i,s,o;e||(e={}),e.entry||(e.entry="launchUI");t=e.view;if(!t)throw"a timestep.Engine must be created with a root view";if(!(t instanceof ui.View))throw"src/Application.js must export a Class that inherits from ui.View";t.subscribe("onLoadError",this,"_onAppLoadError");typeof t[e.entry]=="function"&&(n=bind(t,e.entry)),t.view=t,t.engine=new ui.Engine(e),t.engine.show(),t.engine.startLoop();try{t.initUI&&t.initUI();r=(t._settings||{}).preload,i=CONFIG.splash&&CONFIG.splash.autoHide!==!1;if(r&&r.length){for(s=new lib.Callback,e=0;o=r[e];++e)GC.resources.preload(o,s.chain());i&&s.run(GC,"hidePreloader",null),n&&s.run(n)}else i&&GC.hidePreloader(),n&&n()}catch(u){throw this._onAppLoadError(u),u}},this._onAppLoadError=function(e){var t;logger.error("encountered error when creating src Application: ",JSON.stringify(e));t=CONFIG.splash;t&&t.onAppLoadError&&t.onAppLoadError(e)},this.hidePreloader=function(e){var t=CONFIG.splash;t&&t.hide&&!t.hidden?(t.hide(e),t.hidden=!0):e&&e()}})',pre:!0},"sdk/gc/debugging/nativeShim.js":{path:"sdk/gc/debugging/nativeShim.js",friendlyPath:".debugging.nativeShim",directory:"sdk/gc/debugging/",filename:"nativeShim.js",src:'var testContactList,_withContacts,_withPhoneNumber;jsio("import lib.PubSub"),jsio("import lib.Callback");testContactList=[];exports.onBackButton=function(){},exports.dialogs={showDialog:function(){logger.log("Showing a dialog!")},showAppRater:function(){logger.log("Showing rate dialog!")}};_withContacts=new lib.Callback;_withContacts.fire(),exports.contacts=merge(new lib.PubSub,{getContactList:function(){return testContactList},withContacts:function(){_withContacts.forward(arguments)},sendAutomatedSMS:function(e,t,n){logger.log("Send Automated SMS:",e,t),n&&n()},sendSMS:function(e,t,n){logger.log("Send SMS:",e,t),n&&n()},getPicture:function(){return null},getPictures:function(){return null},getPictureBase64:function(){return null}});_withPhoneNumber=new lib.Callback;_withPhoneNumber.fire(null),_withPhoneNumber=new lib.Callback,_withPhoneNumber.fire(null),exports.profile={fullName:"",getPicture:function(){return null},getPictureBase64:function(){return null},withPhoneNumber:function(){_withPhoneNumber.forward(arguments)}},exports.sound={playSound:function(){logger.log("this would play a sound on native")},loadSound:function(){logger.log("this would load a sound on native")},pauseSound:function(){logger.log("this would pause a sound on native")},stopSound:function(){logger.log("this would stop a sound on native")},setVolume:function(){logger.log("this would set the volume of a sound on native")},loadBackgroundMusic:function(){logger.log("this would load background music on native")},playBackgroundMusic:function(){logger.log("this would play background music on native")},registerMusic:function(){logger.log("this would register background music on native")}},exports.alerts=new lib.PubSub,merge(exports.alerts,{onNotificationLoad:function(){},showNotification:function(){return-1},showRecurringNotification:function(){return logger.log("Setting up a recurring notification!"),-1}}),exports.social=new lib.PubSub,GLOBAL.NATIVE||(GLOBAL.NATIVE=exports)',pre:!0},"sdk/gc/UI.js":{path:"sdk/gc/UI.js",friendlyPath:".UI",directory:"sdk/gc/",filename:"UI.js",src:'var config,uiExports,sdk_gc_UI,cache,key,getter;function AsyncImageLoader(e,t){var n=new ui.resource.Image({url:e});n.doOnLoad(function(){t(n)})}function getCanvasCtor(){return jsio("import device"),device.get("Canvas")}jsio("from util.browser import $"),jsio("import std.uri"),jsio("import std.js as JS"),jsio("import lib.Iterator"),jsio("import lib.Callback"),jsio("import device"),jsio("import ui.widget.Spinner as Spinner");config=window.CONFIG;logger.log("ITS ",GLOBAL.HTMLCanvasElement);uiExports={GCView:function(){return jsio("import ui.View"),ui.View},GCImage:function(){return jsio("import ui.resource.Image"),ui.resource.Image},GCImageView:function(){return jsio("import ui.ImageView"),ui.ImageView},GCCanvas:getCanvasCtor,GCSprite:function(){return jsio("import ui.SpriteView"),ui.SpriteView},GCResources:function(){return jsio("import ui.resource.loader"),ui.resource.loader}},sdk_gc_UI=__class__;exports=sdk_gc_UI(function(){return this.init&&this.init.apply(this,arguments)},function(){var e;this.cssFile=function(e,t){var n=CACHE[e];n&&($({tag:"style",text:n,parent:document.getElementsByTagName("head")[0]}),setTimeout(t,0))},this._spinnerCounter=0,jsio("import device");this._scale=e=navigator.displayMetrics?navigator.displayMetrics.densityDpi/160:!CONFIG.scaleDPR&&device.isMobileBrowser?1:window.devicePixelRatio||1,this.setTargetDensity=function(t){switch(t){case"high":this._scale=.5*e;break;case"medium":this._scale=.75*e;break;default:this._scale=e}logger.log("scale:",this._scale)},this.getScale=function(){return this._scale},this.getIntValue=function(e){return Math.round(e*this._scale)/this._scale},this.showSpinner=function(){var e,t;if(this._spinnerCounter)++this._spinnerCounter;else{e=GC.app.view;if(e)if(++this._spinnerCounter,this._spinner)e.addSubview(this._spinner);else{t=50*device.screen.devicePixelRatio;this._spinner=new Spinner({width:t,height:t,x:e.style.width/2-t/2,y:e.style.height/2-t/2,parent:e})}}},this.hideSpinner=function(){--this._spinnerCounter,0>=this._spinnerCounter&&(this._spinnerCounter=0,this._spinner&&this._spinner.removeFromSuperview())}});cache={};for(key in uiExports){getter=bind(GLOBAL,function(e){return cache[e]||(cache[e]=uiExports[e]())},key);GLOBAL.__defineGetter__?GLOBAL.__defineGetter__(key,getter):Object.defineProperty&&Object.defineProperty(GLOBAL,key,{get:getter})}',pre:!0},"sdk/jsio/lib/Iterator.js":{path:"sdk/jsio/lib/Iterator.js",friendlyPath:"lib.Iterator",directory:"sdk/jsio/lib/",filename:"Iterator.js",src:'var sdk_jsio_lib_Iterator;"use import";jsio("import std.js as JS");sdk_jsio_lib_Iterator=__class__;exports=sdk_jsio_lib_Iterator(function(){return this.init&&this.init.apply(this,arguments)},function(){this.init=function(e){var t,n;this._src=e,this._calls=this._i=0;if(JS.isArray(e))this._isArray=!0;else if(Object.keys)this._keys=Object.keys(e);else{t=this._keys=[];for(n in e)e.hasOwnProperty(n)&&t.push(n)}},this.nextKey=function(){return this._keys[this._i++]},this.next=function(){var e;if(this._isArray)return this._src[this._i++]||exports.END_OF_LOOP;e=this._keys[this._i++];return e?this._src[e]:exports.END_OF_LOOP},this.loop=function(e){var t;1<arguments.length&&(e=bind.apply(this,arguments));if(this._isArray)for(;t=this.next();)e(t);else for(;t=this.nextKey();)e(this._src[t],t)},this.asyncLoop=function(e){1<arguments.length&&(e=bind.apply(this,arguments)),this._next=bind(this,"_onReturn",e),this._calls++,this._asyncLoop(e)},this._asyncLoop=function(e){for(this._inLoop=!0;this._calls;)--this._calls,e(this.next(),this._next);this._inLoop=!1},this._onReturn=function(e){this._calls++,this._inLoop||this._asyncLoop(e)}}),exports.END_OF_LOOP=Error("jsio.Iterator.END_OF_LOOP")',pre:!0},"sdk/timestep/ui/widget/Spinner.js":{path:"sdk/timestep/ui/widget/Spinner.js",friendlyPath:"ui.widget.Spinner",directory:"sdk/timestep/ui/widget/",filename:"Spinner.js",src:'var sdk_timestep_ui_widget_Spinner;jsio("import ui.View as View");sdk_timestep_ui_widget_Spinner=__class__;exports=sdk_timestep_ui_widget_Spinner(function(){return this.init&&this.init.apply(this,arguments)},View,function(e){var t={cycles:.5,radius:10,spokes:20,thickness:2,trail:10,color:"#ffffff",backgroundColor:"rgba(0, 0, 0, 0.5)",layout:"box"};this.tag="Spinner",this._t=0,this.init=function(n){this._opts=merge(n,t),this._step=2*Math.PI/this._opts.spokes,e(this,"init",[this._opts])},this.tick=function(e){var e,t;this._t+=e;e=this._t/1e3%(1/this._opts.cycles)*Math.PI,t=this._r;this._r=e-e%this._step,t!=e&&this.needsRepaint()},this.render=function(e){var t,n,r,i,s,o,u,a;e.fillStyle=this._opts.backgroundColor;t=this.style.width,n=this.style.height,r=this._opts.radius,i=this._opts.trail,s=this._opts.thickness;for(u=0;u<r;++u)o=u+1,o=Math.round(r-Math.sqrt(2*o*r-o*o)),e.fillRect(o,u,t-2*o,1);u=n-r,e.fillRect(0,r,t,u-r);for(a=0;a<r;++a)o=r-a,o=Math.round(r-Math.sqrt(2*o*r-o*o)),e.fillRect(o,u+a,t-2*o,1);e.fillStyle=this._opts.color,e.translate(t/2,n/2),t/=2,e.rotate(this._r);for(a=0;a<this._opts.spokes;++a)e.rotate(this._step),e.globalAlpha=Math.max(.1,(a-i)/i),e.fillRect(10,-s/2,t-15,s)}})',pre:!0},"sdk/timestep/ui/ImageView.js":{path:"sdk/timestep/ui/ImageView.js",friendlyPath:"ui.ImageView",directory:"sdk/timestep/ui/",filename:"ImageView.js",src:'jsio("import device"),exports=device.importUI("ImageView")',pre:!0},"sdk/timestep/ui/SpriteView.js":{path:"sdk/timestep/ui/SpriteView.js",friendlyPath:"ui.SpriteView",directory:"sdk/timestep/ui/",filename:"SpriteView.js",src:'var sdk_timestep_ui_SpriteView,SpriteView,Group;jsio("import ui.ImageView as ImageView"),jsio("import ui.resource.Image as Image"),jsio("import ui.resource.loader");sdk_timestep_ui_SpriteView=__class__,SpriteView=exports=sdk_timestep_ui_SpriteView(function(){return this.init&&this.init.apply(this,arguments)},"SpriteView",ImageView,function(e,t){this.defaults={url:null,groupID:"default",frameRate:15,delay:0,emitFrameEvents:!1,autoStart:!1,loop:!0};var n={};this.init=function(e){this._opts=e=merge(e,this.defaults),e.visible=!1,t(this,"init",[e]),this.resetAllAnimations(e)},this.resetAllAnimations=function(e){this.stopAnimation(),this._opts=e=merge(e,this.defaults);var t=SpriteView.allAnimations[e.url];this.groupID=e.groupID,this.frameRate=e.frameRate,n[this.groupID]||(n[this.groupID]=new Group),this._animations={};if(e.sheetData){var t=e.sheetData.width||e.width,r=e.sheetData.height||e.height,i;for(i in e.sheetData.anims)this._opts.defaultAnimation||(this._opts.defaultAnimation=i),this.loadFromSheet(i,e.sheetData.url,t,r,e.sheetData.offsetX||t,e.sheetData.offsetY||r,e.sheetData.startX||0,e.sheetData.startY||0,e.sheetData.anims[i])}else for(i in t)this._opts.defaultAnimation||(this._opts.defaultAnimation=i),this.addAnimation(i,t[i]);e.autoSize&&this._opts.defaultAnimation&&(i=this._animations[this._opts.defaultAnimation].frames,i[0]&&(this.style.width=i[0].getWidth(),this.style.height=i[0].getHeight())),e.autoStart&&this.startAnimation(this._opts.defaultAnimation,e)},this.loadFromSheet=function(e,t,n,r,i,s,o,u,a){for(var f=[],l=0;l<a.length;l++)f.push(new Image({url:t,sourceW:n,sourceH:r,sourceX:o+a[l][0]*i,sourceY:u+a[l][1]*s}));this._animations[e]={frames:f}},this.addAnimation=function(e,t){isArray(t)||(t=SpriteView.allAnimations[t][e]);for(var n=[],r=0,i;i=t[r];r++)n.push(new Image({url:i.url}));this._animations[e]={frames:n}},this.getFrame=function(e,t){return this._animations[e].frames[t]},this.getFrameCount=function(e){return this._animations[e].frames.length},this.getGroup=function(e){return n[e||this.groupID]},this.startAnimation=function(e,t){t=t||{},!0===t.randomFrame&&null==t.frame&&(t.frame=Math.random()*this._animations[e].frames.length|0),!0===t.loop&&(t.iterations=Infinity),this._iterationsLeft=t.iterations||1,this._callback=t.callback||null,this._currentAnimationName=e,this._currentFrame=t.frame||0,this._delay=this._dt=0;if(!this._animations[e])throw Error("Animation "+e+" does not exist: "+this._opts.url+".");this.isPlaying||(GC.app.engine.subscribe("Tick",this,"_tickSprite"),n[this.groupID].add(this),this.isPlaying=this.running=!0,this.style.visible=!0),this._tickSprite(0)},this.stopAnimation=function(){this.isPlaying&&(this.style.visible=!1,GC.app.engine.unsubscribe("Tick",this,"_tickSprite"),this.isPaused=this._isPaused=this.isPlaying=this.running=!1,n[this.groupID].remove(this.uid))},this.resetAnimation=function(){this._opts.loop?this.startAnimation(this._opts.defaultAnimation):this.stopAnimation()},this.setFramerate=function(e){this.frameRate=e||1e-5},this.pause=function(){this.isPaused=this._isPaused=!0},this.resume=function(){this.isPaused=this._isPaused=!1},this._tickSprite=function(e){if(!this.isPaused)if(e+=this._dt,this._delay)this._delay-=e,0>this._delay&&(this._delay=0);else{var t=this._animations[this._currentAnimationName],n=1e3/this.frameRate,r=e/n|0,i=this._currentFrame;this._dt=e-r*n,this._currentFrame=(this._currentFrame+r)%t.frames.length,0>this._currentFrame&&(this._currentFrame+=t.frames.length);if(0!==r||0===e)if(this.setImage(this._animations[this._currentAnimationName].frames[this._currentFrame]),this._opts.emitFrameEvents)for(e=0;e<r;e++)this.publish(this._currentAnimationName+"_"+(i+e)%t.frames.length);(i+r)/t.frames.length|0&&(this._delay=this._opts.delay,0>=--this._iterationsLeft&&(t=this._callback,this._callback=null,this.resetAnimation(),t&&t()))}}});SpriteView.allAnimations={},SpriteView.getGroup=SpriteView.prototype.getGroup,function(){var r,i,s,o,e=ui.resource.loader.getMap(),t=SpriteView.allAnimations,n=Object.keys(e);n.sort();for(r in n){i=n[r],s=/((?:.*)\\/.*?)[-_ ](.*?)[-_ ](\\d+)/.exec(i);if(s){o=s[1],s=s[2],o=t[o]||(t[o]={}),o=o[s]||(o[s]=[]),s=e[i];s.url=i,o.push(s)}}}();Group=__class__,Group=Group(function(){return this.init&&this.init.apply(this,arguments)},jsio.__filename,function(){this.init=function(){this.sprites={}},this.add=function(e){this.sprites[e.uid]=e},this.remove=function(e){delete this.sprites[e]},this.pause=function(){this._forEachSprite("pause")},this.resume=function(){this._forEachSprite("resume")},this.stopAnimation=function(){this._forEachSprite("stopAnimation")},this.resetAnimation=function(){this._forEachSprite("resetAnimation")},this._forEachSprite=function(e){for(var t in this.sprites)this.sprites[t][e]()}})',pre:!0},"./src/Application.js":{path:"./src/Application.js",friendlyPath:"src.Application",directory:"./src/",filename:"Application.js",baseMod:"src",basePath:".",src:'var src_Application;jsio("import device"),jsio("import ui.TextView as TextView"),jsio("import src.map.Map as Map"),jsio("import src.map.MapMarker as MapMarker");src_Application=__class__;exports=src_Application(function(){return this.init&&this.init.apply(this,arguments)},GC.Application,function(){this.initUI=function(){var e=new Map({superview:this,width:device.width,height:device.height,zIndex:1},{zMin:2,zMax:18,position:{lat:47.20696,lon:-1.560413,z:17}});new MapMarker({},{map:e,lat:47.20696,lon:-1.560413})},this.launchUI=function(){}})',pre:!0},"sdk/timestep/ui/TextView.js":{path:"sdk/timestep/ui/TextView.js",friendlyPath:"ui.TextView",directory:"sdk/timestep/ui/",filename:"TextView.js",src:'jsio("import device"),exports=device.importUI("TextView")',pre:!0},"./src/map/Map.js":{path:"./src/map/Map.js",friendlyPath:"src.map.Map",directory:"./src/map/",filename:"Map.js",src:'var src_map_Map;jsio("import device"),jsio("import animate"),jsio("import ui.View as View"),jsio("import ui.ImageView as ImageView"),jsio("import ui.resource.Image as Image");src_map_Map=__class__;exports=src_map_Map(function(){return this.init&&this.init.apply(this,arguments)},View,function(e){var t,n,r,i,s,o;this.init=function(t,n){this.settings=merge(n,{tilesize:256*device.screen.devicePixelRatio,zMin:2,zMax:18,position:{lat:47.233,lon:-1.583,z:10},overflow:50,animationsDuration:100,maxTilesCache:500,tileProvider:function(e,t,n){return"http://"+["a","b","c"][3*Math.random()|0]+".tile.openstreetmap.org/"+n+"/"+e+"/"+t+".png"}}),this.bounds={latTop:0,latBottom:0,lonRight:0,lonLeft:0},this.animations=[],this.objects=[],this._resetRefreshConfig(),t=merge(t,{backgroundColor:"#EEEEEE",clip:!0}),e(this,"init",[t])},this.buildView=function(){var t,e=this;this._refreshOnTick();t=GC.app.engine.getCanvas();t.addEventListener&&(this.mouseWheelEvent=function(t){var t=t||window.event,n=t.clientX,r=t.clientY,i=e.getPosition();n<i.x||n>i.x+i.width||r<i.y||r>i.y+i.height||(n=0,t.wheelDelta?(n=t.wheelDelta/120,window.opera&&(n=-n)):t.detail&&(n=-t.detail/3),0!=n&&e.zoomByStep(n/10),t.preventDefault(),t.stopPropagation())},t.addEventListener("DOMMouseScroll",this.mouseWheelEvent,!1),t.addEventListener("mousewheel",this.mouseWheelEvent,!1)),this.on("Drag",function(t,n,o){var o,t=Math.ceil(e.settings.position.z),n=e.settings.tilesize*e._computeScale(t),u=s(2,t)*(e.settings.position.lon+180)/360,f=r(e.settings.position.lat,t);f=i(f-o.y/n,t),o=(u-o.x/n)/s(2,t)*360-180;this.setPosition(f,o)}),this.on("InputStart",function(t){e.startDrag({inputStartEvt:t})})},this.tick=function(){this._refreshConfig.refreshOnTick&&this._refresh()},this.remove=function(){var e=GC.app.engine.getCanvas();e.removeEventListener&&(e.removeEventListener("DOMMouseScroll",this.mouseWheelEvent),e.removeEventListener("mousewheel",this.mouseWheelEvent)),this.removeFromSuperview()},this.addObject=function(e){e.hasSuperview=!1,this.objects.push(e)},this.clearObjects=function(){var e;for(e=this.objects.length-1;0<=e;e--)this.objects[e].removeFromSuperview();this.objects=[]},this.setPosition=function(e,t,n){this.settings.position.lat=e,this.settings.position.lon=t,null!=n&&(this.settings.position.z=n),this._refreshOnTick()},this.zoom=function(e){var e=Math.max(Math.min(e,this.settings.zMax),this.settings.zMin),t=this.settings.position.z-e;this.settings.position.z=e,this._refreshConfig={enableAnimations:!0,zoomDirection:t?0<t?1:-1:0},this._refreshOnTick(),this.emit("ZoomChange",e)},this.zoomByStep=function(e){this.zoom(this.settings.position.z+e)},this._refreshOnTick=function(){this._refreshConfig.refreshOnTick=!0},this._resetRefreshConfig=function(){this._refreshConfig={refreshOnTick:!1,enableAnimations:!1,zoomDirection:0}},this._refresh=function(){var n,r,i,s,o,e=Math.ceil(this.settings.position.z),t=e+this._refreshConfig.zoomDirection;this._clearAnimations(),this._computeBoundaries();o=this.getSubviews();for(s=o.length-1;0<=s;s--)o[s].isLayer?o[s].zoom==e?n=o[s]:e!=t&&o[s].zoom==t?r=o[s]:o[s].isLayer&&o[s].removeFromSuperview():o[s].objectsView&&(i=o[s]);n||(n=new View({superview:this,width:this.style.width,height:this.style.height}),n.isLayer=!0,n.zoom=e),e!=t&&(r||(r=new View({superview:this,width:this.style.width,height:this.style.height}),r.isLayer=!0,r.zoom=t),r.style.zIndex=1,this._loadLayer(r,t,!0)),n.style.zIndex=2,this._loadLayer(n,e,!1,function(){r&&(r.isLayer=!1,setTimeout(function(){r.removeFromSuperview()},500))}),i||(i=new View({superview:this,width:this.style.width,height:this.style.height,zIndex:3}),i.objectsView=!0),this._showObjects(i),this._resetRefreshConfig()},this._loadLayer=function(e,t,n,i){var o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E;for(o=this,u=this.settings.tilesize*o._computeScale(t),a=s(2,t)*(this.settings.position.lon+180)/360,f=r(this.settings.position.lat,t),l=a|0,c=f|0,a=this.style.width/2-(a-l)*u,f=this.style.height/2-(f-c)*u,h=Math.ceil((this.settings.overflow+a)/u),p=a-h*u,d=l-h,l=l+Math.ceil((this.style.width+this.settings.overflow-a)/u-1),a=Math.ceil((this.settings.overflow+f)/u),v=f-a*u,m=c-a,c=c+Math.ceil((this.style.height+this.settings.overflow-f)/u-1),f=[],g={},a=function(r,i){var s,u=o._getTile(r,i,t,n);return u&&(s=new ImageView({superview:e,image:u}),s.tileX=r,s.tileY=i),s},h=function(e,t){var n;o._refreshConfig.enableAnimations&&(n=o._animate(e));var r={opacity:1,width:u,height:u,x:p+(e.tileX-d)*u,y:v+(e.tileY-m)*u};t?(e.style.update(r),o._refreshConfig.enableAnimations&&(e.style.opacity=0,n.then({opacity:1},o.settings.animationsDuration))):o._refreshConfig.enableAnimations?n.then(r,o.settings.animationsDuration):e.style.update(r),g[e.tileX+","+e.tileY]=!0},y=e.getSubviews(),b=y.length-1;0<=b;b--)y[b].tileX>=d&&y[b].tileX<=l&&y[b].tileY>=m&&y[b].tileY<=c?(h(y[b]),f.push(y[b])):y[b].removeFromSuperview();for(y=d;y<=l;y++)for(b=m;b<=c;b++)if(!(y+","+b in g)){w=a(y,b);w&&(h(w,!0),f.push(w))}if("function"==typeof i)for(E=f.length,b=f.length-1;0<=b;b--)f[b].doOnLoad(function(){E--,0==E&&i()})},this._showObjects=function(e){var t,n,r,i,s;for(t=this.bounds.latBottom-this.bounds.latTop,n=this.bounds.lonRight-this.bounds.lonLeft,r=this.objects.length-1;0<=r;r--){i=this.objects[r];if(10<=this.settings.position.z&&i.settings.lat<=this.bounds.latTop&&i.settings.lat>=this.bounds.latBottom&&i.settings.lon<=this.bounds.lonLeft&&i.settings.lon>=this.bounds.lonRight){s={x:this.style.width*(1-(i.settings.lon-this.bounds.lonLeft)/n),y:this.style.height*(i.settings.lat-this.bounds.latTop)/t};i.hasSuperview&&this._refreshConfig.enableAnimations?this._animate(i).then(s,this.settings.animationsDuration):i.style.update(s),i.hasSuperview||(e.addSubview(i),i.hasSuperview=!0)}else i.hasSuperview&&(i.removeFromSuperview(),i.hasSuperview=!1)}},this._computeScale=function(e){return s(2,this.settings.position.z)/s(2,e)},this._computeBoundaries=function(){var e=Math.ceil(this.settings.position.z),t=this.settings.tilesize*this._computeScale(e),n=s(2,e)*(this.settings.position.lon+180)/360,o=r(this.settings.position.lat,e);this.bounds={latTop:i(o-this.style.height/2/t,e),latBottom:i(o+this.style.height/2/t,e),lonRight:360*((n-this.style.width/2/t)/s(2,e))-180,lonLeft:360*((n+this.style.width/2/t)/s(2,e))-180}},this._getTile=function(e,r,i,s){var o=e+","+r+","+i;if(!t[o]&&!s){t[o]=new Image({url:this.settings.tileProvider(e,r,i)}),n.push(o);for(e=n.length-50;0<=e;e--)if(r=t[n[e]],!r.isReady()){try{if(r.destroy)r.destroy()}catch(u){}delete t[n.splice(e,1)[0]]}for(;n.length>this.settings.maxTilesCache;)t[n.shift()].destroy(),delete t[n.shift()]}return t[o]},this._animate=function(e){return e=animate(e),this.animations.push(e),e},this._clearAnimations=function(){var e;for(e=this.animations.length-1;0<=e;e--)this.animations[e].clear();this.animations=[]};t={},n=[],r=function(e,t){return s(2,t)*(1-Math.log(Math.tan(e*Math.PI/180)+1/Math.cos(e*Math.PI/180))/Math.PI)/2},i=function(e,t){var n=Math.PI-2*Math.PI*e/s(2,t);return 180/Math.PI*Math.atan(.5*(Math.exp(n)-Math.exp(-n)))},s=function(e,t){return o[e]||(o[e]={}),"undefined"==typeof o[e][t]&&(o[e][t]=Math.pow(e,t)),o[e][t]},o={}})',pre:!0},"./src/map/MapMarker.js":{path:"./src/map/MapMarker.js",friendlyPath:"src.map.MapMarker",directory:"./src/map/",filename:"MapMarker.js",src:'var src_map_MapMarker;jsio("import device"),jsio("import ui.ImageView as ImageView");src_map_MapMarker=__class__;exports=src_map_MapMarker(function(){return this.init&&this.init.apply(this,arguments)},ImageView,function(e){this.init=function(t,n){if(!("map"in n))throw Error("MapMarker - Missing parameter: map");if(!("lat"in n))throw Error("MapMarker - Missing parameter: lat");if(!("lon"in n))throw Error("MapMarker - Missing parameter: lon");this.settings=n,t=merge(t,{image:"resources/images/map-marker.png",width:32*device.screen.devicePixelRatio,height:32*device.screen.devicePixelRatio,offsetX:-16*device.screen.devicePixelRatio,offsetY:-32*device.screen.devicePixelRatio}),e(this,"init",[t]),n.map.addObject(this)}})',pre:!0}})</script></html>